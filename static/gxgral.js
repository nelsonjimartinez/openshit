/*
 GeneXus 10.3.13.112791*/
(function(j,f){if("object"===typeof exports&&exports)f(exports);else{var d={};f(d);"function"===typeof define&&define.amd?define(d):j.Mustache=d}})(this,function(j){function f(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a){this.tail=this.string=a;this.pos=0}function b(a,c){this.view=a||{};this.parent=c;this._cache={}}function a(){this.clearCache()}function c(a,g,b,p){for(var n="",d,f,l=0,m=a.length;l<m;++l)switch(d=a[l],f=d[1],d[0]){case "#":f=b.lookup(f);if("object"===typeof f)if(s(f))for(var o=
0,k=f.length;o<k;++o)n+=c(d[4],g,b.push(f[o]),p);else f&&(n+=c(d[4],g,b.push(f),p));else"function"===typeof f?(d=null==p?null:p.slice(d[3],d[5]),f=f.call(b.view,d,function(a){return g.render(a,b)}),null!=f&&(n+=f)):f&&(n+=c(d[4],g,b,p));break;case "^":f=b.lookup(f);if(!f||s(f)&&0===f.length)n+=c(d[4],g,b,p);break;case ">":f=g.getPartial(f);"function"===typeof f&&(n+=f(b));break;case "&":f=b.lookup(f);null!=f&&(n+=f);break;case "name":f=b.lookup(f);null!=f&&(n+=j.escape(f));break;case "text":n+=f}return n}
function g(a){return[RegExp(f(a[0])+"\\s*"),RegExp("\\s*"+f(a[1]))]}var p=/\s*/,n=/\s+/,l=/\S/,o=/\s*=/,m=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/,q=RegExp.prototype.test,t=Object.prototype.toString,s=Array.isArray||function(a){return"[object Array]"===t.call(a)},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.prototype.eos=function(){return""===this.tail};d.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=
a[0].length,a[0]):""};d.prototype.scanUntil=function(a){var c=this.tail.search(a);switch(c){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return a};b.make=function(a){return a instanceof b?a:new b(a)};b.prototype.push=function(a){return new b(a,this)};b.prototype.lookup=function(a){var c=this._cache[a];if(!c){if("."==a)c=this.view;else for(var g=this;g;){if(0<a.indexOf("."))for(var c=
g.view,b=a.split("."),p=0;c&&p<b.length;)c=c[b[p++]];else c=g.view[a];if(null!=c)break;g=g.parent}this._cache[a]=c}"function"===typeof c&&(c=c.call(this.view));return c};a.prototype.clearCache=function(){this._cache={};this._partialCache={}};a.prototype.compile=function(a,c){var g=this._cache[a];g||(g=j.parse(a,c),g=this._cache[a]=this.compileTokens(g,a));return g};a.prototype.compilePartial=function(a,c,g){c=this.compile(c,g);return this._partialCache[a]=c};a.prototype.getPartial=function(a){!(a in
this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));return this._partialCache[a]};a.prototype.compileTokens=function(a,g){var p=this;return function(n,d){if(d)if("function"===typeof d)p._loadPartial=d;else for(var f in d)p.compilePartial(f,d[f]);return c(a,p,b.make(n),g)}};a.prototype.render=function(a,c,g){return this.compile(a)(c,g)};j.name="mustache.js";j.version="0.7.2";j.tags=["{{","}}"];j.Scanner=d;j.Context=b;j.Writer=a;j.parse=function(a,c){a=a||"";c=c||j.tags;
"string"===typeof c&&(c=c.split(n));if(2!==c.length)throw Error("Invalid tags: "+c.join(", "));for(var b=g(c),s=new d(a),t=[],r=[],v=[],C=!1,D=!1,G,F,J,L;!s.eos();){G=s.pos;if(J=s.scanUntil(b[0])){L=0;for(var O=J.length;L<O;++L)if(F=J.charAt(L),q.call(l,F)?D=!0:v.push(r.length),r.push(["text",F,G,G+1]),G+=1,"\n"==F){if(C&&!D)for(;v.length;)delete r[v.pop()];else v=[];D=C=!1}}if(!s.scan(b[0]))break;C=!0;F=s.scan(k)||"name";s.scan(p);"="===F?(J=s.scanUntil(o),s.scan(o),s.scanUntil(b[1])):"{"===F?(J=
s.scanUntil(RegExp("\\s*"+f("}"+c[1]))),s.scan(m),s.scanUntil(b[1]),F="&"):J=s.scanUntil(b[1]);if(!s.scan(b[1]))throw Error("Unclosed tag at "+s.pos);L=[F,J,G,s.pos];r.push(L);if("#"===F||"^"===F)t.push(L);else if("/"===F){if(0===t.length)throw Error('Unopened section "'+J+'" at '+G);F=t.pop();if(F[1]!==J)throw Error('Unclosed section "'+F[1]+'" at '+G);}else if("name"===F||"{"===F||"&"===F)D=!0;else if("="===F){c=J.split(n);if(2!==c.length)throw Error("Invalid tags at "+G+": "+c.join(", "));b=g(c)}}if(F=
t.pop())throw Error('Unclosed section "'+F[1]+'" at '+s.pos);for(var b=r,s=[],K,r=0,v=b.length;r<v;++r)if(t=b[r])"text"===t[0]&&K&&"text"===K[0]?(K[1]+=t[1],K[3]=t[3]):(K=t,s.push(t));K=s;s=b=[];t=[];v=0;for(C=K.length;v<C;++v)switch(r=K[v],r[0]){case "#":case "^":t.push(r);s.push(r);s=r[4]=[];break;case "/":t.pop()[5]=r[2];s=0<t.length?t[t.length-1][4]:b;break;default:s.push(r)}return b};j.escape=function(a){return(""+a).replace(/[&<>"'\/]/g,function(a){return r[a]})};var v=new a;j.clearCache=function(){return v.clearCache()};
j.compile=function(a,c){return v.compile(a,c)};j.compilePartial=function(a,c,g){return v.compilePartial(a,c,g)};j.compileTokens=function(a,c){return v.compileTokens(a,c)};j.render=function(a,c,g){return v.render(a,c,g)};j.to_html=function(a,c,g,b){a=j.render(a,c,g);if("function"===typeof b)b(a);else return a}});
var gx=function(j){var f=/^(?:gx\.O\.)(.+)$/,d=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,b=function(){return!1};return{$:j.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},
NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:b,trueFn:function(){return!0},define:function(a,c,g){for(var b=0,n=window||this,a=a.split("."),d=a.length,b=0;b<d-1;b++)"undefined"==typeof n[a[b]]&&(n[a[b]]={}),n=n[a[b]];n[a[d-1]]=g;c||(n[a[d-1]].prototype=new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout},createParentObj:function(a){var c;gx.spa.started||(a instanceof gx.GxObject||(c=new a),c&&this.setParentObj(c));
return c},setExecutableComponent:function(a){gx.fx.obs.addObserver("gx.onready",this,function(){null==gx.pO&&gx.setParentObj(gx.createComponent(a,""))},{single:!0})},setMasterPage:function(a){null!=gx.pO&&(gx.pO.MasterPage=a)},createMasterPage:function(a){var c;gx.spa.started||(a instanceof gx.GxObject||(c=new a),c&&this.setMasterPage(c));return c},addComponent:function(a,c){null!=gx.pO&&gx.pO.setWebComponent(a,c)},createComponent:function(a,c,g){var b=null,n,a=gx.lang.getType(a);null!=a&&(a.prototype=
new gx.GxObject,n=gx.csv.cmpCtx,gx.csv.cmpCtx=c,b=new a(c),g&&b.setContainer(g),gx.csv.cmpCtx=n,b.serviceUrl=gx.fn.getControlValue(b.CmpContext+"_CMPPGM"));return b},getObj:function(a,c){return""==a?!0==c?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(){var a,c;1==arguments.length&&"object"==typeof arguments[0]?(a=arguments[0].CmpContext,gx.O=arguments[0]):(a=arguments[0],c=arguments[1],gx.O=this.getObj(a,c)||gx.pO);gx.csv.cmpCtx=a;return gx.O},setVar:function(a,c){gx.O.setVariable(a,
c)},getVar:function(a){return gx.O.getVariable(a)},prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var c=f,c=c.exec(a);null!=c&&c[1]?a=c[1]:(c=d,c=c.exec(a),null!=c&&c[1]&&(a=c[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=
a},setDecimalPoint:function(a){gx.decimalPoint=a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var c=gx.staticDirectory.length,a="/"!=gx.staticDirectory.charAt(0),c="/"!=gx.staticDirectory.charAt(c-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(c?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");
if(a&&a!=this.theme&&(this.theme=a,(a=gx.getThemeElement())&&0>a.href.search(this.theme+".css")))a.href=a.href.replace(/[^/]*.css/,this.theme+".css")},setTheme:function(a){var c=gx.util.browser,g=c.isIE(),c=c.ieVersion(),b=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{gx.HTML5&&b.html5(a);if(void 0===a){g&&(j(document.documentElement).addClass("ie"),j(document.documentElement).addClass("ie"+c),gx.runtimeTemplates&&!Modernizr.flexbox&&j(document.documentElement).addClass("gx-align-fallback"));
if(g&&10==c){var n=document.createElement("style");n.innerHTML="input::-ms-clear {display: none;}";document.body.appendChild(n)}b.popupMinWidth()}b.fixTableResets(a)}catch(d){gx.dbg.logEx(d,"gxapi.js","setTheme")}},SetOld:function(a,c,g){var b=c,a=gx.fn.controlGridId(a);0<a&&(b=c+"_"+gx.fn.currentGridRow(a));gx.fn.setHidden(b,gx.getVar(g))},Old:function(a,c){try{var g=c,b=gx.fn.controlGridId(a);0<b&&(g=c+"_"+gx.fn.currentGridRow(b));var n=gx.fn.getHidden(g);"undefined"==typeof n&&""!=gx.O.CmpContext&&
(n=gx.fn.getHidden(gx.O.CmpContext+g));return n}catch(d){gx.dbg.logEx(d,"gxapi.js","Old")}return""},OldInteger:function(a,c){var g=parseInt(gx.Old(a,c),10);return isNaN(g)?0:g},OldDecimal:function(a,c){var g=gx.num.parseFloat(gx.Old(a,c),gx.thousandSeparator,gx.decimalPoint);return isNaN(g)?0:g},OldDate:function(a,c){return(new gx.date.gxdate(gx.Old(a,c),"Y4MD")).getStringWithFmt(gx.dateFormat)},OldDateTime:function(a,c){var g=new gx.date.gxdate(gx.Old(a,c),"Y4MD");return g.getStringWithFmt(gx.dateFormat)+
" "+g.getTimeString(!0,!0)},typedOld:function(a,c,g){switch(g){case "int":return this.OldInteger(a,c);case "decimal":return this.OldDecimal(a,c,!0);case "date":return this.OldDate(a,c);case "dtime":return this.OldDateTime(a,c);default:return this.Old(a,c)}},isInputEnabled:function(a){return a&&gx.evt.lastEvt==a?!0:!(gx.evt.processing&&!gx.csv.validating||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",
phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:b,isJava:function(){return!this.net}},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,c){c=c||document;return c.getElementById(a)},byName:function(a){return a?document.getElementsByName(a):[]},byTag:function(a,c){c=c||document;return c.getElementsByTagName(a)},byClass:function(a,c,g){return j((c||
"")+"."+a,g).toArray()},bySelector:function(a){return j(a).toArray()},el:function(a){if(a){if("object"==typeof a&&a.tagName)return a;var c=this.byId(a);if(null!=c)return c;c=this.byId("span_"+a);if(null!=c)return c;c=this.byName(a);return null!=c&&0<c.length?c[0]:null}return null},hasAttribute:function(a,c){return a.hasAttribute?a.hasAttribute(c):void 0!==a[c]},hasClass:function(a,c){var g=gx.dom.el(a);if(g)return c&&-1!=(" "+g.className+" ").indexOf(" "+c+" ")},addPrefixClass:function(a,c){if(a){var g=
j(a);a.className&&!g.attr("data-gx-unprefixed-class")&&(g.attr("data-gx-unprefixed-class",a.className),g=a.className.split(" "),g.splice(0,0,""),a.className+=g.join(" "+c))}},removePrefixClass:function(a,c){if(a){var g=j(a);if(0<=a.className.search(RegExp("(^|\\s)"+c))){var b=g.attr("data-gx-unprefixed-class");g.removeAttr("data-gx-unprefixed-class");a.className=b||a.className.substring(c.length)}}},addClass:function(a,c){var g=gx.dom.el(a);g&&(c&&!this.hasClass(a,c))&&(g.className=g.className+(g.className?
" ":"")+c)},classReCache:{},removeClass:function(a,c){var g=gx.dom.el(a);if(g&&this.hasClass(a,c)){var b=this.classReCache[c];b||(b=RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)","g"),this.classReCache[c]=b);g.className=g.className.replace(b," ")}},hasTransition:function(a){if(a&&Modernizr.csstransitions){var c=gx.util.browser,g="transitionDuration";c.isIE()&&(g="msTransitionDuration");c.isWebkit()?g="webkitTransitionDuration":c.isFirefox()?g="MozTransitionDuration":c.isOpera()&&(g="OTransitionDuration");a=parseFloat(gx.dom.getComputedStyle(a)[g],
10);return 0!==a&&!isNaN(a)}return!1},hasAnimation:function(a){if(a&&Modernizr.csstransitions){var c=gx.util.browser,g="animationName";c.isIE()&&(g="msAnimationName");c.isWebkit()?g="webkitAnimationName":c.isFirefox()?g="MozAnimationName":c.isOpera()&&(g="OAnimationName");return(a=gx.dom.getComputedStyle(a)[g])&&"none"!=a}return!1},isMultimediaElement:function(a){return"SPAN"==a.tagName&&(gx.dom.hasClass(a,"gx-video-placeholder")||gx.dom.hasClass(a,"gx-audio-placeholder"))},purgeElement:function(a,
c){var g=c||a.attributes,b,n,d;if(g){n=g.length;for(b=0;b<n;b+=1)d=g[b].name||g[b],"function"===typeof a[d]&&(a[d]=null)}},purge:function(a,c){c||this.purgeElement(a);var g=a.childNodes;if(g)for(var b=0,n=g.length;b<n;b++)gx.dom.purge(g[b],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()},form:function(){null==this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){if(!document.all)for(var a=
this.form().elements,c=a.length,g=0;g<c;g++)a[g].gxIndex=g},setAttribute:function(a,c,g){var b=function(){try{var b=gx.dom.byName(a);if(null!=b&&0<b.length)for(var p=b.length,d=0;d<p;d++)b[d].setAttribute(c,g);else d=gx.dom.byId(a),null!=d&&d.setAttribute(c,g)}catch(f){gx.dbg.logEx(f,"gxapi.js","setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,b,{single:!0}):b.apply(this)},createInput:function(a,c){var g=document.createElement("input");g.type=c;g.id=a;g.name=
a;gx.dom.form().appendChild(g);return g},hasSelectedFile:function(){var a=j('input[type="file"]'),c=a.length;if(!c)return!1;for(var g=0;g<c;g++)if(!gx.lang.emptyObject(a[g].value))return!0;return!1},hasSubmitControl:function(){var a=this.byTag("input"),c=a.length;if(!c)return!1;for(var g=0;g<c;g++){var b=a[g].getAttribute("type");if("submit"==b||"image"==b)return!0}return!1},scripts:function(){var a=document.scripts;a||(a=document.getElementsByTagName("script"));if("undefined"!=typeof a){for(var c=
[],g=a.length,b=0;b<g;b++){var d=a[b].attributes.src;d&&d.value&&(d=d.value,"//:"!=d&&c.push(d))}return c}return[]},styles:function(){var a=document.styleSheets;if("undefined"!=typeof a){for(var c=[],g=a.length,b=0;b<g;b++){var d=a[b].href;gx.lang.emptyObject(d)||c.push(d)}return c}return[]},getComputedStyle:function(a){try{return"#document"==a.nodeName?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(a):"undefined"!=typeof a.currentStyle?a.currentStyle:a.style}catch(c){return gx.dbg.logEx(c,
"gxapi.js","getComputedStyle"),null}},getStyle:function(a,c){var g="";try{var g="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[c]:"undefined"!=typeof a.currentStyle?a.currentStyle[c]:a.style[c],b=parseInt(g);isNaN(b)||(g=b)}catch(d){gx.dbg.logEx(d,"gxapi.js","getStyle")}return g},CSS_URL_REGEXP:/url\(["\']?(?!(?:https?:|\/))([^"\)]+)["\']?\)/ig,CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(a,c){var g,b=a.href?a.href.replace(this.CSS_BASE_URL_REGEXP,
"$1"):document.location.href,d;this.cssRules||(this.cssRules=[]);try{if(d=a.cssRules||a.rules)for(var f=0,j=d.length;f<j;f++)g=d[f].cssText,c&&(g=g.replace(this.CSS_URL_REGEXP,'url("'+b+'$1")')),this.cssRules.push(g)}catch(m){}},getCssRules:function(a,c){var g=document.styleSheets;if(null===this.cssRules||a){this.cssRules=[];for(var b=0,d=g.length;b<d;b++)try{g[b].disabled||this.cacheStyleSheet(g[b],c)}catch(f){}}return this.cssRules},setStyleElement:function(a,c,g){try{a.innerHTML=(g?a.innerHTML:
"")+c}catch(b){a.styleSheet.cssText=(g?a.styleSheet.cssText:"")+c}},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},isRadio:function(a){return a&&"INPUT"==a.tagName&&"radio"==a.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0},isEditControl:function(a){return a&&"INPUT"==a.tagName?this.editControls[a.type]||!1:!1},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||
"datetime-local"==a.type},isButtonLike:function(a){return this.isButton(a)?!0:a&&"INPUT"===a.nodeName?"file"===a.type||("image"===a.type||"checkbox"===a.type)&&"function"==typeof a.onclick:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document}catch(c){}return null},forEachChild:function(a,c,g){if(a&&a.childNodes&&"function"==typeof g)for(var b=a.childNodes.length,d=0;d<b&&!1!==g.call(c,a.childNodes[d]);d++);},isTextWithLink:function(a){return null!=
a&&"A"==a.tagName&&(a.childNodes&&0<a.childNodes.length)&&this.innerChildIsText(a.firstChild)?!0:!1},isChildNode:function(a,c){a.frameElement&&(a=a.frameElement);if(a==c)return!0;for(;a.parentNode;){if(a==c||a.parentNode==c)return!0;a=a.parentNode}return!1},findParentByTagName:function(a,c,g){a=a.parentNode;c=c.toUpperCase();for(i=0;a&&!(g&&i==g);){i++;if(a.tagName==c)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},
allChildrenAreText:function(a){for(a=a.firstChild;a;){if("#text"!=a.nodeName)return!1;a=a.nextSibling}return!0},position:function(a){a=j(a).offset();return{x:Math.floor(a.left),y:Math.floor(a.top)}},dimensions:function(a){a=j(a);return{w:a.outerWidth(),h:a.outerHeight()}},windowDimensions:function(a){var c=a.documentElement,g=a.body;if(c&&c.scrollHeight){var a=Math.max(c.scrollHeight,g.scrollHeight),b=Math.max(c.scrollWidth,g.scrollWidth),d=Math.max(c.clientHeight,g.clientHeight),c=Math.max(c.clientWidth,
g.clientWidth);return{scrollWidth:b,scrollHeight:a,clientHeight:d,clientWidth:c}}return{scrollWidth:g.scrollWidth,scrollHeight:g.scrollHeight,clientHeight:g.clientHeight,clientWidth:g.clientWidth}},documentScroll:function(a){a=a||document;return{scrollTop:a.documentElement.scrollTop||a.body.scrollTop,scrollLeft:a.documentElement.scrollLeft||a.body.scrollLeft}},documentScrollable:function(a){var a=a||document,c={x:!1,y:!1},a=gx.dom.windowDimensions(a);a.scrollHeight>a.clientHeight&&(c.x=!0);a.scrollWidth>
a.clientWidth&&(c.x=!0);return c},autofitIFrame:function(a){var a=gx.evt.source(window.event||a),c=window.frames[a.name].document;if(c&&!(""!=a.width||""!=a.height)){var g=gx.dom.windowDimensions(c),c=g.scrollWidth?g.scrollWidth+10:null,g=g.scrollHeight?g.scrollHeight+10:null;c&&g&&(a.style.width=c+"px",a.style.height=g+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&a&&a.childNodes){for(var c=null,g=a.childNodes.length,b=0;b<g;b++){var d=a.childNodes[b];if("TABLE"==d.nodeName){c=d;break}}if(null!=
c&&(-1!=c.style.width.indexOf("%")&&(a.style.width=gx.dom.addUnits(c.style.width)),-1!=c.style.height.indexOf("%")))a.style.height=gx.dom.addUnits(c.style.height)}},redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,a.outerHTML)},100)},setCaretPosition:function(a,c){if(null!=a)if(a.createTextRange){var g=a.createTextRange();g.move("character",c);g.select()}else a.selectionStart?(a.focus(),
a.setSelectionRange(c,c)):a.focus()},replaceAtCaretPosition:function(a,c){var g=a.selectionStart,b=a.selectionEnd;document.selection?(g=document.selection.createRange().getBookmark(),a.selection=a.createTextRange(),a.selection.moveToBookmark(g),a.selectLeft=a.createTextRange(),a.selectLeft.collapse(!0),a.selectLeft.setEndPoint("EndToStart",a.selection),g=a.selectLeft.text.length+1,b=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)):(g=a.selectionStart,b=a.selectionEnd);
a.setRangeText?a.setRangeText(c,g,b,"end"):(a.value=a.value.substr(0,g)+c+a.value.substr(g,a.value.length),gx.dom.setCaretPosition(a,g+c.length))},spanValue:function(a){var c=a.nodeValue;gx.lang.emptyObject(c)&&(c=a.innerText||a.textContent);gx.lang.emptyObject(c)&&(c="");return c},removeControlSafe:function(a){this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV"),this._avoidLeaksDiv.style.display="none",document.body.appendChild(this._avoidLeaksDiv));this._avoidLeaksDiv.appendChild(a);
gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv);this._avoidLeaksDiv.innerHTML=""},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var c=document.createRange();a&&(c.selectNode(a),c.deleteContents())}},comboBoxToObj:function(a,c){try{var g={s:"",v:[]};if(!a)return g;if("SELECT"==a.tagName){g.s=a.value;for(var b=a.options.length,d=0;d<b;d++){var f=j(a.options[d]);g.v.push([f.val(),f.text()])}}else"SPAN"==a.tagName&&(g.v.push([c,c]),g.s=c);return g}catch(o){gx.dbg.logEx(o,
"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s)$/i,addUnits:function(a,c){return""===a||"auto"==a?a:void 0===a?"":"number"==typeof a||!this.unitPattern.test(a)?a+(c||"px"):a},getActiveElement:function(){var a=null;try{a=document.activeElement}catch(c){}return a},write:function(a,c){c=c||document;c.write(a)},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASKED_CLASS:"gx-masked",mask:function(a){a=this.el(a);if(!this.hasClass(a,
this.MASK_RELATIVE_CLASS)){var c,g=gx.util.browser,b=g.ieVersion(),d=6==b||g.isIE&&g.isCompatMode(),f=!!a.style.setExpression;(!j(a).is("body")||"static"!=this.getComputedStyle(a).position)&&this.addClass(a,this.MASK_RELATIVE_CLASS);c=document.createElement("div");c.className=this.MASK_CLASS;a.appendChild(c);this.addClass(a,this.MASKED_CLASS);if(d&&f)try{c.style.setExpression("height","this.parentNode."+(a==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(o){}else if(a=this.getComputedStyle(a).height,
g.isIE&&(7!=g.ieVersion||g.isCompatMode())&&"auto"==a)c.style.height=a;if(g.isIE()&&(7>=b||g.isCompatMode()))j(c),(g=this.getComputedStyle(c).opacity)&&j(c).css("opacity",g);return c}},unmask:function(a){for(var a=this.el(a),c,g=0,b=a.childNodes.length;g<b;g++)if("DIV"==a.childNodes[g].tagName&&this.hasClass(a.childNodes[g],this.MASK_CLASS)){c=a.childNodes[g];break}c&&!c.removed?(c.removed=!0,c.style.clearExpression&&(c.style.clearExpression("width"),c.style.clearExpression("height")),this.removeClass(a,
this.MASKED_CLASS),g=gx.dom.hasTransition(c)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(c)?gx.dom.ANIMATION_END_EVENT:!1,b=function(){a.removeChild(c);gx.dom.removeClass(a,this.MASK_RELATIVE_CLASS)}.closure(this),g?gx.evt.attach(c,g,b,!1,{single:!0,useCapture:!0,timeout:300}):b(),this.addClass(c,this.UNMASK_CLASS)):(this.removeClass(a,this.MASKED_CLASS),this.removeClass(a,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(a,c,g){var g=g||{},b=g.enteringClass||"entering",d=g.leavingClass||"leaving",
f=g.enterDurationClass||"enter-fx-duration",j=g.leaveDurationClass||"leave-fx-duration",m=g.transitioningClass||"transitioning",k=g.transitionTimeout||1500,q=function(a){return(gx.dom.hasAnimation(a)||gx.dom.hasTransition(a))&&!gx.dom.hasClass(a.parentNode,m)},t=function(a){return gx.dom.hasAnimation(a)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(a)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==a.tagName&&(gx.dom.addClass(a,a.className+"-fx"),a.style.position="static");"BODY"==c.tagName&&gx.dom.addClass(c,
c.className+"-fx");var s=a.parentNode,r=q(a),v=q(c);useParallelFx="BODY"!=a.tagName;if(r||v){var q=document.createElement("iframe"),u=document.createElement("div"),x,y,B=this.getComputedStyle(a),A=B.width,B=B.height,z,w,C=t(a),D=t(c),G,F,J,L,O,K=0,t=0;gx.dom.addClass(s,m);if("BODY"!=a.tagName&&"BODY"!=c.tagName)if(r){q.setAttribute("scrolling","no");q.setAttribute("frameborder","0");q.style.width=gx.dom.addUnits(window.innerWidth);q.style.height=gx.dom.addUnits(window.innerHeight);q.style.display=
"none";u.appendChild(q);u.style.width=A;u.style.height=B;u.style.overflow="hidden";gx.spa.dettachContent(a);a.insertBefore(u,a.firstChild);u=q.contentDocument;try{u.open(),u.write(this.getDocTypeDeclaration(document)),u.write("<html>"),u.write("<head></head>"),u.write("<body><div></div></body>"),u.write("</html>"),u.close()}catch(H){gx.dbg.logEx(H,"gxapi.js","replaceWithFx"),x=u.createElement("div"),u.body.appendChild(x)}u.body.style.margin="0";u.body.className=gx.dom.form().className;u.head.appendChild(document.createElement("style"));
x=u.styleSheets[0];y=gx.dom.getCssRules(!0,!0);z=0;for(w=y.length;z<w;z++)try{x.insertRule(y[z],t),t++}catch(E){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+y[z])}u.body.firstChild.style.width=A;for(u.body.firstChild.style.height=B;a.childNodes[1];)u.body.firstChild.appendChild(a.childNodes[1]);q.style.display="block"}else v&&(a.style.display="none");gx.dom.addClass(c,b);gx.dom.addClass(c,f);gx.dom.addClass(a,j);!1!==g.domAdd&&s.appendChild(c);j=function(){J=function(){if(K===2){gx.dom.removeClass(s,
m);if(useParallelFx){g.transitionEndCallback&&(c=g.transitionEndCallback(a,c));g.domRemove!==false&&s.removeChild(a)}gx.dom.removeClass(c,f)}else if(!useParallelFx){g.transitionEndCallback&&(c=g.transitionEndCallback(a,c));gx.dom.removeClass(c,b);v&&(O=setTimeout(F,k))}};if(r){G=function(){clearTimeout(L);K++;g.leavingTransCallback&&g.leavingTransCallback(a,c);J()};gx.evt.attach(a,C,G,false,{single:true,useCapture:true})}else{K++;J()}if(v){F=function(){if(K>=2)gx.evt.detach(c,D,F);else{clearTimeout(O);
K++;g.enteringTransCallback&&g.enteringTransCallback(a,c);J()}};gx.evt.attach(c,D,F,false,{single:true,useCapture:true})}else{K++;J()}setTimeout(function(){gx.dom.addClass(a,d);if(useParallelFx){gx.dom.removeClass(c,b);v&&(O=setTimeout(F,k))}r&&(L=setTimeout(G,k))},100)};g.beforeTransitionStart?!0!==g.beforeTransitionStart(j)&&j():j()}else!1!==g.domRemove&&s.removeChild(a),!1!==g.domAdd&&(a.parentNode==s?s.replaceChild(c,a):s.appendChild(c)),g.beforeTransitionStart&&g.beforeTransitionStart(),g.leavingTransCallback&&
g.leavingTransCallback(a,c),g.enteringTransCallback&&g.enteringTransCallback(a,c),g.transitionEndCallback&&(c=g.transitionEndCallback(a,c))},getDocTypeDeclaration:function(a){a=a||document;a=a.doctype;parts=["!DOCTYPE"];if(!a)return"";parts.push(a.name||"html");a.publicId&&(parts.push("PUBLIC"),parts.push('"'+a.publicId+'"'));a.systemId&&parts.push('"'+a.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(a){a=this.el(a);return a.createShadowRoot?a.createShadowRoot():a.webkitCreateShadowRoot?
a.webkitCreateShadowRoot():!1},fixes:function(){var a=RegExp("gx-tab-padding-fix-\\d+","ig"),c=RegExp("gx-tab-spacing-fix-\\d+","ig"),g,b={},d={},f,o,m,k={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{getFixesStyleElement:function(){var a=j("#gx-dom-fixes")[0];a||(a=document.createElement("style"),
a.id="gx-dom-fixes",j("head")[0].insertBefore(a,gx.getThemeElement()));return a},html5:function(a){var c=gx.util.browser,g=c.isIE(),b=[],p;j("TABLE",a||document.body).each(function(){var a=j(this);a.attr({align:a.data("align")})});if(!a){if(!m){for(p in k)gx.lang.apply(k[p],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},
{el:"fieldset",last:!0}]});m=Mustache.compile(".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}")}for(p in k)b.push(m(k[p]));p=this.getFixesStyleElement();gx.dom.setStyleElement(p,b.join(""),!0)}if(g||c.isOpera())j("td[data-align]",
a||document.body).each(function(){var a=j(this),c=a.attr("data-align"),g=k[c].className,b=a.attr("class")||"";b&&(b=" "+b);a.attr("align",c);a.hasClass(g)||a.attr("class",g+b);a.children("div."+k[c].contHolderClassName).children("div."+k[c].contHolderBodyClassName).addClass(g);a.children("div."+k[c].wcClassName).children("div."+k[c].wcBodyClassName).addClass(g)})},scrollbarWidth:function(){if(void 0!==g)return g;var a,c,b=j("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");
c=b.children()[0];j("body").append(b);a=c.offsetWidth;b.css("overflow","scroll");c=c.offsetWidth;a===c&&(c=b[0].clientWidth);b.remove();return g=a-c},popupMinWidth:function(){var a=gx.popup.getPopup();if(a){if(gx.runtimeTemplates){var c=this.getPopupMinWidth();j(document.documentElement).css("width",gx.dom.addUnits(c-this.scrollbarWidth()));j(document.documentElement).addClass("gx-popup-document")}(a.autoresize||void 0===a.autoresize)&&j(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var a=
gx.popup.getPopup(),c=g;if(a&&(c=a.width,a.autoresize||void 0===a.autoresize)){var g=600,a=j(a.window).width(),c=800;1200<=a&&(c=900);768<=a&&992>a&&(c=g);768>a&&(c=a-20)}return c},fixTableResets:function(g){var m=this.getFixesStyleElement();f||(f=Mustache.compile("{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}"));o||(o=Mustache.compile("{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}"));j("table[data-cellpadding], table[data-cellspacing]",g||document.body).each(function(){var g=
this.getAttribute("data-cellpadding");void 0!==g&&(b[g]=g,j("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className="gx-tab-padding-fix-"+g+" "+this.className.replace(a,"")}));var f=this.getAttribute("data-cellspacing");void 0!==f&&(d[f]=f,this.className="gx-tab-spacing-fix-"+f+" "+this.className.replace(c,""))});var g=gx.lang.objToArray(b),k=gx.lang.objToArray(d);gx.dom.setStyleElement(m,f(g)+o(k),!0)},fixChromeFocus:function(){gx.fx.obs.addObserver("gx.onbeforefocus",
this,function(a){a=gx.dom.el(a);gx.util.browser.isChrome()&&a.scrollIntoViewIfNeeded&&a.scrollIntoViewIfNeeded()})},createLegacyNotification:function(){j("div#gx_ajax_notification").length||j('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_init:function(){Function.prototype.closure=function(a,c,g){var b=gx.util.browser;if(b.isIE()&&8>b.ieVersion()){window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]);var d=this,f=a.__objId;f||(__objs[f=a.__objId=
__objs.length]=a);var j=d.__funId;j||(__funs[j=d.__funId=__funs.length]=d);c||(c=[]);var m=c.__argsId;m||(__args[m=c.__argsId=__args.length]=c);c=d=a=null;return function(){if(__funs){var a=__args[m];if(g===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(__args[m])}a.length==0&&arguments.length>0&&(a=arguments);a=__funs[j].apply(__objs[f],a);if(__objs)try{delete __objs[f].__objId}catch(c){__objs[f].__objId=null}__funs&&delete __funs[j].__funId;__args&&delete __args[m].__argsId;return a}}}d=
this;return function(){var b=c||arguments;!0===g&&(b=Array.prototype.slice.call(arguments,0),b=b.concat(c));return d.apply(a||window,b)}};gx.evt.on_ready(this,function(){var a,c,g=gx.util.browser;if(g.isWebkit()){var b=[];if(document.querySelectorAll)b=document.querySelectorAll("input[type='hidden']");else{var d=gx.dom.byTag("input");a=0;for(c=d.length;a<c;a++)"hidden"==d[a].getAttribute("type")&&b.push(d[a])}a=0;for(c=b.length;a<c;a++)b[a].setAttribute("autocomplete","off")}j('input[type="file"]').on("click",
function(){gx.fx.obs.notify("gx.validation")});if(g.isChrome()){g=document.querySelectorAll("select");a=0;for(c=g.length;a<c;a++)if(!g[a].value&&(b=g[a].querySelectorAll("option[selected]"))&&b.length)g[a].value=b[0].value}j('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":
gx.util.browser.isOpera()?"oAnimationEnd":"animationend"},_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv.parentNode.removeChild(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)}},util:{contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",
gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},isKnownContentType:function(a){for(var c in this.contentTypes)if(this.contentTypes[c]==
a)return!0;return!1},getContentTypeFromExt:function(a){var c=a.lastIndexOf(".");-1!=c&&(a=a.substring(c+1));return a?this.getContentType(a):""},getContentType:function(a){if(gx.lang.emptyObject(a))return"text/html";a=a.toLowerCase();a=gx.text.trim(a);if(this.isKnownContentType(a))return a;var c=a.lastIndexOf(".");-1!=c&&(a=a.substring(c+1));a=this.contentTypes[a];return gx.lang.emptyObject(a)?"text/html":a},getFileName:function(a){var c=a.lastIndexOf("/"),g=a.lastIndexOf("\\"),c=c>g?c:g,g=a.lastIndexOf(".");
if(!a)return a;if(0>g||c>g)g=a.length;return a.substring(c+1,g)},getFileType:function(a){var c=a.lastIndexOf("/"),g=a.lastIndexOf("\\"),b=a.lastIndexOf(".");return 0>b||b<c||b<g?"":a.substring(b+1)},getWindowInfo:function(){var a="",c=!0,g=!1;try{if(g=window.location!=window.parent.location?!0:!1)try{c=window.frameElement.id||window.top.document.body,a=window.name}catch(b){c=!1}}catch(d){}return{insideIframe:g,canAccessFrame:c,frameId:a}},browser:function(){var a=navigator.userAgent;return{w3c:!0,
ns4:!1,ie5:!0,ns6:!1,ie:-1!=a.indexOf("MSIE")||-1!=a.indexOf("Trident"),edge:-1!=a.indexOf("Edge"),ff:-1!=a.indexOf("Firefox"),winCE:-1!=a.indexOf("Windows CE"),iphone:-1!=a.indexOf("iPhone"),ipad:-1!=a.indexOf("iPad"),blackBerry:-1!=a.indexOf("BlackBerry"),operaMini:-1!=a.indexOf("Opera Mini"),opera:-1!=a.indexOf("Opera"),chrome:-1!=a.indexOf("Chrome"),webkit:-1!=a.search(/webkit/ig),isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isFirefox:function(){return this.ff},
isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()},isCompatMode:function(){return"BackCompat"==document.compatMode},ieVersion:function(){var c;
if(this.ie)try{var g=a.indexOf("MSIE");if(0<=g){var b=a.indexOf(";",g),d=a.substring(g+5,b);return parseFloat(d,10)}c=a.match(/; rv.([0-9]+)/);if(1<c.length)return parseFloat(c[1],10)}catch(f){gx.dbg.logEx(f,"gxapi.js","ieVersion")}else if(this.edge&&(c=a.match(/ Edge\/([0-9]+)\./),1<c.length))return parseFloat(c[1],10);return-1},chromeVersion:function(){if(this.isChrome()){var c=a.match(/Chrome\/([0-9]+)/);if(1<c.length)return parseFloat(c[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&
("undefined"!==typeof Range&&!Range.prototype.createContextualFragment)&&(Range.prototype.createContextualFragment=function(a){var g=document.createDocumentFragment(),b=document.createElement("div");g.appendChild(b);b.outerHTML=a;return g})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ns4=document.layers?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1,this.ns6=document.getElementById&&!document.all?!0:!1);this.setupIE()}}}(),addOnce:function(a,
c,g){void 0==a[g]&&(a[g]=c)},inArray:function(a,c){if(null==a||!(c instanceof Array))return!1;if("function"==typeof c.indexOf)return-1!=c.indexOf(a);for(var g=c.length,b=0;b<g;b++)if(c[b]==a)return!0;return!1},lastArray:function(a){return 0<a.length?a[a.length-1]:null},noParmsUrl:function(a){var c=a.indexOf("?");-1!=c&&(a=a.substring(0,c));return a},resolveUrl:function(a){return!a?a:gx.ajax.isabsoluteurl(a)?a:gx.ajax.isRelativeToHost(a)?0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+
a,!1):a:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1)},resourceUrl:function(){var a;return function(c,g){a||(a=RegExp(gx.basePath+"(/|$)","i"));if("undefined"==typeof c)return"";if(-1!=c.indexOf("://")||"."==c.charAt(0))return c;var b="/"!=gx.basePath.charAt(gx.basePath.length-1),d=""==gx.basePath?0:c.search(a);if(0==d&&!g)return("/"==c.charAt(0)?"":"/")+c;if(-1!=d||g){var f="",f=-1!=d&&0<gx.basePath.length?gx.text.replaceAll(c.substring(d+gx.basePath.length),"\\","/"):c;if("/"==c.charAt(0))return location.protocol+
"//"+location.host+c;d=0<gx.basePath.length&&"/"!=gx.basePath.charAt(0);b=b&&"/"!=f.charAt(0);return location.protocol+"//"+location.host+(d?"/":"")+gx.basePath+(b?"/":"")+f}return c}}(),sameAppUrl:function(a){a=new this.Url(a);return a.isRelative()?!0:a.isSameApp(location.href)},removeBaseUrl:function(a){var c,g="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1);c="/"==gx.staticDirectory.charAt(0)?0==gx.basePath.length?gx.staticDirectory.substring(1):gx.staticDirectory:"/"+gx.staticDirectory;
c=RegExp("(?:/)?(?:"+gx.basePath+c+(g?"/":"")+")?((?:[\\S]*))").exec(a);null!=c&&c[1]&&(a=c[1]);return a},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var a=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,c=/^(([^@]+)@)?([^\:]+)(:(.+))?$/;return function(g){this.url=g;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=
function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(a){a=new gx.util.Url(a);return this.protocol==a.protocol&&this.host==a.host};(function(g,b){var d=a,d=d.exec(b),f=!gx.lang.emptyObject(d);if(f&&(g.protocol=d[2]?d[2]:"",f=d[4]?d[4]:"",g.path=d[5]?d[5]:"",g.query=d[7]?d[7]:"",g.hash=d[9]?d[9]:"",d=c,d=d.exec(f),f=!gx.lang.emptyObject(d)))g.user=d[2]?d[2]:"",g.host=d[3]?d[3]:"",g.port=d[5]?d[5]:""})(this,g)}}(),regExp:{isMatch:function(a,c){return null!==RegExp(c).exec(a)},replace:function(a,
c,g){return a.replace(c,g)},split:function(a,c){return a.split(c)},matches:function(a,c){var g=RegExp(c).exec(a);return null!==g?g:[]}},autoRefresh:{arTimer:null,getProps:function(){var a=gx.fn.getHidden("_GxRefreshTimeout");null!=a&&(a=gx.json.evalJSON(a),a.Time=parseInt(a.Time));return a},install:function(){var a=this.getProps();null!=a&&(this.create(),"focus"==a.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var a=this.getProps();null!=a&&(this.arTimer=
setTimeout(function(){gx.http.reload()},1E3*a.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(a){var c="";if(-1!=a.indexOf("&"))for(var g=a.length,b=0;b<g-1;b++)if("&"==a[b]&&"&"!=a[b+1]){c+=a[b+1];break}return c},accessKeyCaption:function(a){var c="";if(-1==a.indexOf("&"))return a;for(var g=a.length,b=0;b<g-1;b++)if("&"==a[b]&&"&"!=a[b+1]){c+=a.substring(b+1);break}else c+=a[b];
return c},invalidFunc:function(a){throw"gxInvalidFunc: "+a;},urlValue:function(a){var c=a;"string"!=typeof c&&(c=gx.fn.getControlValueInt(a));return encodeURIComponent(c)},help:function(a){open(a,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}},lang:{inherits:function(a,c,g){var b=a.prototype;a.prototype=new c;for(var d in b)"undefined"==typeof a.prototype[d]&&(a.prototype[d]=b[d]);"undefined"==
typeof a.prototype.base&&(a.prototype.base=c);!0===g&&(a.prototype.constructor=function(){c.prototype.constructor.apply(this,arguments);b.constructor.apply(this,arguments)})},apply:function(a,c){if(a&&c&&"object"===typeof c)for(var g in c)a[g]=c[g];return a},instanceOf:function(a,c){if(null==a||null==c)return!1;if(a instanceof c||c==String&&"string"==typeof a||c==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||c==Array&&"array"==typeof a||c==Function&&
"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(var g=a.base;"undefined"!=typeof g;){if(g==c)return!0;g=g.base}return!1},clone:function(a){var c={},g;for(g in a)c[g]=a[g];return c},isDateType:function(a){return"date"==a||"datetime"==a},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==a||"bool"==a},isCharacterType:function(a){return"char"==a||"svchar"==a||"bits"==a},isArray:function(a){return a&&
"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return!0==a||!1==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&(""==a||"false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},arrayToSource:function(a){if(null!=a.toSource)return a.toSource();for(var c="[",g=a.length,b=g-
1,d=0;d<g;d++)c+=this.objectToSource(a[d]),d<b&&(c+=",");return c+"]"},objectToSource:function(a){if(this.isArray(a))return this.arrayToSource(a);if("object"==typeof a){var c="{",g="",b;for(b in a){var d=b;""==d?d="''":"string"==typeof d&&(d="'"+d+"'");c+=g;c="object"==typeof a[b]?c+(d+":"+this.objectToSource(a[b])):"string"==typeof a[b]?c+(d+":'"+this.encodeValue(a[b])+"'"):c+(d+":"+a[b]);g=","}return c+"}"}return"'"+this.encodeValue(a.toString())+"'"},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var c in a)if(a.hasOwnProperty(c))return!1;
return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},supEval:function(a,c){var g=null,g=c instanceof String||"string"==typeof c?a[c]:c;return function(){return g.apply(a,arguments)}},getType:function(a){var c=null;try{for(var g=0,b=window,d=a.split("."),f=d.length,g=0;g<f;g++)b[d[g]]&&(b=b[d[g]]);b&&b!=window&&(c=b)}catch(j){gx.dbg.logEx(j,"gxapi.js","getType")}return c},doEval:function(a,c){c=c||window;return c.execScript?c.execScript(a):eval.call?
eval.call(c,a):eval(a)},doCall:function(){try{for(var a=arguments[0],c=[],g=arguments.length,b=1;b<g;b++)c.push(arguments[b]);return a.apply(this,c)}catch(d){gx.dbg.logEx(d,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,c,g,b){a=a.closure(c,g);b=setTimeout(a,b);return{f:a,t:b}},encodeValue:function(a){return gx.text.charReplace(a,['"',"'","\r","\n"],["\\042","\\047","\\015","\\012"])},decodeValue:function(a){a=gx.text.replaceAll(a,"\\042",'"');
return gx.text.replaceAll(a,"\\015\\012","\r\n")},htmlDecode:function(){var a=document.createElement("div");return function(c){c&&"string"===typeof c&&(c=escape(c).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),a.innerHTML=c,c=j(a).text(),j(a).text(""));return unescape(c)}}(),arrayUnique:function(a){for(var a=a.concat(),c=0;c<a.length;++c)for(var g=c+1;g<a.length;++g)a[c]===a[g]&&a.splice(g--,1);return a},objToArray:function(){var a=function(a){return[a]};return function(c){return j.map(c,
a)}}()},cache:function(){var a=!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(a){return!this.exceptionsRegEx?!0:!!a&&-1==a.search(this.exceptionsRegEx)},addRemoteFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},addLoadedFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(a){var g;
if(a)for(g in this.remoteFiles)a.exec(g)&&(this.remoteFiles[g]=!1)},removeRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!1},fileLoaded:function(a){a=gx.util.noParmsUrl(a);return this.remoteFiles[gx.util.resourceUrl(a,!0)]?!0:!1},updateStyles:function(a,g){for(var b=[],d=a.length,f=0;f<d;f++){var j=a[f];if(!gx.lang.emptyObject(j)){for(var m=!1,k=g.length,q=0;q<k;q++)if(j==g[q]){m=!0;break}m||b.push(j)}}m=gx.staticDirectory;"/"==m.charAt(0)&&(m=m.substring(1));
d=b.length;for(f=0;f<d;f++)j=b[f],"/"!=j.charAt(0)&&(j=m+j),this.removeRemoteFile(j)},addInlineCode:function(a){this.inlineCode[a]=!0},deleteInlineCode:function(a){delete this.inlineCode[a]},codeLoaded:function(a){return this.inlineCode[a]?!0:!1},_init:function(){gx.pO&&(gx.pO.fullAjax&&gx.spa.started)&&(gx.cache.exceptionsRegEx=/messages\..+\.js/);if(!a){a=!0;var c=gx.staticDirectory;"/"==c.charAt(0)&&(c=c.substring(1));for(var g=gx.dom.scripts(),b=g.length,d=0;d<b;d++){var f=g[d];gx.lang.emptyObject(f)||
("/"!=f.charAt(0)&&!gx.ajax.isabsoluteurl(f)&&(f=c+f),this.addRemoteFile(f))}g=gx.dom.styles();b=g.length;for(d=0;d<b;d++)f=g[d],gx.lang.emptyObject(f)||("/"!=f.charAt(0)&&!gx.ajax.isabsoluteurl(f)&&(f=c+f),this.addRemoteFile(f))}}}}(),evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,hooks:[],controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!0,userReady:!1,
skipPromptCtrl:!0,touchTimer:null,eachKeyAutorefreshType:function(a){return!gx.lang.isNumericType(a)&&!gx.lang.isDateType(a)},addHook:function(a,c,g){this.hooks.push({c:a,e:c,f:g})},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(a):a.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=gx.evt.refreshGridCallback.pop();"function"==typeof a&&
a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=this.hooks.length,c=0;c<a;c++){var g=this.hooks[c];try{this.detach(g.c,g.e,g.f),g.c=null,g.f=null}catch(b){gx.dbg.logEx(b,"gxapi.js","clearHooks")}this.hooks[c]=null}this.hooks=[]},source:function(a){return a.target||a.currentTarget||a.srcElement},attach:function(a,c,g,b,d){d=d||{};if("string"==typeof c){var f=g;b&&(f=g.closure(b));if(d.single){var j=f,m=!1,k,f=function(){m||(k&&clearTimeout(k),gx.evt.detach(a,c,j,d),j.apply(this,
arguments),m=!0)};d.timeout&&(k=setTimeout(f,d.timeout))}a.addEventListener?a.addEventListener(c,f,d.useCapture||!1):a.attachEvent?a.attachEvent("on"+c,f):a["on"+c]=f;this.addHook(a,c,f)}else if(gx.lang.isArray(c))for(var f=0,q=c.length;f<q;f++)this.attach(a,c[f],g,b,d)},detach:function(a,c,g,b){try{if(b=b||{},"string"==typeof c)a.removeEventListener?a.removeEventListener(c,g,b.useCapture||!1):a.detachEvent?a.detachEvent("on"+c,g):a["on"+c]=null;else if(gx.lang.isArray(c))for(var d=0,f=c.length;d<
f;d++)this.detach(a,c[d],g,b)}catch(j){gx.dbg.logEx(j,"gxapi.js","detach")}},stopPropagation:function(a){a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},cancel:function(a,c){if(c&&gx.util.browser.isIE()&&typeof("undefined"!=a.keyCode))try{a.keyCode=0}catch(g){}"undefined"==typeof a.preventDefault?(a.cancelBubble=c,a.returnValue=!c):c&&(a.preventDefault(),a.stopPropagation())},checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=
a.onfocus)a.onfocus()}catch(c){gx.dbg.logEx(c,"gxapi.js","checkCtrlFocus")}},doClick:function(a,c){if(gx.isInputEnabled()){var g=gx.evt.source(c);if("button"!=g.type&&"submit"!=g.type&&(g=gx.dom.el(a),gx.fn.isAccepted(g))){if(void 0!=g.onfocus)g.onfocus();if(void 0!=g.onclick)g.onclick();"INPUT"==g.nodeName&&"submit"==g.type&&gx.dom.form().submit()}}},executeOnblur:function(a){var c=gx.csv.lastId,g=gx.O.focusControl;gx.O.focusControl=a;this.onblur(a,gx.O.focusControl);gx.O.focusControl=g;gx.csv.lastId=
c},onblur:function(a,c){if(gx.O&&!0!==gx.csv.IgnoreBlur){var g=gx.fn.controlRowId(a);gx.csv.lastId=c;try{var b=gx.fn.validStruct(c);b&&null!=b.gxgrid&&b.gxgrid.updateControlValue(b,!1,g);var d=gx.csv.lastControl,f=d.getAttribute("maxlength");0<f&&d.value.length>f&&(d.value=d.value.substring(0,f));if(b&&"bits"==b.type&&0==b.ro){var j=gx.fn.getControlGridRef(b.fld,b.gxgrid?b.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>d.id.indexOf(b.fld)&&(d=j);var m=gx.html.multimediaUpload.getContainer(j);gx.html.multimediaUpload.refreshPreviewImg(m,
d)}}catch(k){gx.dbg.logEx(k,"gxapi.js","onblur")}}},onfocus:function(){var a=function(){gx.fx.obs.notify("gx.onbeforefocus",arguments);gx.evt.onfocus_impl.apply(gx.evt,arguments);gx.fx.obs.notify("gx.onafterfocus")};!0===gx.evt.is_button_mouse_event||gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,c,g,b,d,f,j){try{if(gx.spa.isNavigating())return!1;gx.evt.setReady(!1);if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0),
!1;var m=!1;gx.csv.cmpCtx!=g&&(m=!0,gx.O.fromValid=0);gx.setGxO(g,b);m&&gx.fn.changeCmpContext();gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(k){gx.dbg.logEx(k,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;(0==f||""!=d)&&gx.fn.setCurrentGridRow(f,d);gx.fx.installSuggest(a);var q=!1;if(gx.csv.lastGrid!=f){gx.csv.lastRow[f]=null;if(!j){if(gx.csv.lastGrid<f){var t=gx.fn.firstGridControl(f);gx.O.fromValid>t&&
(gx.O.fromValid=t)}gx.csv.lastGrid=f}q=!0}gx.O.focusControl=c;if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0),!0;if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(s){gx.dbg.logEx(s,"gxapi.js","onfocus")}try{var r=gx.fn.getControlValue("Mode");if("DLT"==r||"DSP"==r||gx.O.isTransaction()&&gx.dom.isButton(a)&&!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&!j)return gx.evt.setReady(!0),!0}catch(v){gx.dbg.logEx(v,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&
null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0),!0;gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0);return!0}if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0),!0;if(null!=gx.csv.invalidControl&&(gx.csv.invalidControl!=a&&gx.O.focusControl>=gx.csv.invalidId)&&gx.csv.invalidControl==a)return gx.csv.validate(gx.csv.invalidControl,
gx.csv.invalidId,!1).done(function(a){if(a){gx.csv.invalidControl=null;gx.evt.setReady(true)}}),!0;j?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0!=gx.csv.lastRow[f]&&(gx.csv.lastRow[f]!=d&&!q)&&gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);var u=gx.fn.controlIds();
0<u.length&&gx.O.fromValid<u[0]&&(gx.O.fromValid=u[0]);gx.lang.emptyObject(gx.csv.lastRow[f])&&0!=f&&(gx.csv.rowChanged=!0,gx.csv.lastRow[f]=d);var x=gx.O,y=gx.csv.lastId,B=gx.fn.validStruct(y,x);if(B)var A=gx.csv.lastRow[B.grid];gx.csv.checkRowChange(y,q,x,A).done(function(c){var g=false,b=false,p=function(){gx.csv.invalidControl==null&&(a.nodeName=="SELECT"?(!gx.util.browser.isIE()||gx.util.browser.ieVersion()>=7)&&gx.fn.setSelection(a):gx.fn.setSelection(a));gx.csv.disableFocusCondition();gx.evt.setReady(true)};
if(!gx.lang.emptyObject(A)&&!gx.lang.emptyObject(d)&&A.length>d.length){g=A.substring(A.length-d.length);g=parseInt(g)<parseInt(d)}if(gx.csv.backwardGridValidation){!gx.lang.emptyObject(A)&&(!gx.lang.emptyObject(d)&&A.length==d.length&&parseInt(A)>parseInt(d))&&(b=x.focusControl>gx.fn.firstGridControl(f));!gx.lang.emptyObject(A)&&(!gx.lang.emptyObject(d)&&A.length==d.length&&parseInt(A)<parseInt(d))&&(b=x.focusControl<y&&x.focusControl>gx.fn.firstGridControl(f))}if(gx.csv.backwardGridValidation&&
c&&gx.csv.invalidControl==null&&b){x.fromValid=gx.fn.firstGridControl(f);gx.csv.validControls(x.fromValid,x.focusControl,true,gx.O)}else if((!c||q)&&(x.focusControl>=y||g)){if(gx.fn.lastMainLevelCtrlId(y,f))if((c=gx.fn.getControlRefById(y))&&c.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)===1)x.fromValid=y+1;gx.csv.validateAll(x).done(p)}else{x.toValid=x.focusControl;p()}})}catch(z){gx.dbg.logEx(z,"gxapi.js","onfocus")}return!1},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(a){gx.dbg.logEx(a,
"gxapi.js","userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(a,c,g){gx.pO.MasterPage&&a.req.setRequestHeader(g,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,c,g,b,d,f){gx.reinit(!f)},oncontentreplace:function(a,c,g,b,d,f,j,m){var a=gx.lang.getType(b),f=(f=f==j?f:
j)?gx.lang.getType(f.toLowerCase()):!1,k=gx.ajax.getJsonResponse();k&&gx.fn.setJsonHiddens(k.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);m?gx.setMasterPage(d):f&&gx.setMasterPage(new f);gx.ajax.clearJsonResponse();k?gx.ajax.setJsonResponse({response:k,isPostBack:!1,afterCmpLoaded:function(){gx.objectLoad(k.gxGrids,k.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):gx.objectLoad()}}})})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();
else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},on_ready:function(a,c){gx.fx.obs.addObserver("gx.onload",a,c)},onunload:function(a){gx.objectUnload(a);gx.spa.stop()},onclick:function(a){var c={event:a};gx.fx.obs.notify("gx.onclick",[c]);c.cancel||(gx.evt.setReady(!1),gx.isInputEnabled(a)||gx.evt.cancel(a,!0),gx.evt.mouse.update(a),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0))},ontouchstart:function(a){a=
gx.evt.onmousedown.closure(this,[a]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(a,150):a()},onmousedown:function(a){var c=window.event||a,g=gx.evt.source(c);if(g&&8>=gx.util.browser.ieVersion()&&j(g).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(g);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();g=a.getSource(c);null!=g&&(gx.evt.cancel(c,!0),gx.setGxO(g.obj),a.drag(g.obj,g.types,g.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);
var c=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()){var g=gx.popup.ext;g.movepopup();if(null!=g.currIDb||null!=g.currRS)return!1}null!=c.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,c.obj.gxDragTypes)&&c.over(),c.moveControl(c.dragCtrl))},onmouseup:function(a){window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var c=gx.fx.dnd;if(null!=c.dragCtrl){var g=window.event||a,g=c.getTarget(g,c.obj.gxDragTypes);null!=g?(c.deleteClonControl(),
gx.setGxO(g.obj),c.drop(c.dropCtrl,g.obj,g.hdl)):c.restoreControl();g=window.event||a;gx.evt.cancel(g,!0)}c.out();c.dragCtrl=null;c.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);gx.fx.dom.raiseEvent("dblclick",window.event||a)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(a,c,g){var g=window.event||g,b=gx.util.browser.isIE(),d=g.keyCode;if(b){if("keydown"==g.type&&229==d)return a.value.length<=c?a.ImeKey=!0:
!1;if("keyup"==g.type&&8==d&&a.ImeKey&&a.value.length+1>=c)return a.value=a.value.substring(0,a.value.length-1),a.ImeKey=!1,!0}if("keyup"==g.type||b)return a.value.length+1<=c||8==d||9==d||46==d||35<=d&&40>=d},onkeypress:function(a,c,g){if((null!=a||window.event)&&!(null!=a&&window.event)){var a=null==a?window.event:a,b=gx.fn,d=gx.util.browser,c={event:a,hasEnter:c,skipOnEnter:g,cancel:!1};if(27==a.keyCode&&gx.popup.ispopup())b.closeWindow();else if(gx.fx.obs.notify("gx.keypress",[c]),!c.cancel){13==
a.keyCode&&!gx.isInputEnabled()&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(a))return this.cancel(a,!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var f=a.ctrlKey,c=gx.evt.source(a)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.csv.invalidateCtrl(c,a);if(!this.isEnterEvtCtrl(c)||!this.isTriggerKey(a)||!this.cancelAndRefresh(a))if(this.checkFuncKey(a,c),(32==a.charCode||32==a.keyCode||13==a.keyCode&&!g)&&gx.dom.hasClass(c,"gx_newrow")&&
j(c).find("span").click(),13==a.keyCode){var o=this.triggersEvt(c);if(g){if(!b.enterHasFocus()&&(!this.shiftPressed||!("TEXTAREA"==c.nodeName&&d.isIE())))f&&"TEXTAREA"==c.nodeName?gx.dom.replaceAtCaretPosition(c,"\n"):(d.isIE()&&"file"!=c.type?(gx.evt.isEnterEvtCtrl(c)&&gx.O.executeEnterEvent(a,c),a.keyCode=9,this.lastKey=a.keyCode,11<=d.ieVersion()&&(a.preventDefault(),b.setFocus(b.searchFocus(b.getControlIndex(c)+1,!0)))):(c.value&&(d.isIE()&&"SELECT"!=c.tagName)&&(d=c.value,c.value="",c.value=
d),b.skipFocus(g),this.cancel(a,!0)),this.enter=!1)}else o||gx.O.executeEnterEvent(a,c)}}}},onkeyup:function(a){var a=gx.evt.source(window.event?window.event:a),c=a.getAttribute("maxlength"),g="undefined"==typeof a.value?"":a.value;if((""==a.type&&9==this.lastKey||this.autoSkip&&""!=a.type&&!this.isControlKey(this.lastKey)&&g.length>=c)&&this.skipPromptCtrl)if(gx.dom.isTextWithLink(a)){if(c=a.id||("A"==a.tagName&&a.parentNode?a.parentNode.id:""))c=gx.O.getValidStructId(c),gx.evt.onfocus(a,c,"",!1,
"",0)}else if(a=a.getAttribute("gxfocusable"),!(null!=a&&"1"==a)){a=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==a)return!0;a=gx.fn.searchFocus(this.shiftPressed?a-1:a+1,!this.shiftPressed);gx.fn.setFocus(a)}},setEventRow:function(a,c){var g=gx.fn.rowGridId(c),b=gx.fn.controlRowId(c)||gx.fn.currentGridRowImpl(g)||"0001";null!=g&&null!=b&&(void 0!=c.gxGridName&&gx.fn.setHidden(a.CmpContext+c.gxGridName.toUpperCase()+"_ROW",b),gx.csv.lastEvtRow=b,gx.fn.setCurrentGridRow(g,
b))},ctrlOnchange:function(a,c,g,b){gx.csv.pkDirty=g;"UPD"==a.value?"1"==c.value?(g?null!=b&&(b.value=gx.getMessage("GXM_captionadd")):null!=b&&(b.value=gx.getMessage("GXM_captionupdate")),c.value="0"):g&&null!=b&&(b.value=gx.getMessage("GXM_captionadd")):"INS"==a.value&&"1"==c.value&&(null!=b&&(b.value=gx.getMessage("GXM_captionadd")),c.value="0")},onchange:function(){var a=function(){gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,
a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onchange_impl:function(a){gx.evt.setReady(!1);gx.evt.lastControl=a;var c=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"==a.type)a.onfocus();var g,b=!1;if(a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE)!=c){b=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");gx.csv.invalidateGXCtrl(a);var d=!0;if(g=gx.O.getValidStructFld(a))"function"==typeof g.c2v&&g.c2v(),
"function"==typeof g.v2bc&&g.v2bc.call(gx.O);if("select-one"==a.type||"checkbox"==a.type||"radio"==a.type)d=!1,gx.evt.setReady(!1),gx.csv.validate(a,gx.O.focusControl,!0,gx.O).done(function(c){c&&gx.csv.invalidControl==a&&(gx.csv.invalidControl=null);gx.evt.execOnchange(a,c);gx.evt.setReady(!0)}).fail(function(){gx.evt.setReady(!0)});gx.fn.setControlOldValue(a,c);d&&gx.evt.execOnchange(a,!1)}gx.evt.execUsrOnchange(a);gx.evt.setReady(!0);c=gx.util.browser.isWebkit()&&("radio"==a.type||"checkbox"==
a.type||"file"==a.type);d=!1;if(b&&g&&(gx.fn.lastMainLevelCtrlId(gx.O.focusControl,g.grid)||g.gxsgprm))d=c=!0;if(c&&a.onblur)a.onblur();d&&("undefined"==typeof a.GXFormatError||!1==a.GXFormatError)&&gx.csv.validControls(gx.O.focusControl,gx.O.focusControl+1,!0,gx.O)},execOnchange:function(a,c,g){var b="";if(a.attributes.gxoch1)try{b+=a.attributes.gxoch1.value+";"}catch(d){gx.dbg.logEx(d,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&a.attributes.gxoch2)try{b+=a.attributes.gxoch2.value+";"}catch(f){gx.dbg.logEx(f,
"gxapi.js","execOnchange")}try{""!=b&&eval(b)}catch(j){gx.dbg.logEx(j,"gxapi.js","execOnchange")}c||gx.fn.setControlGxValid(a,"0");a.setAttribute("gxctrlchanged","1");g||gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(a){var c="";try{c=a.attributes.gxoch0.value}catch(g){return!0}return(new Function(c)).call(a)},jsEvent:function(a){if(!gx.isInputEnabled())return!1;a=a.getAttribute?a.getAttribute("jsevent"):a.jsevent;return!gx.lang.emptyObject(a)?
eval(a):!0},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var c=gx.dom.id(a);!c&&"A"==a.tagName&&(c=a.parentNode.id);c&&0==c.indexOf("span_")&&(c=c.substring(5));if(!c)return!1;for(var g=gx.O.EnterCtrl,a=gx.fn.rowGridId(a),b=0,d=g.length;b<d;b++){var f=gx.csv.ctxControlId(g[b]);if(a&&-1!=c.search(RegExp(".*"+f+"_[0-9]{4}$"))||f==c)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var a=gx.dom.id(a),c;for(c in gx.O.CheckCtrl)if(gx.O.CheckCtrl[c]==a||gx.O.CmpContext+
gx.O.CheckCtrl[c]==a)return!0}return!1},isTriggerKey:function(a){for(var c=this.triggerKeys.length,g=0;g<c;g++)if(a.keyCode==this.triggerKeys[g]||a.charCode==this.triggerKeys[g])return!0;return!1},isControlKey:function(a){for(var c=this.controlKeys.length,g=0;g<c;g++)if(a==this.controlKeys[g])return!0;return!1},invalidDSPKey:function(a){var c=a.keyCode-111;a.shiftKey&&(c+=12);return this.keyListeners[c]&&"ENTER"==this.keyListeners[c][gx.O.CmpContext]||13==a.keyCode?!0:!1},addKeyListener:function(a,
c,g){1==c&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[c]&&(this.keyListeners[c]=[]);this.keyListeners[c][a]=g},setEvtName:function(a){gx.fn.setHidden("_EventName",a)},cancelAndRefresh:function(a){return gx.O.conditionsChanged?(this.cancel(a,!0),gx.O.executeServerEvent("RFR",!1),!0):!1},setGridEvt:function(a,c){if(gx.isInputEnabled()&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(c)){var g=gx.fn.getGridObj(a);g&&(c=gx.fn.getHidden(gx.O.CmpContext+g.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",
a);gx.fn.setHidden("_EventRowId",c);void 0!==c&&gx.fn.setCurrentGridRow(a,c)}},checkFuncKey:function(a,c){var g=this.lastKey-111;a.shiftKey&&(g+=12);if(0<g&&24>=g&&void 0!=this.keyListeners[g]){var b=this.keyListeners[g][gx.O.CmpContext];if("undefined"!=typeof b)this.execFnKeyEvt(a,gx.O,b,c);else for(var d in this.keyListeners[g])if(b=this.keyListeners[g][d],"undefined"!=typeof b){var f=gx.getObj(d,!1);if(null!=f){this.execFnKeyEvt(a,f,b,c);break}}}},execFnKeyEvt:function(a,c,g,b){if(!gx.evt.processing)if(this.cancel(a,
!0),"PROMPT"==g){if((a=c.getValidStructFld(b))&&a.attachedCtrls)for(var g=a.attachedCtrls,d=0,f=g.length;d<f;d++)if((b=g[d])&&b.info&&b.info.isPrompt){var j=g[d].id;"function"==typeof c.promptKeyHandlers[j]&&(b=0<a.grid?"_"+gx.fn.currentGridRowImpl(a.grid):"",b=gx.dom.el(c.CmpContext+j+b),c.promptKeyHandlers[j].call(c,b))}}else if(c.isTransaction()&&"SELECT"==g){if((c=gx.dom.el(c.CmpContext+"BTN_SELECT"))&&"function"==typeof c.onclick)c.onclick()}else c.executeEvent(g,!1)},keyModifiesValue:function(a){a=
window.event?a.keyCode:a.which;return 32<=a&&127>=a||229==a?!0:!1},triggersEvt:function(a){return!gx.lang.emptyObject(a)&&(a==gx.evt.dummyCtrl||("A"==a.nodeName||"TEXTAREA"==a.nodeName)||"INPUT"==a.nodeName&&("button"==a.type||"image"==a.type))?!0:!1},setProcessing:function(a,c){if(("undefined"==typeof c||c)&&!gx.evt.redirecting)gx.evt.processing=a,gx.evt.setReady(!gx.evt.processing)},endValidation:function(){gx.csv.validatingGrid=null;gx.csv.validating=!1;gx.fx.obs.notify("gx.onaftervalidate")},
setReady:function(a){gx.evt.userReadyCnt+=a?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;gx.evt.userReady=0==gx.evt.userReadyCnt;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0)},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(a,c){for(;0<a&&c&&c.length&&4<=c.length;){var g=c.substr(0,4),b=c.substr(4);gx.fn.setCurrentGridRow(a,g);if(g=gx.O.getGridById(a,b))g=g.parentGrid;a=g?g.gridId:0;c=c.substr(4,c.length)}},execEvt:function(a,c,g,b,d,f,j,m,k,q){gx.dbg.logPerf("execEvt");
gx.ajax.saveFormForAutoComplete();if(q||!gx.lang.emptyObject(g)&&gx.isInputEnabled()&&gx.ajax.isFormEnabled()){var t;void 0!=a&&(t=gx.getObj(a,c))&&gx.setGxO(a,c);var a=d,s=this.EVT_ROW_ID_REGEXP.exec(g),c=s&&1<s.length?s[1]:null;s&&2<s.length&&gx.evt.setCurrentGridRows(a,c);c||(c=gx.fn.currentGridRowImpl(a));if(q||!t||!t.inputHasFormatErrors(g,d,c)){if(gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(b)&&b!=gx.csv.lastControl&&void 0!=b.onfocus)b.onfocus();gx.fx.obs.notify("gx.validation");j&&(gx.evt.srvCommand=
!0,b&&(a=gx.fn.rowGridId(b),c=gx.fn.controlRowId(b),!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(c)&&(gx.csv.lastGrid=a,gx.fn.setCurrentGridRow(a,c))));if(0<gx.csv.lastId&&!gx.csv.validatingAll&&(d=gx.O.getValidStruct(gx.csv.lastId),(gx.evt.isEnterEvtCtrl(b)&&0<b.id?gx.O.getValidStructId(b.id):gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(b)||d&&d.isuc)||gx.evt.enter))gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=
!1;this.setEvtName(g,b);this.lastEvent=g;!j&&(gx.grid.drawAtServer||b&&"INPUT"==b.nodeName&&"submit"==b.type)?this.execEvtSubmit(g,b):(gx.evt.setProcessing(!0),b=function(){gx.ajax.doPost(gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),f,m,k)},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(g,gx.O,a,c,!0).done(k).fail(b):b())}}},execEvtSubmit:function(a,c){if(gx.isInputEnabled()){gx.evt.setProcessing(!0);gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,c]);gx.fn.objectOnpost();gx.http.saveState();
gx.fn.forceEnableControls(!1);var g=gx.dom.form(),b=gx.popup.getPopup();if(null!=b){var d=g.action,b=b.window.gx.popup.lvl;if(-1!=b){var f=-1!=d.indexOf("?")?",":"?",f=f+encodeURIComponent("gxPopupLevel="+b+";");g.action=d+f}}g.submit()}},execCliEvt:function(a,c,g,b,d,f){if(gx.isInputEnabled()&&gx.ajax.isFormEnabled()){gx.fx.obs.notify("gx.validation");var f=void 0!=f?f:[],j=gx.getObj(a,c),m;if(null!=j&&(gx.setGxO(a,c),"string"==typeof b&&(""!=b&&4<arguments.length)&&(m=j.getGrid(b),m.instanciateRow(d),
m=m.gridId),!j.inputHasFormatErrors(j.getServerEventName(g),m,d))){var k=j.isServerEvent(g);gx.evt.setProcessing(!0,!k);j.execC2VFunctions();var q=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing(false,!gx.csv.validating&&!k)});j.conditionsChanged&&j.executeServerEvent("RFR",true)},t=function(){j[g](f);q()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(j.getServerEventName(g),j,m,d,!1,f).done(q).fail(t):t()}}},fixWebKitOnFocus:function(){var a=gx.util.browser;return a.isWebkit()&&
!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},dispatcher:function(){return{dispatchedEvents:{},getContextKey:function(a,c,g){return(a.CmpContext||"PARENT_OBJECT")+(c||"")+(g||"")},getEventParmsMetadata:function(a,c,g){return c.EvtParms[a]["input"==g?0:1]},eventDepends:function(a,c,g){for(var c=this.getEventParmsMetadata(c,g,"output"),a=this.getEventParmsMetadata(a,g,"input"),b,d=0,f=c.length;d<f;d++)for(var g=gx.ajax.resolveParmKey(c[d]),j=0,m=a.length;j<m;j++)if(b=gx.ajax.resolveParmKey(a[j]),
g==b)return!0;return!1},beforeDispatch:function(a){var c=gx.ajax.getSecurityToken(a);c&&(a.InternalParms[c.id]=c.value)},dispatch:function(a,c,g,b,d,f){var d=void 0===d||d,o=j.Deferred(),m=c.cleanEventName(a),k=c.getClientEventName(a);this.beforeDispatch(c);if(!c.EvtParms[m])return o.reject(),o.promise();var q=this.getContextKey(c,g,b),t=this.dispatchedEvents[q],a={eventName:m,dirtyEventName:a,clientSideEventName:k,serverSide:d,deferred:o,arguments:f};t?t.events.push(a):(t={gxO:c,grid:g,row:b,events:[a]},
this.dispatchedEvents[q]=t,setTimeout(this.dispatchTimeoutCallback.closure(this,[q]),50));return o.promise()},dispatchTimeoutCallback:function(a){var c=this.dispatchedEvents[a],g=c.gxO,b=c.grid,d=c.row,f=[],j=[],m,k,q=[],t,s={};delete this.dispatchedEvents[a];for(var a=0,r=c.events.length;a<r;a++)if(m=c.events[a],m.serverSide)j.push(m);else{k=!0;for(var v=0;v<a;v++)if(this.eventDepends(m.eventName,c.events[v].eventName,g)){k=!1;break}k?f.push(m):j.push(m)}c=f.concat(j);f=!1;a=0;for(r=c.length;a<r;a++)s[c[a].eventName]=
c[a].deferred,f&&c[a].serverSide?t.addMethod(c[a].eventName):(t=new gx.ajax.message(c[a].eventName,g,b,d,c[a].serverSide),c[a].serverSide||(t.callback=g[c[a].clientSideEventName].closure(g,c[a].evtArguments||[])),q.push(t)),f=c[a].serverSide;var u=function(a,c,g){for(var b=0,p=a.methods.length;b<p;b++){var d=s[a.methods[b]];d&&(c?d.resolve(g):d.reject(g))}};runCount=0;var x=function(){if(runCount<q.length){var a=q[runCount++],c=runCount==q.length;a.call().done(function(){u(a,!0,c);x()}).fail(function(){u(a,
!1,c)})}};x()}}}(),mouse:{x:-1,y:-1,update:function(a){try{gx.lang.emptyObject(a.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=a.pageX,this.y=a.pageY):0<a.touches.length&&(this.x=a.touches[0].pageX,this.y=a.touches[0].pageY)}catch(c){gx.dbg.logEx(c,"gxapi.js","mouse update")}}},_init:function(){document.gxReadyState="loading";if(gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||
8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()))this.attach(document,"readystatechange",this.onready);else if(9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini())this.attach(document,"DOMContentLoaded",this.onload);else if(gx.util.browser.isBlackBerry())this.attach(window,"load",this.onload);else this.onready(null);this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",
this.onmousedown);this.attach(document,["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl=
{};this.keyListeners={};this.hooks=[]}},csv:{GX_OLD_VALUE_ATTRIBUTE:"data-gxOldValue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:!1,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,
dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],validateAll:function(a){var c=j.Deferred(),a=a||gx.O;this.validControls(a.fromValid,a.toValid,!1,a).done(function(){try{if((null==this.invalidControl||!gx.csv.stopOnError)&&(!this.rowChanged||this.targetRowIsMod(this.toValid)))a.fromValid=a.toValid}catch(g){gx.dbg.logEx(g,"gxapi.js","validateAll")}c.resolve()}.closure(this));return c.promise()},validControls:function(a,c,g,b,d){var f=j.Deferred(),o=[],m=0,k=0,q=0,t=gx.csv.fullGridValidation&&
1<=c-a&&gx.O.isTransaction(),s=function(a,c){if(gx.csv.stopOnError)if(-1!=c){var g=gx.fn.validStruct(c,b),g=gx.fn.getControlGridRef(g.fld,g.grid);gx.csv.disableFocus=!0;gx.fn.isAccepted(g,b)?gx.fn.setFocus(g):gx.fn.setFocus(gx.evt.lastControl)}else!gx.dom.isButton(gx.csv.lastControl)&&null!=gx.csv.validActivatedControl&&gx.fn.setFocus(gx.csv.validActivatedControl)};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;if(c>a){if(t&&(validStruct=gx.fn.validStruct(a),void 0!=
validStruct&&void 0!=validStruct.lvl&&(m=validStruct.lvl),validStruct=gx.fn.validStruct(c),void 0!=validStruct&&void 0!=validStruct.lvl))k=validStruct.lvl;for(var r=a;r<c;r++)if(o.push(this.validControl(r,g,b,null,d)),t&&(r>a&&r<c)&&(validStruct=gx.fn.validStruct(r),void 0!=validStruct&&void 0!=validStruct.lvl&&(q=validStruct.lvl,q!=m&&q!=k&&validStruct&&validStruct.grid))){var v=gx.fn.getGridObj(validStruct.grid),u=v.grid.rows.length,x=gx.fn.currentGridRowImpl(validStruct.grid),y=gx.fn.lastGridControl(validStruct.grid);
if(r==y)for(var B=gx.fn.firstGridControl(validStruct.grid),A=0;A<u;A++){var z=v.grid.rows[A],w=z.gxDeleted(),C=z.gxExists(),D=z.gxIsMod();if(!w&&(C||D)&&z.gxId!=x)for(var G=B;G<=y;G++)o.push(this.validControl(G,g,b,z.gxId))}}if(0<o.length)return gx.evt.setProcessing(!0),j.when.apply(j,o).done(function(){for(var a=!0,c=-1,g=0,b=arguments.length;g<b;g++){var p=arguments[g].ret;if(a&&!p){c=arguments[g].ctrl;a=!1;break}}s(a,c);gx.evt.setProcessing(!1);f.resolve(a)}),f.promise()}s(!0,-1);f.resolve(!0)}catch(F){gx.dbg.logEx(F,
"gxapi.js","validControls")}return f.promise()},validControl:function(a,c,g,b,d){var f=j.Deferred(),g=g||gx.O,o=gx.fn.validStruct(a,g);if(void 0!=o){0!=o.grid&&(b=b?b:gx.fn.currentGridRowImpl(o.grid),gx.lang.emptyObject(b)||gx.fn.setCurrentGridRow(o.grid,b));!0==o.isuc?o.uc.execC2VFunctions():"function"==typeof o.c2v&&o.c2v();"function"==typeof o.v2bc&&o.v2bc.call(g);try{if(0==o.lvl||0!=o.grid&&gx.fn.gridRowIsMod(o.lvl,gx.fn.currentGridRow(o.grid))||!g.isTransaction()){var m=null;if(m=!0==o.isuc?
o.uc.getRealControl():gx.fn.getControlGridRef(o.fld,o.grid))return this.validate(m,a,c,g,d).done(function(c){try{var g=false,b=true,d=-1;o.grid!=0&&(g=gx.fn.rowIsRemoved(o.grid,gx.fn.currentGridRow(o.grid)));if(!c&&!g){gx.csv.invalidControl=m;gx.csv.invalidId=a;b=false;d=a}gx.csv.lastId=a;if(gx.fn.isAccepted(m)==false){gx.evt.executeOnblur(a);if(m.getAttribute("gxhiddenonchange")!=m.value){m.setAttribute("gxhiddenonchange",m.value);gx.evt.execOnchange(m,false,true)}}}catch(p){gx.dbg.logEx(p,"gxapi.js",
"validControl - callback")}f.resolve({ret:b,ctrl:d});return f.promise()}),f.promise()}}catch(k){gx.dbg.logEx(k,"gxapi.js","validControl")}}f.resolve({ret:!0,ctrl:-1});return f.promise()},validate:function(a,c,g,b,d){var f=j.Deferred(),b=b||gx.O;gx.csv.anyError=!1;var o=gx.fn.validStruct(c,b);if(void 0==o)return f.resolve(!0),f.promise();gx.csv.refreshVars(o,b);if(null==o.fnc&&null==o.isvalid){if("SELECT"!=a.tagName&&"checkbox"!=a.type&&!gx.evt.eachKeyAutorefreshType(o.type)&&!gx.lang.emptyObject(o.rgrid))for(var m=
o.rgrid.length,c=0;c<m;c++)o.rgrid[c].filterVarChanged();f.resolve(!0);return f.promise()}try{if(-1!=c&&(g||"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE))){gx.csv.currentId=c;gx.csv.validatingGrid=o.gxgrid;gx.csv.validating=!0;gx.csv.refreshVars(o);g=!1;g=!0==o.isuc?o.fnc.call(o.uc):null!=o.fnc?o.fnc.call(b):!0;1==b.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=a),gx.csv.anyError=!0,b.AnyError=0);!0==gx.csv.anyError&&(g=!gx.csv.anyError);if(!1==g)return gx.evt.endValidation(),
f.resolve(!1),f.promise();gx.csv.refreshControls(o,b);gx.csv.invalidateDeps(c,b);if(!gx.lang.emptyObject(o.rgrid)&&!gx.lang.emptyObject(o.hc)){m=o.rgrid.length;for(c=0;c<m;c++)o.rgrid[c].filterVarChanged()}var k=gx.fn.isAccepted(a,b),c=function(){f.resolve(true);try{if(!d){var c=gx.dom.byId(a.id);k&&!d?gx.fn.setControlGxValid(c,"1"):gx.fn.setControlGxValid(c,"0")}gx.evt.endValidation()}catch(g){gx.dbg.logEx(g,"gxapi.js","validate")}};if(null!=o.isvalid&&k&&"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&
!d){var q=o.gxgrid?o.gxgrid:null;if(gx.pO.supportAjaxEvents){var t=o.isvalid,s=o.gxgrid?o.gxgrid.gridId:!1,r=s?gx.fn.currentGridRowImpl(s):"",v=b.isServerEvent(t);t?gx.evt.dispatcher.dispatch(b.getServerEventName(t),b,s,r,v).done(c).fail(c):(b[o.isvalid](),c())}else{var u=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=q;b[o.isvalid]();gx.csv.instanciatedRowGrid=u;c()}}else c()}}catch(x){gx.dbg.logEx(x,"gxapi.js","validate")}f.resolve(!0);return f.promise()},invalidateForm:function(){if(1!=
gx.O.AnyError)for(var a=gx.fn.controlIds(),c=a.length,g=0;g<c;g++){var b=gx.fn.validStruct(a[g]);this.invalidateGXCtrl(gx.fn.getControlGridRef(b.fld,b.grid))}},invalidateGXCtrl:function(a){if(a){var c=a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE);1==a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&c!=a.value&&gx.fn.setControlGxValid(a,"0")}},invalidateCtrl:function(a,c){try{this.invalidateGXCtrl(a);!gx.evt.keyModifiesValue(c)&&null==a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE)&&gx.fn.setControlOldValue(a,
a.value);var g=gx.fn.validStruct(gx.O.focusControl);if(g&&0!=g.grid&&gx.evt.keyModifiesValue(c)){var b=gx.fn.controlRowId(a)||gx.fn.currentGridRowImpl(g.grid)||"0001";g.gxgrid.setRowModified(b)}}catch(d){gx.dbg.logEx(d,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(a,c){for(var g=gx.fn.controlIds(),b=g.length,d=0;d<b;d++){var f=g[d];if(f>a)for(var f=gx.fn.validStruct(f,c),j=f.ip?f.ip.length:0,m=0;m<j;m++)if(f.ip[m]==a)if(0==f.grid){var k=gx.fn.getControlGridRef(f.fld,f.grid);k&&gx.fn.setControlGxValid(k,
"0")}else{var q=gx.fn.getGridObj(f.grid);if(q)for(var t=q.grid.rows.length,s=0;s<t;s++){var k=q.grid.rows[s],r=k.gxDeleted(),v=k.gxExists();!r&&v&&(q.setRowModified(k.gxId),(k=gx.fn.getControlRef(f.fld+"_"+k.gxId))&&gx.fn.setControlGxValid(k,"0"))}}}},setFormatError:function(a,c){a.id&&(c||"undefined"==typeof c?(this.gxFormatErrors[a.id]=!0,a.GXFormatError=!0):(delete this.gxFormatErrors[a.id],a.GXFormatError=!1))},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==
typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var a=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var c=gx.fn.validStruct(gx.O.focusControl);if(c&&c.nac&&!0==c.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var g=gx.fn.searchFocusFwd(cn);null!=g&&gx.fn.setFocus(g);gx.setVar("Gx_mode",a);return!0}gx.setVar("Gx_mode",a)}catch(b){}return!1},loadScreen:function(){try{gx.csv.pkDirty&&(gx.csv.pkDirty=
!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0))}catch(a){gx.dbg.logEx(a,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(a,c){var g;if(gx.O&&gx.O.IsMasterPage&&0!=a.indexOf("MP")){var b=this.CTRL_ROW_INDEX_REGEXP.exec(a);if(b&&1<b.length)return g=b[1],b=2<b.length?"_"+b[2]:"",g+(-1===g.indexOf("_MPAGE")?"_MPAGE":"")+b}return(g=(c?c.CmpContext:this.cmpCtx)||"")&&0==a.indexOf(g)||0<=a.search(gx.GxObject.CONTROL_CMP_REGEX)?
a:g+a},isProperty:function(a){return a instanceof Array&&2==a.length||"object"==typeof a&&"undefined"!=typeof a[0]&&"undefined"!=typeof a[1]?!0:!1},checkRowChange:function(a,c,g,b){var d=j.Deferred();try{var f=gx.fn.validStruct(a,g);if("undefined"!=typeof f){var o=f.grid;if(0!=o){var m=gx.fn.currentGridRowImpl(o);if(m&&(m!=b||c)&&1<m.length&&b&&1<b.length){gx.csv.rowChanged=!0;var k=g.Gx_BScreen;g.Gx_BScreen=1;gx.csv.validGridRowChange(o,m,g,b).done(function(a){a&&(a=g.getGridById(o,b))&&a.instanciateRow(m);
g.Gx_BScreen=k;d.resolve(!0)})}else d.resolve(!1);void 0!=m&&gx.fn.setCurrentGridRow(o,m)}else d.resolve(!1)}else d.resolve(!1)}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","checkRowChange")}return d.promise()},validGridRow:function(a,c){void 0!=c&&gx.fn.setCurrentGridRow(a,c);var g=gx.fn.firstGridControl(a),b=gx.fn.lastGridControl(a);gx.csv.validControls(g,b+1,!0,gx.O)},validGridRowChange:function(a,c,g,b){var d=j.Deferred();void 0!=b&&gx.fn.setCurrentGridRow(a,b);var f=gx.fn.firstGridControl(a,g),o=gx.fn.lastGridControl(a,
g),b=!gx.lang.emptyObject(b)&&!gx.lang.emptyObject(c)&&b.length==c.length&&parseInt(b)>parseInt(c);gx.csv.validControls(f,o+1,!0,g,b).done(function(g){(g||!gx.csv.stopOnError)&&gx.csv.changeGridRow(a,f,c);d.resolve(g)});return d.promise()},changeGridRow:function(a,c,g){gx.csv.lastId=c;gx.O.fromValid>c&&(gx.O.fromValid=c);gx.csv.lastRow[a]=g;Gx_BScreen=1},targetRowIsMod:function(a){return(a=gx.fn.validStruct(a))?gx.fn.gridRowIsMod(a.lvl,gx.fn.currentGridRow(a.grid)):!1},refreshVars:function(a,c){for(var g=
a.ip?a.ip.length:0,b=0;b<g;b++)try{"function"==typeof gx.fn.validStruct(a.ip[b],c).c2v&&gx.fn.validStruct(a.ip[b],c).c2v()}catch(d){gx.dbg.logEx(d,"gxapi.js","refreshVars")}},refreshControls:function(a,c){for(var g=a.op?a.op.length:0,b=0;b<g;b++)try{var d=gx.fn.validStruct(a.op[b],c);d.v2c();var f=null;(f=0==d.grid?gx.dom.el(gx.csv.ctxControlId(d.fld)):gx.fn.getControlGridRef(d.fld,d.grid))&&gx.fn.setControlGxValid(f,"0")}catch(j){gx.dbg.logEx(j,"gxapi.js","refreshControls")}g=a.ucs?a.ucs.length:
0;for(b=0;b<g;b++)try{gx.fn.validStruct(a.ucs[b],c).uc.execV2CFunctions(!0)}catch(m){gx.dbg.logEx(m,"gxapi.js","refreshControls")}},setValidValues:function(a,c,g){var b=[];if(1<g.length-c.length){var d=gx.json.evalJSON(g[g.length-1]);for(h in d)gx.fn.setHidden(h,d[h]);b=gx.json.evalJSON(g[g.length-2])}d={};a={fields:a,msgs:b};gx.O.cmpCtx?d[gx.O.cmpCtx]=a:d.MAIN=a;gx.fn.setErrorViewer(d);if(!gx.O.AnyError)for(var f=!1,a=c.length,d=0;d<a;d++){var j=c[d],b=g[d];if(this.isProperty(j)){var m=gx.fn.vStructForVar(j[0])||
gx.O.getValidStructFld(j[0]);null!=m&&gx.fn.setCtrlProperty(m.fld,j[1],b)}else if(m=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(m)&&!gx.lang.emptyObject(m.hc)&&(m.hc==j?(gx.O[m.hc]=b,gx.fn.setHidden(this.cmpCtx+"GXH_"+m.fld,b)):m.hd==j&&(gx.O[m.hd]=b)),m=gx.fn.vStructForVarWId(j,this.currentId),gx.lang.emptyObject(m)){m=gx.fn.vStructForHC(j);if(null!=m){var k="";0!=m.grid&&(k="_"+gx.fn.currentGridRow(m.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+m.fld+k,b)}m=gx.fn.gridObjFromGxO(j);void 0!=
m?(f=!0,m.loadGrid(b)):gx.fn.saveLvlOldParm(j,b)&&(gx.setVar(j,b),gx.fn.setGridHidden(j,b))}else if(j=gx.fn.screen_CtrlRef(m.fld),!gx.lang.emptyObject(j)&&b instanceof Object&&("SELECT"==j.tagName?(-1!=j.selectedIndex&&gx.fn.invalidEmptyValue(b)&&(b.s=j.options[j.selectedIndex].value),k=gx.dom.id(j),gx.fn.loadComboBox(k,b.v),gx.fn.setComboBoxValue(k,b.s)):gx.lang.emptyObject(b.s)||(b.s=gx.fn.trimSelectValue(b.s,m.type)),k=gx.fn.selectedDescription(b,m.type),b=gx.lang.emptyObject(b.s)&&!gx.lang.emptyObject(j.value)?
j.value:"SPAN"==j.tagName&&!gx.lang.emptyObject(b.s)&&!gx.lang.emptyObject(k)?k:b.s,gx.fn.setControlValue_span_safe(this.cmpCtx+m.fld,b,0)),m.v2v)m.v2v(b),m.v2c()}gx.O.refreshOlds();gx.fn.enableDisableDelete();f&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}},json:{_nonSerializables:[],
setNonSerializable:function(a){this.isNonSerializable(a)||this._nonSerializables.push(a)},isNonSerializable:function(a){for(var c=this._nonSerializables.length,g=0;g<c;g++)if(this._nonSerializables[g]==a)return!0;return!1},evalJSON:function(a){try{return eval("("+a+")")}catch(c){gx.dbg.logEx(c,"gxapi.js","evalJSON")}return a},serializeJson:function(a,c){var g=this.objToJson(a);if(null===g)g=this.arrayToJson(a);else return g;if(null===g){if("function"==typeof a)return null;var g=[],b;for(b in a)if(c||
!this.isNonSerializable(b)){var d=this.objToJson(b,!0);if(null!==d){var f=this.serializeJson(a[b]);"string"==typeof f&&g.push(d+":"+f)}}return"{"+g.join(",")+"}"}return g},objToJson:function(a,c){var g=typeof a;if(c){if(!gx.lang.emptyObject(a)){if("string"==g)return gx.text.escapeString(a);if("number"==g)return'"'+a+'"';if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return a.toString()}}else{if("undefined"==g)return g;if("string"==g)return gx.text.escapeString(a);if("number"==
g||"boolean"==g||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return a.toString();if(null===a)return"null";if("function"==typeof a.json&&(g=a.json(),a!==g))return this.serializeJson(g)}return null},arrayToJson:function(a){if("function"!=typeof a&&"number"==typeof a.length){for(var c=[],g=a.length,b=0;b<g;b++){var d=this.serializeJson(a[b]);"string"!=typeof d&&(d="undefined");c.push(d)}return"["+c.join(",")+"]"}return null},objFromJson:function(a,c){var g=this.evalJSON(c);if(a instanceof
Array&&g instanceof Array)for(;a.length>g.length;)a.shift();else for(var b in a)"function"!=typeof a[b]&&delete a[b];for(b in g)a[b]=g[b]}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()},logDebug:function(a){this.enabled&&this.write(a)},logMsg:function(a){(this.enabled||window.console)&&this.write(a)},logEx:function(a,c,g){if(this.enabled||window.console){var b="";if(a&&
a instanceof Error)b="["+a.name+": "+this.exTxt(a),b=b+(c?", file: "+c:"")+((g?", func: "+g:"")+"]"),a.fileName&&(b+=" FileName:"+a.fileName),a.lineNumber&&(b+=" ln:"+a.lineNumber);else try{b=""+a}catch(d){b="[Unknown Error]"}this.write(b,!0)}},exTxt:function(a){return!a?"Unknown Error":a.message?a.message:a.description?a.description:a.toString()},write:function(a,c){if(this.enabled)try{null==this.dbgWin&&(this.dbgWin=window.open("","debug","scrollbars=1,height=900,width=900")),gx.dom.write(a+"<BR>",
this.dbgWin.document)}catch(g){}window.console&&(c?console.error(a):console.log(a))},writeT:function(a){var c=new Date,g=c.getTime(),b=this.lastTime;0<this.lastTime&&(b=(g-this.lastTime)/1E3);this.lastTime=g;a=c.toString()+" (+"+b+"seg): "+a;this.write(a)},logPerf:function(a,c){if(this.performance)if(void 0===this.hshTimes[a])this.hshTimes[a]=(new Date).getTime();else{var g=((new Date).getTime()-this.hshTimes[a])/1E3;delete this.hshTimes[a];0<g&&this.performanceLog.push((void 0==c?a:c)+":("+g+"seg)")}},
printPerformanceLog:function(){if(this.performance){for(msg in this.performanceLog)"string"==typeof this.performanceLog[msg]&&(this.outputFunc&&this.outputFunc(this.performanceLog[msg]),this.write(this.performanceLog[msg]));this.performanceLog=[]}}},http:function(){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,
lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(a,c){return"{"!=c[0]&&200==a.status&&0!=a.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+a.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(a,c,g){null!=gx.dom.el(a)?gx.fn.setControlValue_impl(a,c):g&&(gx.dom.createInput(a,"hidden"),gx.fn.setControlValue_impl(a,c))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart",
"",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;j(gx.dom.el("GXState")).val("{}")},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var a=gx.dom.el("GXState");if(a){var c=a=a.value;this.useBase64State&&(c=gx.base64.decode(a));this.viewState=gx.json.evalJSON(c);this.viewStateLoaded=!0}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var c=gx.json.serializeJson(this.viewState,a),a=c;this.useBase64State&&
(a=gx.base64.encode(c));c=gx.dom.el("GXState");null==c?gx.dom.createInput("GXState","hidden"):this.oldState=c.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,c=0;c<a;c++)gx.http.setObjectHsh(gx.pO.WebComponents[c]);gx.http.setObjectHsh(gx.pO)},
setObjectHsh:function(a){var c=a.getControlIdsh();if(null!=c){var g="";a.IsComponent&&null!=a.CmpContext&&(g=a.CmpContext);for(var b="",d=0;d<c.length;d++)if((validStruct=a.getValidStruct(c[d]))&&"function"==typeof validStruct.val)var f=gx.fn.getControlValue_impl(g+validStruct.fld),b="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?b+validStruct.val():b+f;gx.http.createHsh(g+"GXHSH11",b)}},createHsh:function(a,c){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");var g=gx.MD5.getHsh(c);gx.fn.setControlValue_impl(a,
g)},refreshState:function(){null!=this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(a){for(var a=a+"=",c=document.cookie.split(";"),g=c.length,b=0;b<g;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null},setCookie:function(a,c,g){g=g||1;g=new Date((new Date).getTime()+864E5*g);document.cookie=a+"="+escape(c)+"; expires="+g.toGMTString();return this.getCookie(a)==c},checkResponseStatus:function(a){return a.status==
this.STATUS_FORBIDDEN?!1:a.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(),!0):this.isBadResponse(a)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",a.status)),!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.warn&&gx.http.reloadOnTimeout(),!0):!1},isSessionTimeoutError:function(a,c){return!gx.gen.isDotNet()&&(c&&a&&gx.pO.AjaxSecurity)&&
a.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==c.name&&2147500037==c.result||"Error"==c.name&&-2146697209==c.number||"NETWORK_ERR"==c.name&&101==c.code)?!0:!1},reloadOnTimeout:function(){if(gx.pO.AjaxSecurity&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(a){""==document.location.hash?this.redirect(location.href,!1,a):document.location.reload()},redirect:function(a,c,g,b){b=b||gx.O;gx.evt.setProcessing(!0);var d=gx.popup.getPopup();
if(null!=d&&(d=d.window.gx.popup.lvl,-1!=d))var f=-1!=a.indexOf("?")?",":"?",f=f+encodeURIComponent("gxPopupLevel="+d+";"),a=a+f;gx.ajax.isabsoluteurl(a)||(a=gx.ajax.absoluteurl(a));c?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=b?b.endFeedback():gx.ajax.enableForm()},200);gx.spa.started&&!g?(gx.spa.redirect(a),gx.pO!=b?b.endFeedback():gx.ajax.enableForm()):location.href=a},getRequest:function(){var a=null;window.XMLHttpRequest&&(a=new XMLHttpRequest);if(!a)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=
new ActiveXObject("Microsoft.XMLHTTP")}catch(g){}}return a},postDataFormat:{HTTP:0,JSON:1},getPostData:function(a,c){var c=c||gx.http.postDataFormat.HTTP,g=c==gx.http.postDataFormat.HTTP?[]:{};if(a.reqData)g=a.reqData;else for(var b=a.formNode,b="Form"==b.tagName?b.elements:j("input[type!=file],textarea,select"),d=b.length,f=0;f<d;f++){var o=gx.http.elementPostData(b[f],c);null!=o&&(c==gx.http.postDataFormat.HTTP?g.push(o):g[o[0]]=o[1])}gx.lang.isArray(g)&&c==gx.http.postDataFormat.HTTP&&(g=g.join("&")+
"&");return g},elementPostData:function(a,c){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var g="";if("select-multiple"==a.type)for(var b=a.options.length,d=0;d<b;d++)a.options[d].selected&&(g=a.options[d].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)g=a.value;else{if("radio"==a.type)return null}else g="image"===a.type?a.src:this.element_gxvalue(a);return c==gx.http.postDataFormat.HTTP?encodeURIComponent(a.name)+"="+encodeURIComponent(g):[a.name,g]},element_gxvalue:function(a){return a.gxtype&&
"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,dt.HasDatePart=0<a.gxtype.len,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,c){a.readyState==this.STATE_DONE&&(gx.evt.setReady(!1),gx.evt.setProcessing(!1,!gx.csv.validating),a.status==this.STATUS_OK||c.handleAllStatusCodes?this.doCallHandler(a,c):gx.http.checkResponseStatus(a)||gx.lang.doCallTimeout(gx.dom.write,document,[a.responseText],50),c.always&&c.always.call(c.obj||
window,a,c),window.gx&&(gx.evt.setReady(!0),gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog()))},onRequestError:function(a,c){c.error&&c.error.call(c.obj||window,a,c);c.always&&c.always.call(c.obj||window,a,c);gx.evt.setProcessing(!1,!gx.csv.validating);a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a):this.isBadResponse(a)&&gx.http.reloadOnTimeout()},isBadResponse:function(a){return a.status==this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?!0:!1},doCall:function(a){gx.util.alert.hide();
!a.handler&&"function"==typeof a.load&&(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var c=this.getRequest();if(null!=c){if("function"==typeof a.handler&&!a.sync){var g=gx.http.doHandleRequest.closure(this,[c,a]),b=gx.http.onRequestError.closure(this,[c,a]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?c.onreadystatechange=g:(c.onload=g,c.onerror=b)}g=null;"POST"==a.method&&(g=gx.http.getPostData(a));
b=!1!==a.avoidCache?this.uncache(a.url):a.url;c.open(a.method,b,!a.sync);!1!==a.ajaxHeader&&c.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&c.setRequestHeader("Content-Type",a.contentType?a.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&(gx.AjaxSecurity&&gx.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&c.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(c,a.gxO);a.beforeSend&&a.beforeSend.call(a.obj||window,c);try{c.send(g)}catch(d){gx.dbg.logEx(d,
"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(c,a);return c}}return null},doCallHandler:function(a,c){c.obj?c.handler.call(c.obj,null,a.responseText,a):c.handler(null,a.responseText,a);if(window.gx&&"function"===typeof c.onReady)c.onReady()},doMultipartPost:function(a){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=a;var c=a.formNode;a.oldAction=c.getAttribute("action");c.setAttribute("action",a.url);a.oldTarget=c.getAttribute("target");c.setAttribute("target",
this.iframeName);a.reqData&&(gx.http.saveHidden("GXAjaxMultipart",a.reqData,!0),this.setSecurityToken(null,a.gxO));c.submit()},setSecurityToken:function(a,c){var g=gx.ajax.getSecurityToken(c);g&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",g.value,!0):a.setRequestHeader("X-GXAUTH-TOKEN",g.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var a=
this.iframeName,c=gx.dom.el(a);c&&c.frameElement&&(c=c.frameElement);c||(c=document.createElement("div"),c.innerHTML='<iframe name="'+a+'" src="about:blank">',document.body.appendChild(c),c=c.firstChild,document.body.appendChild(c),window[a]=c,c.name=a,c.setAttribute("name",a),c.id=a,c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.height="1px",c.style.width="1px",c.style.visibility="hidden");gx.evt.attach(c,this.iFrameloadEventName(),gx.http.iframeOnload);return c},iframeOnload:function(){var a=
gx.dom.el(gx.http.iframeName);if(!(gx.http.useReadyStateEvent()&&"complete"!=a.readyState)&&(gx.evt.setProcessing(!1,!gx.csv.validating),a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&(a=a.frameElement),a)){gx.http.useReadyStateEvent()&&(a.src="about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var c=a.gxPostInfo,g=c.formNode;g.setAttribute("action",c.oldAction);g.setAttribute("target",c.oldTarget);if(a=a.contentDocument?a.contentDocument:a.contentWindow.document)g=
a.body,gx.dom.allChildrenAreText(g)?(a=gx.base64.decode(gx.http.multipartResponse(g)),gx.http.clearMultipartHidden(),c.handler(null,a,c)):document.write(a.documentElement.innerHTML)}},multipartResponse:function(a){try{for(var c=a.childNodes[0];"#text"!=c.nodeName;)c=c.childNodes[0];var g=c.nodeValue;if(!gx.util.browser.isIE())for(c=c.nextSibling;c;)g+=c.nodeValue,c=c.nextSibling;return g}catch(b){return gx.dbg.logEx(b,"gxapi.js","multipartResponse"),""}},uncache:function(a){var c=(new Date).getTime(),
g=a.indexOf("?");return a+(0<g?g<a.length-1?",":"":"?")+"gx-no-cache="+c},callBackend_simple:function(a,c,g,b,d,f,j,m){gx.http.callBackend_impl(void 0,a,c,gx.http.modes.none,g,b,d,f,j,m)},callBackend:function(a,c,g,b,d,f,j,m,k,q,t){gx.http.callBackend_impl(a,c,b,d,f,j,m,k,q,t)},callBackend_impl:function(a,c,g,b,d,f,j,m,k,q){var t=this.getRequest(),q=q||{};if(t){try{var s=gx.O;d||s.startFeedback();f="undefined"!=typeof f?f:"GET";j="undefined"!=typeof j?j:null;k="undefined"!=typeof k?k:!1;m||(c=this.uncache(c));
t.open(f,c,k);t.setRequestHeader(gx.ajax.reqHeader,"2");for(var r in q)t.setRequestHeader(r,q[r]);"POST"==f?t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&(gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&t.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);t.send(j);d||s.endFeedback();this.lastStatus=t.status;this.lastResponse=t.responseText}catch(v){window.status="GXAjax HTTP error: "+v.message}window.status="";if(t.readyState!=
this.STATE_DONE||t.status!=this.STATUS_OK)gx.http.checkResponseStatus(t)||(window.status="GXAjax HTTP error: ("+t.status+") - "+t.statusText,gx.dbg.logEx(t.responseText));else if(b!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(b==this.modes.full)this.handleFull(this.lastResponse);else if(b==this.modes.call)return this.handleCall(this.lastResponse,a);return this.handleRetVal(this.lastResponse,a,g)}catch(u){gx.dbg.logEx(u,
"gxapi.js","callBackend")}}else window.status="GXAjax HTTP error: (bad response format)"}},handleFull:function(a){gx.http.postHandler(null,a,{status:200,responseText:""})},handleCall:function(a,c){if(c){var g=j.parseJSON(a);if(gx.lang.isArray(g))return c(g);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}},handleRetVal:function(a,c,g){this.lastStatus=gx.json.evalJSON(a)[1];void 0==this.lastStatus&&(this.lastStatus=0);if(c&&(g||null==this.lastStatus||
0==this.lastStatus)){g=j.parseJSON(a);if(gx.lang.isArray(g))return c(g);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}},postHandler:function(a,c,g,b){try{if(gx.evt.enter=!1,gx.csv.lastEvtResponse=null,200>g.status||299<g.status)gx.dom.write(g.responseText);else if(gx.http.validJsonResponse(g,c)){var d=gx.json.evalJSON(c);null==d?gx.dom.write(c.toString()):(gx.http.refreshState(),gx.csv.lastEvtResponse=d,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(d,
gx.O,b)||gx.fx.obs.notify("gx.onafterevent",[d]))}}catch(f){gx.dbg.logEx(f,"gxapi.js","postHandler")}},formatLink:function(a,c){a=gx.ajax.objectUrl(a);if(c&&0<c.length)for(var a=a+"?",g=c.length,b=0;b<g;b++)0<b&&(a+=","),a+=encodeURIComponent("function"==typeof c[b].getUrlVal?c[b].getUrlVal():c[b]);return a},loadScripts:function(a,c,g){"undefined"==typeof g&&(g=0);g>=a.length?c():gx.http.loadScript(a[g],function(a,c,g){gx.http.loadScripts(a,c,g+1)}.closure(this,[a,c,g]))},loadScript:function(a,c){var g=
gx.dom.byTag("head")[0],b=document.createElement("script");b.type="text/javascript";b.src=a;"function"==typeof c&&(b.addEventListener?gx.evt.attach(b,["load","error"],c,{userCapture:!1}):b.onreadystatechange=function(){("loaded"==b.readyState||"complete"==b.readyState)&&c()});g.appendChild(b)},loadStyle:function(a,c,g,b){if(b=b?gx.dom.el(b):null)b.href=a;else{var d=gx.dom.byTag("head")[0],b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=a;"function"==typeof c&&(b.onload=
c);g?(a=gx.getThemeElement(),j(b).insertBefore(a),gx.util.browser.isIE()&&j(a).insertAfter(b)):d.appendChild(b)}},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var c=0;c<a.length;c++){var g=a[c];(new gx.util.Url(g)).isRelative()&&(g=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+g,!1));gx.cache.fileLoaded(g)||(gx.cache.addRemoteFile(g),this.loadStyle(g))}},doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||gx.ajax.dispatchCommands(a)}}}(),
stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},storage:function(a){this._store=window.sessionStorage;this._prefix=a;this.supported=!1;this.set_string=function(a,c){this.supported&&(this._store[this._prefix+a]=c)};this.get_string=function(a){return this.supported?this._store[this._prefix+a]:null};this.set=function(a,c){this.set_string(a,gx.json.serializeJson(c))};
this.get=function(a){return(a=this.get_string(a))?gx.json.evalJSON(a):null};this.remove=function(a){this.supported&&this._store.removeItem(this._prefix+a)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(c){gx.http.setCookie("GXLocalStorageSupport","false",1)}},_setBasePath:function(){for(var a=gx.dom.scripts(),c=null,g=0,b=a.length;g<b;g++)if(0<=a[g].indexOf("gxgral.js")||0<=
a[g].indexOf("gxapiSD.js")){c=a[g];break}a="";if(!gx.ajax.isRelativeToHost(c)||gx.ajax.isabsoluteurl(c))g=location.pathname.lastIndexOf("/"),a=1<g?location.pathname.substring(1,g):"";else{var c=c.split("/"),d=location.pathname.split("/");c.splice(c.length-1,1);d.splice(d.length-1,1);g=0;for(b=d.length;g<b;g++)if(d[g]==c[g]||void 0===c[g])a=a+(""==a?"":"/")+d[g];else break}gx.basePath=a},objectLoad:function(a,c){var g=j.Deferred(),b=gx.dom.fixes;if(!gx.evt.execLoad)return g.resolve(),g.promise();void 0===
gx.runtimeTemplates&&(gx.runtimeTemplates=0<j("div[data-abstract-form]").length);gx.plugdesign.init().done(function(){var d=true;gx.fx.obs.notify("gx.onready");if(typeof gx.StorageTimeZone!="undefined"&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var f=jstz.determine().name();!gx.lang.emptyObject(f)&&(gx.http.getCookie("GxTZOffset")!=f&&gx.http.setCookie("GxTZOffset",f,30))&&gx.http.reload()}gx.sec.loadKey();gx.setTheme();gx.fx.obs.addObserver("webcom.render",this,function(a){if(a=a.getContainer()){gx.setTheme(a);
d||gx.plugdesign.applyTemplateObject("#"+a.id)}});gx.fx.obs.addObserver("grid.onafterrender",this,function(a){a.ownerGrid.parentGrid||b.fixTableResets(a.container)});b.fixChromeFocus();delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();b.createLegacyNotification();gx.cache._init();gx.fn.installComponents(true,c);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,false);gx.fn.objectOnload();gx.dom.indexElements();gx.fn.doAttachs();
document.gxReadyState="complete";gx.util.autoRefresh.install();gx.fn.setOpacity("reset","body");gx.evt.setProcessing(false);gx.fx.obs.notify("gx.onload");gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();gx.evt.setReady(true);gx.evt.userReadyCnt=0;d=false;g.resolve()});return g.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(a);
gx._deinit();j(document).off("keydown keypress keyup")},_init:function(){gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.base64._init();gx.sec._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.popup._init();gx.geolocation._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&
gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],c=gx.dom.form().elements,g=0,b=c.length;g<b;g++)gx.dom.purgeElement(c[g],a);c=gx.dom.byTag("span");g=0;for(b=c.length;g<b;g++)gx.dom.purgeElement(c[g],a);c=gx.dom.byTag("img");g=0;for(b=c.length;g<b;g++)gx.dom.purgeElement(c[g],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);
gx.objectUnload(a);gx._init()}}}(jQuery);
gx.plugdesign=function(j){var f={},d=!1,b,a,c=1;return{init:function(){return gx.plugdesign.applyTemplateObject()},getDOMContext:function(a,c,b,d,f){var m,k,q,c={};c.text=j(a).text();m=0;for(q=a.attributes.length;m<q;m++)k=a.attributes[m],c[k.name]=k.value;c.el=a;b&&(c.outerHTML=a.outerHTML);d&&(c.innerHTML=a.innerHTML);f&&(c=f.call(this,c,a)||c);return c},assingUserAPI:function(a,c){c.fnc_isRO=a.fnc_isRO},getElements:function(a,c,b){var d=c instanceof j;"function"==typeof a.selector?a=a.selector(d||
!c?"":c):(a=c&&!d&&!a.global?c+" "+a.selector:a.selector,a=j(a));d&&(a=c.find(a));return b?a.not(b):a},applyTemplateOnElement:function(a,c){if("string"==typeof a&&(a=f[a],!a))return;var b=gx.plugdesign.getDOMContext(c,b,a.outerHTML,a.innerHTML,a.setContext);a.apply(c,b);a.initialize&&a.initialize(b);if(a.listeners){var d,o,m=a.listeners,k="function"==typeof m.control?m.control(b):m.control,q=gx.fn.controlGridId(j(c).attr("data-gx-enabled-id")||k);m.before&&(o=function(c){if((c.control.id==k||"INPUT"==
c.control.tagName&&"radio"==c.control.type&&c.control.name==k)&&"function"==typeof m.before[c.property]){var b=!0===m.before[c.property].call(a,c.control,c.value);c.cancel=b}},gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,o));m.after&&(d=function(c){var d=typeof m.control=="function"?m.control(b):m.control;(c.control.id==d||c.control.tagName=="INPUT"&&c.control.type=="radio"&&c.control.name==d)&&typeof m.after[c.property]=="function"&&m.after[c.property].call(a,c.control,c.value)},
gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,d));if(q&&(d||o))(q=gx.fn.getGridObj(q))&&q.grid.beforeRenderCallbacks.push(function(){d&&gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,d);o&&gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,o)}.closure(this))}},applyTemplateSelection:function(a,c,b){this.getElements(a,c,b).each(function(c,b){b&&gx.plugdesign.applyTemplateOnElement(a,b)})},applyClassMapOnElement:function(a,c){var b;b=gx.plugdesign.getDOMContext(c,
b,!1,!1,a.setContext);if(a.first){var d=j(c).attr("class")||"";j(c).attr("class",a.cssClass+" "+d.replace(a.cssClass,""))}else gx.dom.addClass(c,a.cssClass);a.initialize&&a.initialize(b)},applyClassSelection:function(a,c,b){this.getElements(a,c,b).each(function(c,b){b&&(gx.plugdesign.applyClassMapOnElement(a,b),gx.plugdesign.assingUserAPI(a,b),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,function(c){"Class"==c.property&&j(c.control).is(a.selector)&&gx.plugdesign.applyClassMapOnElement(a,
c.control)}))})},applyControlValue:function(a,c){gx.fn.setControlValue(a.id,c);gx.html.onchange(a,c)},applyTemplates:function(a,b,d){j.each(a,function(a,g){"string"==typeof g?g=f[g]:(g.name=g.name||"auto-generated-"+c++,g=new gx.plugdesign.Template(g));gx.plugdesign.applyTemplateSelection(g,b,d)})},applyClassMaps:function(a,c,b){j.each(a,function(a,g){gx.plugdesign.applyClassSelection(g,c,b)})},applyTemplateObject:function(c,f){var n=j.Deferred();if(!gx.runtimeTemplates)return n.resolve().promise();
d?(this.applyTemplates(b,c,f),this.applyClassMaps(a,c,f),n.resolve()):gx.http.doCall({avoidCache:!1,sync:!0,method:"GET",url:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxtemplate.json",!1),handler:function(l,o){var m=gx.json.evalJSON(o);m.css&&j.each(m.css,function(a,c){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c,!1),!1,!0)});var k=[];m.js&&j.each(m.js,function(a,c){k.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c,!1))});var q=jQuery;jQuery=gx.$;gx.http.loadScripts(k,
function(){d=!0;b=m.templates||[];a=m.class_maps||[];this.applyTemplates(b,c,f);this.applyClassMaps(a,c,f);jQuery=q;n.resolve()}.closure(this))},obj:this});return n.promise()},Template:function(){var a=function(a){var c,b=[],a=a||{};if(a.name){if(a.selector){if(a.listeners){var g=a.listeners;if(!g.control&&(g.before||g.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",!0);return}}this.preProcessTemplate=function(a){var c=this.template,g=/\{\{\$(\w+)\$\}\}/g,
d,f=0;for(b=[];null!==(d=g.exec(c));)b[f]=d[1],a[b[f]]&&(c=c.replace(d[0],'<span id="hook_'+f+'"></span>')),f++;return c};this.getTemplate=function(a){return this.preProcessTemplate(a)};this.postProcessTemplate=function(a){var c,g,d,f;if(b){c=0;for(g=b.length;c<g;c++)d=a[b[c]],f=j("#hook_"+c),d?f.replaceWith(d):f.remove()}};this.apply=function(a,b){var g;!c&&this.template&&(c=Mustache.compile(this.preProcessTemplate(b)));c&&(g=c(b),"inner"==this.applyTo?a.innerHTML=g:j(a).replaceWith(g),this.postProcessTemplate(b))};
gx.lang.apply(this,a);f[a.name]=this;return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};a.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,listeners:{}};return a}()}}(gx.$);
gx.html=function(j){var f=/<style[^>]*>([\s\S]*?)<\/style>/i,d=RegExp("<style[^>]*>([\\s\\S]*?)</style>","ig"),b=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,a=RegExp("<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>","ig"),c=/<script([^>]*)>([\s\S]*?)<\/script>/i,g=RegExp("<script([^>]*)>([\\s\\S]*?)<\/script>","ig"),p=/href=(['"]?)([^'">]*)\1/i,n=/id=(['"]?)([^'">]*)\1/i,l=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,o=/src=(['"]?)([^"']*)\1/i;return{encodeCaseFormat:function(a,c,b){c==gx.html.controls.formats.TEXT?
a=gx.html.encode(a,!1,b):c==gx.html.controls.formats.TEXT_W_SPACES&&(a=gx.html.encode(a,!0,b));return a},encode:function(a,c,b){var g=["<",">","&"],d=["&lt;","&gt;","&amp;"];c&&(g.push(" "),d.push("&nbsp;"));b&&(g.push("\n"),d.push("<br/>"));return gx.text.charReplace(a,g,d)},getHidden:function(a,c){return'<input type="hidden" id="'+a+'" name="'+a+'" value="'+c+'">'},viewportWidth:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientWidth,document.body.clientWidth):
document.body.clientWidth},viewportHeight:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(c,b){(void 0===b||b)&&(c=c.replace(d,""));c=c.replace(a,"");return c=c.replace(g,"")},setOuterHtml:function(a,c){a.outerHTML=c},setInnerHtml:function(a,c,b,g,d){var f=gx.dom.styles();gx.dom.shouldPurge()&&gx.dom.purge(a,!0);var p=a.children[0];!p&&g&&(p=document.createElement("div"),gx.dom.addClass(p,
gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME),gx.dom.addClass(p,"Form-fx"),a.appendChild(p));g&&gx.pO.fullAjax&&p&&gx.dom.hasClass(p,gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME)&&!gx.dom.hasClass(a,"transitioning")?(a=document.createElement("div"),a.innerHTML=this.cleanHtmlRefs(c,d),gx.dom.replaceWithFx(p,a.children[0])):j(a).html(this.cleanHtmlRefs(c,d));gx.util.browser.isIE()&&gx.cache.updateStyles(f,gx.dom.styles());!0==b&&this.processCode(c,!1)},setInnerText:function(a,c,b,g){var d=j(a);null!=a.nodeValue?
a.nodeValue=c:!gx.util.browser.isChrome()&&null!=a.innerText?a.innerText=c:gx.util.browser.isFirefox()||gx.util.browser.isChrome()?d.html(gx.html.encodeCaseFormat(c,b,g)):"TEXT"==a.tagName&&null!=a.innerHTML?d.html(c):d.html("<text>"+c+"</text>")},nodesFromText:function(a){var c=document.createElement("div");c.style.visibility="hidden";c.style.display="none";document.body.appendChild(c);gx.dom.shouldPurge()&&gx.dom.purge(c,!0);c.innerHTML=a;for(var a=[],b=c.childNodes.length,g=0;g<b;g++)a.push(c.childNodes[g].cloneNode(!0));
gx.dom.removeControlSafe(c);return a},onTypeAvailable:function(a,c,b){try{eval(a),b instanceof Array?c.apply(this,b):c()}catch(g){setTimeout(function(){gx.html.onTypeAvailable(a,c,b)},250)}},processCode:function(a,g,d,j,s,r){var v=a,u=[],x=!1,y=[],B=[],A=[];if(""!=a){var z=[];if(void 0===r||r)for(;z;){if(z=a.match(f))(r=z.lastIndex)||(r=z.index+z[0].length),a=a.substring(r);else break;A.push(z[1])}a=v;for(z=[];z;){if(z=a.match(b))(r=z.lastIndex)||(r=z.index+z[0].length),a=a.substring(r);else break;
r=z[1].match(p);idAttr=z[1].match(n);r&&!gx.cache.fileLoaded(r[2])&&(B.push({href:r[2],id:idAttr&&2<idAttr.length?idAttr[2]:null}),gx.cache.addRemoteFile(r[2]))}a=v;for(z=[];z;){if(z=a.match(c))(r=z.lastIndex)||(r=z.index+z[0].length),a=a.substring(r);else break;void 0!=z[1]&&""!=z[1]?(r=z[1].match(l),null==r&&(r=z[1].match(o)),r&&!gx.cache.fileLoaded(r[2])?(v=r[2],gx.lang.emptyObject(r[3])||(v+="?"+r[3]),u.push(v),gx.cache.addRemoteFile(r[2])):r&&gx.cache.fileLoaded(r[2])?x=!0:!r&&z[2]&&y.push(z[2])):
z[2]&&y.push(z[2])}if(!0!=g){z="";g=y.length;for(a=0;a<g;a++)z+=y[a];""!=z&&gx.lang.doEval(z);var w=[];if("function"==typeof d)gx.http.loadScripts(u,function(a,c){c instanceof Array?a.apply(this,c):a()}.closure(this,[d,j]));else{y={method:"GET",useCash:!0};y.load=function(a,c){gx.lang.supEval(this,w.push(c))}.closure(this);y.mimetype="text/plain";y.sync=!0;for(var C=u.length,a=0;a<C;a++)y.url=u[a],gx.http.doCall(y)}z="";g=w.length;for(a=0;a<g;a++)z+=w[a];""!=z&&gx.lang.doEval(z);u=document.getElementsByTagName("style");
g=B.length;for(a=0;a<g;a++){y=!1;z=u.length;for(v=0;v<z;v++)if(u[a]&&B[a].href==(u[v].styleSheet&&u[v].styleSheet.cssText?u[v].styleSheet.cssText:u[v].innerHTML))y=!0;y||((y=gx.dom.el(B[a].id))?y.href=B[a].href:gx.http.loadStyle(B[a].href,gx.emptyFn,!1,B[a].id))}z="";g=A.length;for(a=0;a<g;a++)z+=A[a];""!=z&&(B=document.createElement("style"),B.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(B),B.styleSheet?B.styleSheet.cssText=z:(A=document.createTextNode(z),
B.appendChild(A)));if(0==C&&"function"==typeof d)if(x&&s)gx.html.onTypeAvailable(s,d,j);else j instanceof Array?d.apply(this,j):d()}}},getFieldLabel:function(a,c){var b,g=a.id;"INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName?b=a.id:"SPAN"==a.tagName&&(b=j(a).attr("data-gx-enabled-id"),!b&&0===g.indexOf("span_")&&(b=g.substring(5)));if(b)return j("label[for='"+b+"']",c).get(0)},multimediaUpload:{getInputFileEl:function(a){return j("#"+a+"[type='file']")[0]},resolveFileName:function(a,
c){return a||c||""},onOptionChange:function(a){var a=this.getElements(a),c=a.fileField,b=a.uriField;a.uriOption.checked?(gx.dom.removeClass(c,"field-selected"),gx.dom.addClass(b,"field-selected")):(gx.dom.removeClass(b,"field-selected"),gx.dom.addClass(c,"field-selected"))},imageLoadHandler:function(a,c){var b=function(a){var c="IMG"==a.tagName?"src":"href";return!a[c]||a[c]==document.location.href||"/"==a[c].charAt(a[c].length-1)};!a||b(a)?gx.dom.addClass(c,"gx-multimedia-empty"):gx.dom.removeClass(c,
"gx-multimedia-empty");c&&!b(c)&&gx.dom.removeClass(c,"gx-multimedia-empty");if(gx.util.browser.isIE()&&(a&&"IMG"==a.tagName)&&(b=parseInt(gx.dom.getComputedStyle(a).maxWidth),b<a.width&&(a.style.height=gx.dom.addUnits(b*a.height/a.width),a.style.width=gx.dom.addUnits(b)),b=parseInt(gx.dom.getComputedStyle(a).maxHeight),b<a.height))a.style.width=gx.dom.addUnits(b*a.width/a.height),a.style.height=gx.dom.addUnits(b)},dialogCloseHandler:function(a,c){var b=this.getElements(a);c.style.display="none";
a.appendChild(c);b.uriOption.checked?this.refreshPreviewImg(a,b.uriField):this.refreshPreviewImg(a,b.fileField);b.action.focus()},actionClickHandler:function(a,c){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var b=this.getElements(c),g=b.button;b.fieldsCt.style.display="block";var d=130,f=500,p=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(c.style.position="static",b.fileField.style.marginTop="0",b.uriField.style.marginTop="0",d=230);gx.runtimeTemplates&&(p=!1,j(window).width()<
f&&(f=j(window).width()-20,d=170));d=gx.popup.openDialog({parentElement:c,w:f,h:d,contentHtml:b.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:p,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[c,b.fieldsCt,g])}});b.fileOption.focus();gx.evt.attach(g,"click",d.close,d,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(a,c){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var b=this.getElements(c);
b.uriField.value="";b.fileField.value="";b.uriOption.checked=!1;b.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[c]);this.refreshPreviewImg(c,b.fileField)},keypressHandler:function(a){13==a.event.keyCode&&(a.cancel=!0,gx.popup.currentPopup.close(),gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler))},tapHandler:function(a){this.getElements(a).action.focus()},getElements:function(a){var a=gx.dom.el(a),c=j(a),a=c.find(".change-action")[0],b=c.find(".clear-action")[0],g=
null,d=j(b).next()[0],c=c.find(".fields-ct");"A"==d.tagName?(g=d,d=d.firstChild):"IMG"!=d.tagName&&(d=null);return{previewLink:g,action:a,clearAction:b,previewImg:d,fieldsCt:c[0],uriField:c.find("input[type='text']")[0],fileField:c.find("input[type='file']")[0],uriOption:c.find("input[type='radio'][value='uri']")[0],fileOption:c.find("input[type='radio'][value='file']")[0],button:c.find("input[type='button']")[0]}},getContainer:function(a){for(a=gx.dom.el(a);a;){if(gx.dom.hasClass(a,"gx-multimedia-upload"))return a;
a=a.parentNode}return null},setPreviewImage:function(a,c){var a=gx.dom.el(a),b=this.getElements(a);b.previewImg&&("IMG"==b.previewImg.tagName&&(b.previewImg.src=c),this.imageLoadHandler(b.previewImg,b.previewLink))},setPreviewLink:function(a,c){var a=gx.dom.el(a),b=this.getElements(a);b.previewLink&&(c&&(!b.previewImg||"IMG"!=b.previewImg.tagName)?b.previewLink.href=c:b.previewLink.removeAttribute("href"));this.imageLoadHandler(b.previewImg,b.previewLink)},refreshPreviewImg:function(a,c){var a=gx.dom.el(a),
b=this.getElements(a);if(b.previewImg&&"INPUT"==c.tagName){if(c==b.fileField){var g;if(c.files&&(g=c.files[0]))if(g.type.match(/image.*/)){var d=new FileReader;d.onload=function(a,c,b){c.src=a.target.result;b.href=""}.closure(this,[b.previewImg,b.previewLink],!0);d.readAsDataURL(g)}else b.previewLink.href="#";if(!g&&"1"==c.getAttribute("gxctrlchanged")||c.gxctrldeleted)b.previewImg.src="",b.previewLink.href=""}else c==b.uriField&&(b.previewImg.src=c.value,b.previewLink.href=c.value);this.imageLoadHandler(b.previewImg,
b.previewLink)}},setType:function(a,c){var a=gx.dom.el(a),b=this.getElements(a);b.fileOption.checked=c;b.uriOption.checked=!c;c&&(b.uriField.value="");this.onOptionChange(a)},getOptionValue:function(a){a=gx.dom.el(a);return this.getElements(a).fileOption.checked?"file":"uri"},createControl:function(a){a=gx.dom.el(a);if(!a._created){a._created=!0;var c=this.getElements(a);gx.dom.addClass(c.fileField,"field-selected");c.action.setAttribute("gxfocusable","1");var b=document.createElement("input");b.type=
"button";b.className="BtnEnter";b.value=gx.getMessage("GXM_uploadconfirmoption");c.fieldsCt.appendChild(b);var b=this.imageLoadHandler.closure(this,[c.previewImg,c.previewLink]),g=this.onOptionChange.closure(this,[a]);b();c.previewImg&&gx.evt.attach(c.previewImg,"load",b);g();gx.evt.attach(c.uriOption,"click",g);gx.evt.attach(c.fileOption,"click",g);gx.evt.attach(c.action,"click",this.actionClickHandler.closure(this,[a],!0));gx.evt.attach(c.clearAction,"click",this.clearActionHandler.closure(this,
[a],!0));gx.evt.attach(a,"touchstart",this.tapHandler.closure(this,[a]))}}},controls:function(){var a={},c={label:'<label class="gx-label {{className}}" {{additionalAtts}} for="{{relatedElement}}">{{caption}}</label>',"radio-horizontal":['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"gxoch0="{{gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>',
"{{/values}}","</span>"],"radio-vertical":'<table class="{{className}}" style="{{style}}">;{{#values}};<tr>;<td>;<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"gxoch0="{{gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>;</td>;</tr>;{{/values}};</table>'.split(";")},b=function(b,g){var d;a[b]||(d=gx.lang.isArray(c[b])?c[b].join(""):c[b],a[b]=Mustache.compile(d));
return a[b](g)};return{applyTemplate:b,types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(a){return"combo"==a||"dyncombo"==a||"listbx"==a||"dynlistbx"==
a?!0:!1},eventJSCode:function(a,c,b,g,d){var f="";if(4==a&&b)f=b;else if(1==a)f="gx.fn.closeWindow();";else if(7==a)a="",g&&d&&(a=",'"+g.gridName+"','"+d.gxId+"'"),f="gx.evt.execCliEvt("+c+a+",this);";else if(6==a||5==a)f="gx.evt.execEvt("+c+",this,"+g.gridId+");";return f},startAnchor:function(a,c,b,g,d){""!=b?""!=c?a.append('<a href="javascript:if( '+b+") {"+c+'}">'):a.append('<a href="javascript:'+b+'">'):""!=c?a.append('<a href="javascript:'+c+'">'):""!=g&&(a.append('<a href="'+g+'"'),""!=d&&
a.append(' target="'+d+'"'),a.append(">"))},endAnchor:function(a,c,b,g){(""!=c||""!=b||""!=g)&&a.append("</a>")},onJSEvent_impl:function(a,c,b){var g=[];""!=b&&g.push('jsevent="'+b+'" ');g.push(a+'="if( ');""!=c?g.push("gx.evt.jsEvent(this)) {"+c+'} else return false;"'):g.push('!gx.evt.jsEvent(this)) return false;"');return g.join("")},onJSEvent:function(a,c,b,g){a.append(" ");a.append(this.onJSEvent_impl(c,b,g))},htmlControl:function(a,c,b,g,d){this.id=a||"";this.width=c||0;this.widthUnit="px";
this.height=b||0;this.heightUnit="px";this.cssClass=g||"";this.style=this.ownCssClass=this.roClass="";this.title=d||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(a){return this.buffer.append(a)};
this.tagAtt=function(a,c){return this.buffer.append(" "+a+'="'+c.toString().replace(/\"/g,"&quot;")+'"')};this.persistValue=function(){var a=this.grid.parentObject.GXValidFnc[this.column.gxId];!gx.lang.emptyNum(this.column.gxId)&&a&&(this._persistValue?this._persistValue():a.v2v&&a.v2v(this.value))};this.setIndividualProp=function(a,c){this[a]="enabled"==a||"visible"==a||"isPassword"==a||"autoComplete"==a||"hasJsLink"==a?gx.lang.gxBoolean(c):c};this.setGridData=function(a){this.grid=a.grid;this.row=
a.row;this.gridId=a.gridId;this.gridRow=a.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}}},singleLineEdit:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q,t,I,M,v,N,u,R,U,V,P,S,T,W,X,Y,Z,ca,ba,aa){this.id=a;this.inputType=I;this.step=M;this.title=p;this.placeholder=j;this.width=v;this.widthUnit=N;
this.height=17==u?0:u;this.heightUnit=R;this.maxLength=U;this.visible=0!=r;this.enabled=0!=q;this.rtEnabled=0!=t;this.isPassword=0!=V;this.format=P;this.link=d;this.linkTarget=f;this.style=m;this.cssClass=o;this.roClass=k;this.columnClass=s;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);if(ba&&(this.rtEnabled||this.enabled))c=aa;this.formattedValue=!gx.lang.emptyObject(c)?gx.html.encodeCaseFormat(c,P):this.applyPicture(gx.html.encodeCaseFormat(aa,P));this.extraAttributes=b;this.jsScrCode=
l;this.usrOnclick=n;this.eventName=g;this.parentId=S;this.hasTheme=T;this.autoComplete=0!=W;this.autoCorrection=0!=X;this.value=aa;this.domainName=Z};this.applyPicture=function(a){var c=this.vStruct;if(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(c.pic)&&!gx.lang.emptyObject(c.type))switch(c.type){case "int":return gx.num.formatNumber(a,c.dec,c.pic,c.len,c.sign,!0);case "decimal":return gx.num.formatNumber(a,c.dec,c.pic,c.len,c.sign,!0);case "char":return a;default:return a}else return a};this._getHtml=
function(){var a="",c="";0==this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?a=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");c=this.style;this.style+=!this.visible?";display:none;":"";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),
this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>");this.append("<input");if(!0==this.isPassword)this.tagAtt("type",
"password");else if(this.tagAtt("type",this.inputType),this.step&&("number"==this.inputType||"range"==this.inputType))this.tagAtt("step",this.step),"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"');this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(a);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",
this.placeholder);this.autoComplete||this.tagAtt("autocomplete","off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&("datetime"!=this.inputType&&"datetime-local"!=this.inputType)&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);a=this.style;""!=this.column.align&&(a+=";text-align:"+this.column.align);var b=!this.enabled&&this.rtEnabled?";display:none;":"",a=a+b;""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);
this.append(">");this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(a=this.grid.parentObject.getValidStructFld(this.id),void 0!=a.dp&&(0==a.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),b=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+b),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):
gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){b="";this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);b=this.hasTheme?0==this.parentId?""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass:""!=this.roClass&&0!=this.roClass.indexOf("Readonly")?"Readonly"+this.roClass:this.roClass:this.cssClass;a="";this.format!=gx.html.controls.formats.RAW_HTML&&(c+=!this.visible?";display:none;":"",this.append("<span"),this.append(this.extraAttributes),
""!=b&&this.tagAtt("class",b),""!=c&&this.tagAtt("style",c),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),this.append(">"),a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget));if(this.isPassword){c=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength);for(b=0;b<c;b++)this.append("*")}else this.append(this.formattedValue);
this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link),this.append("</span>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q,t,I,M,v,N,u){this.id=a;this.visible=0!=d;this.enabled=0!=f;
this.rtEnabled=0!=p;this.width=j;this.widthUnit=n;this.height=l;this.heightUnit=o;this.style=m;this.cssClass=k;this.columnClass=s;this.maxLength=r;this.extraAttributes=b;this.autoresize=0!=q;this.format=g;this.link=c;this.linkTarget=t;this.placeholder=I;this.value=u;this.autoCorrection=0!=M;this.domainName=N};this._getHtml=function(){this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||
this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>"),this.append("<textarea"),""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+
this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(this.value),
this.append("</textarea>");if(!this.enabled){var a=!this.visible?"display:none;":"";this.autoresize||(a+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")&&(this.cssClass="Readonly"+this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=a&&this.tagAtt("style",a);""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id","span_"+
this.id);this.append(">");gx.html.controls.startAnchor(this,"","",this.link,this.linkTarget);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,"","",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(a,c,b,g,d,f,p){this.base(a,c,b,g,d);this.type=gx.html.controls.types.blob;this.display=f||0;this.contentType=p||"text/html";this.parameters=this.url="";this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,I,
M,q,t,v,x,u,y,P,S,T,W,X,Y){this.id=a;this.value=c;this.contentType=b||"text/html";this.linkTarget=d;this.parameters=f;this.display=p;this.visible=0!=n;this.enabled=0!=j;this.alt=l;this.title=o;this.borderWidth=m;this.autoresize=0!=k;this.width=s;this.widthUnit=r;this.height=I;this.heightUnit=M;this.vSpace=q;this.hSpace=t;this.jsScrCode=v;this.usrOnclick=x;this.eventName=u;this.style=y;this.cssClass=P;this.columnClass=S;this.extraAttributes=T;this.extraDisplayAttributes=W;this.jsDynCode=X;this.url=
gx.util.resolveUrl(Y)};this._getHtml=function(){var a="";this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");""!=this.title&&this.tagAtt("title",this.title);this.append("><div>");var c=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(c){this.append("<img");this.tagAtt("alt",
this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0!=this.width&&!this.autoresize&&(this.style=this.style+"width:"+this.width+this.widthUnit+";");0!=this.height&&!this.autoresize&&(this.style=
this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);a=""!=this.cssClass?"BlobContent"+this.cssClass:this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a);this.tagAtt("class",a);this.append(this.extraDisplayAttributes);this.append(">");c?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+
"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</div><div>");if(this.enabled){var b="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");a=gx.dom.el(this.id);this.grid&&this.grid.parentObject.isTransaction()&&
a&&this.value===a.value?(c=this.id+"_hook",this.append("<div"),this.tagAtt("id",c),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:a,hookId:c})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(b+="display:none;"),0!=this.width&&(b=b+"width:"+this.width+";"),this.tagAtt("style",b),this.tagAtt("value",this.value),a=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,!this.enabled&&(""!=this.cssClass&&
0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a),this.tagAtt("class",a),c&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</div></div>")}},radio:function(a,c,g,d,f){this.base(a,c,g,d,f);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r){this.possibleValues=a.v||[];this.id=c;this.title=b;this.visible=0!=g;this.enabled=0!=d;this.columns=f;this.orientation=
p;this.style=j;this.cssClass=n;this.columnClass=l;this.jsScrCode=o;this.usrOnclick=m;this.eventName=k;this.extraAttributes=s;this.value=r};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));var a="gx-radio-button ",a=!this.enabled&&""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?a+("Readonly"+this.cssClass):a+this.cssClass,c=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":
";display:none;";this.append(b(1==this.orientation?"radio-vertical":"radio-horizontal",{id:this.id,className:a,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,gxoch0:gx.html.controls.onJSEvent_impl("gxoch0",c,this.usrOnclick),values:j.map(this.possibleValues,function(a,c){return{itemId:this.id+"_"+c,itemValue:a[0],itemDesc:a[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(a[0].toString())}}.closure(this))}))}},comboBox:function(a,c,b,
g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q,t,I,M,v,N,u,R){this.possibleValues=a.v||[];this.id=c;this.title=j;this.visible=0!=n;this.enabled=0!=l;this.rtEnabled=0!=o;this.rows=b;this.format=m;this.width=k;this.widthUnit=s;this.height=r;this.heightUnit=q;this.style=t;this.cssClass=I;this.columnClass=M;this.formattedValue=N;this.jsScrCode=d;this.usrOnclick=g;this.eventName=f;this.extraAttributes=
v;this.value=R};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var a=this.style+" ;overflow:hidden;";this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.enabled||this.rtEnabled){var c=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,
this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"gxoch0",c,this.usrOnclick);this.append(">");for(var c=this.possibleValues.length,
b=0;b<c;b++){var g=this.possibleValues[b];this.append("<option");this.tagAtt("value",g[0]);gx.text.trim(g[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(g[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);c="";c=""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass;a+=!this.visible?";display:none;":
"";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=c&&this.tagAtt("class",c);""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");c=this.possibleValues.length;for(b=0;b<c;b++)if(g=this.possibleValues[b],gx.text.trim(g[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(g[1]);break}this.append("</span>")}}},listBox:function(a,c,b,g,d,f){this.base(a,c,b,g,d);this.type=gx.html.controls.types.listBox;
this.rows=f},checkBox:function(a,c,b,g,d,f,p,j){this.base(a,c,b,g,d);this.type=gx.html.controls.types.checkBox;this.caption=f||"";this.checkedValue=p;this.uncheckedValue=j;this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m){this.id=a;this.title=c;this.visible=0!=g;this.enabled=0!=d;this.checkedValue=f;this.caption=p;this.style=j;this.cssClass=n;this.columnClass=l;this.extraAttributes=o;this.value=m;this.labelCaption=b};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),
this.checkedValue=gx.text.trim(this.checkedValue.toString()));var a=this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+this.cssClass);this.style+=this.visible?"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=a&&this.tagAtt("class",a);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?
(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);this.append(">");this.append(this.caption);this.append("</label>")}},imageReadOnly:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q,t,I,M,v,N,u,R,U,V,P,S,T){this.id=a;this.accessKey=
g;this.visible=0!=f;this.enabled=0!=p;this.alt=j;this.title=n;this.borderWidth=l;this.autoresize=0!=o;this.width=m;this.widthUnit=k;this.height=s;this.heightUnit=r;this.vSpace=q;this.hSpace=t;this.link=c;this.linkTarget=b;this.jsScrCode=I;this.usrOnclick=M;this.eventName=v;this.style=N;this.cssClass=u;this.columnClass=R;this.align=U;this.extraAttributes=V;this.useMap=P;this.jsDynCode=S;this.value=this.imageUrl=T};this._getHtml=function(){this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&
gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));var a=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=a&&(this.accessKey=a);this.style+=this.visible?"":";display:none;";a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);""!=a?(this.append("<input"),this.tagAtt("type","image"),this.tagAtt("src",this.value),this.tagAtt("name",this.id),gx.html.controls.onJSEvent(this,
"onclick",a+"return false;",this.usrOnclick)):(this.enabled&&""!=this.link&&gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget),this.append("<img"),this.tagAtt("src",this.value));this.enabled||this.append(" disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||
0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+this.borderWidth);this.tagAtt("alt",this.alt||this.title);""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",
this.useMap);this.extraAttributes&&this.append(this.extraAttributes);this.append(">");this.enabled&&(""!=this.link&&""==a)&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link)};this._persistValue=function(){this.grid.parentObject.GXValidFnc[this.column.gxId].v2v&&this.grid.parentObject.GXValidFnc[this.column.gxId].v2v(this.imageUrl)}},multimedia:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.multimedia;this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q,
t,I,M,v,N){this.id=a;this.display=0!=c;this.visible=0!=b;this.enabled=0!=g;this.autoresize=0!=d;this.width=f;this.widthUnit=p;this.height=j;this.heightUnit=n;this.jsScrCode=l;this.usrOnclick=o;this.eventName=m;this.style=k;this.cssClass=s;this.columnClass=r;this.extraInputAttributes=q;this.jsDynCode=I;this.readOnly=0!=M;this.isBlob=gx.lang.gxBoolean(v);this.multimediaUrl=N;this.value=gx.util.resolveUrl(N)};this.startMultimediaUploadControl=function(a,c,b,g){return['<div id="',a,'_ct" class="gx-multimedia-upload" style="',
(g||"")+(c?"":"display:none;"),'">'].join("")};this.endMultimediaUploadControl=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q){b=[];g=gx.html.multimediaUpload.getInputFileEl(this.id);d="checked";f="";p=a.match(/([\w]+)(_\d{4})$/);p=p[1]+"_GXI"+p[2];if(r||void 0===r)d="",f="checked",c="";r=['<div id="',a,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',a,'Option" type="radio" value="file" ',f,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',
a,'Option" type="radio" value="uri" ',d,"/>",gx.getMessage("GXM_uploadurioption"),"</label>",'<input type="text" class="field ',o,'" id="',p,'" name="',p,'" value="',c,'" ',k," />"];b.push(r.join(""));r=g?['<div id="',a,'_hook"></div>']:['<input type="file" class="field ',o,'" id="',a,'" name="',a,'" accept="',q,'" ',k,"/>"];b.push(r.join(""));r=["</div>","</div>"];b.push(r.join(""));return b.join("")};this.getPreviewHtml=function(){return['<a target="_blank"',this.value?' href="'+this.value+'"':
"",'><span id="',this.readOnly||!this.enabled?this.id:"",'" class="',this.cssClass?"Readonly"+this.cssClass:""," ",this.placeHolderClass,'" title="',gx.getMessage("GXM_multimediaalttext"),'"></span></a>'].join("")};this._getHtml=function(){!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),
this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&
(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}};this._persistValue=function(){this.grid.parentObject.GXValidFnc[this.column.gxId].v2v&&this.grid.parentObject.GXValidFnc[this.column.gxId].v2v(this.multimediaUrl)}},image:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(a,c,b,g,
d,f,p,j,n,l,o,m,k,s,r,q,t,I,M,v,N,u,R,U,V,P,S,T,W,X,Y,Z){this.id=a;this.accessKey=g;this.visible=0!=f;this.enabled=0!=p;this.alt=j;this.title=n;this.borderWidth=l;this.autoresize=0!=o;this.width=m;this.widthUnit=k;this.height=s;this.heightUnit=r;this.vSpace=q;this.hSpace=t;this.link=c;this.linkTarget=b;this.jsScrCode=I;this.usrOnclick=M;this.eventName=v;this.style=N;this.cssClass=u;this.columnClass=R;this.align=U;this.extraInputAttributes=V;this.extraImageAttributes=P;this.useMap=S;this.jsDynCode=
T;this.readOnly=0!=W;this.isBlob=gx.lang.gxBoolean(X);this.isAttribute=gx.lang.gxBoolean(Y);this.multimediaUrl=Z;this.value=gx.util.resolveUrl(Z);this.themeName=d;this.className=Y&&u?"Readonly"+u:u;a=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(a);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,
this.borderWidth,this.autoresize,this.width,this.heightUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,this.style,this.className,this.columnClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.value)};this.getPreviewHtml=function(){return['<a target="_blank"><img id="Object_',this.id,'" class="',this.cssClass?"Readonly"+this.cssClass:"",'" alt="',this.alt,'" src="',this.value,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};
this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());
this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}}},video:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.video;
this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},audio:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},textBlock:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.textBlock;this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k){this.id=a;this.visible=0!=l;this.enabled=0!=o;this.format=m;this.title=n;this.link=c;this.linkTarget=b;this.jsScrCode=j;this.usrOnclick=
g;this.eventName=d;this.extraAttributes=f;this.cssClass=p;this.value=gx.text.replaceAll(k,"�","'")};this._getHtml=function(){var a;this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(a=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,this.append("<div ")):(a=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),this.tagAtt("id",this.id),""!=this.cssClass&&this.tagAtt("class",this.cssClass),this.tagAtt("data-gxformat",
this.format),""!=a&&this.tagAtt("style",a),""!=this.title&&this.tagAtt("title",this.title),this.append(">"));a="";this.enabled?(a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget)):a="";this.append(gx.html.encodeCaseFormat(this.value,this.format));this.enabled&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):
this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1)}},label:function(a,c,g,d,f){this.base(a,c,g,d,f);this.type=gx.html.controls.types.label;this.setProperties=function(a,c,b,g){this.referencedEl=a;this.labelCaption=c;this.labelClass=b;this.addAttributes=0===g?"data-gx-sr-only":""};this._getHtml=function(){this.append(b("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,
relatedElement:this.referencedEl}))}},button:function(a,c,b,g,d,f){this.base(a,c,b,g,d);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=f||"rounded";this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q){this.reset=r;this.id=a;this.title=d;this.accessKey=f;this.style=p;this.cssClass=j;this.visible=0!=n;this.enabled=0!=l;this.buttonStyle=o;this.jsScrCode=g;this.usrOnclick=b;this.eventName=m+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=k;this.jsCode=
c;this.jsDynCode=s;this.caption=q};this._getHtml=function(){this.style+=this.visible?"":";display:none;";var a="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",a),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");a="button";1==this.reset?a="submit":0==this.reset&&
(a="reset");this.tagAtt("type",a);a=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==a&&(a=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=a&&(this.accessKey=a);this.tagAtt("name",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("gxevent",
this.eventName);this.enabled||this.append(" disabled");a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);a=this.jsCode+a;gx.html.controls.onJSEvent(this,"onclick",a+"return false;",this.usrOnclick);this.append(this.extraAttributes);this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=function(a){this.containerName=
a;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(a,c){this.id=this.containerName=a;this.visible=0!=c};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class","gx_usercontrol");this.append("></div>");
this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(a,c){this.parentName=a;this.containerName=c;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");
this.append(">")}},webComponent:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(a){this.controlName=a;var c=this.grid.parentObject.getComponentData(this.controlName),b=c.Prefix,a=this.grid.gxComponentContext+"gxHTMLWrp"+b+this.gridRow,g=gx.dom.el(a),d="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+b+this.gridRow);if(null!=g)c=a+"_hook",this.grid.addComponentToDraw({create:!1,
existingEl:c,el:a}),a=c;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(g=gx.csv.lastEvtResponse.gxComponents[a],gx.lang.emptyObject(g))d="";else{var d=gx.html.cleanHtmlRefs(g),f=gx.fn.getHidden(this.grid.gxComponentContext+b+this.gridRow);f||(f=c.GXClass);gx.lang.emptyObject(f)||this.grid.addComponentToDraw({load:!0,n:f.toLowerCase(),p:this.grid.gxComponentContext+b+this.gridRow,c:g})}this.id=a;this.content=d};this._getHtml=function(){this.append("<div");
this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o){this.id=a;this.value=c;this.visible=0!=b;this.width=g;this.widthUnit=d;this.height=f;this.heightUnit=p;this.borderStyle=j;this.align=n;this.title=
l;this.scrollbars=o};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",
this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o,m,k,s,r,q){this.id=a;this.visible=0!=c;this.cssClass=b;this.background=g;this.backColor=d;this.borderColor=f;this.align=p;this.title=j;this.borderWidth=n;this.cellPadding=
l;this.cellSpacing=o;this.height=m;this.width=k;this.rules=s;this.heightUnit=r;this.widthUnit=q;this.style=""};this._getHtml=function(){this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");if(""!=this.backColor){var a=parseInt(this.backColor),a=isNaN(a)?this.backColor:gx.color.html(a).Html;this.style=this.style+"background-color: "+
a+";"}""!=this.borderColor&&(a=parseInt(this.borderColor),a=isNaN(a)?this.borderColor:gx.color.html(a).Html,this.style=this.style+"border-color: "+a+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&
this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("data-cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">")}},row:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.row;
this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(a,c,b){c&&(this.cssClass=this.ownCssClass?c+(this.ownCssClass?" "+this.ownCssClass:""):c);this.style=b};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",
this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.cell;this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=
this.background=this.style="";this.setProperties=function(a,c){this.background=a;c&&""!=c&&0<c.indexOf("style=")&&(this.style=c.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+=
"background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(a,c,b,g,d){this.base(a,
c,b,g,d);this._getHtml=function(){this.append("<div");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||
""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},responsiveCell:function(a,c,b,g,d){this.base(a,c,b,g,d);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&
this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.group;this.caption=
"";this.setProperties=function(a,c,b,g,d,f,p,j,n){this.id=a;this.caption=c;this.visible=0!=b;this.width=g;this.widthUnit=d;this.height=f;this.heightUnit=p;this.cssClass=j;this.extraAtts=n};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var a="-moz-border-radius:3pt;";"0"!=this.width&&(a+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(a+="height: "+this.height+this.heightUnit+
";");this.visible||(a+="display:none;");this.tagAtt("style",a);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.div;this.setProperties=function(a,c,b,g,d,f,p,j,n,l,o){this.id=a;this.visible=0!=c;this.width=b;this.widthUnit=g;this.height=
d;this.heightUnit=f;this.cssClass=p;this.align=j;this.vAlign=n;this.extraAtts=l;this.extraStyle=o};this._getHtml=function(){var a=this.align&&"left"!=this.align.toLowerCase(),c=this.vAlign&&"top"!=this.vAlign.toLowerCase(),b=this.visible?"":";display:none;";""!=this.height&&(b=b+"height: "+this.height+this.heightUnit+";");""!=this.width&&(b=b+"width: "+this.width+this.widthUnit+";");b+=this.extraStyle;this.append("<div");this.id&&this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);
""!=b&&this.tagAtt("style",b);""!=this.extraAtts&&this.append(this.extraAtts);a&&this.tagAtt("data-align",this.align.toLowerCase());c&&this.tagAtt("data-valign",this.vAlign.toLowerCase());this.append(">");(a||c)&&this.append('<div data-align-outer=""><div data-align-inner="">')}},divEnd:function(a,c,b,g,d){this.base(a,c,b,g,d);this.type=gx.html.controls.types.divEnd;this.setProperties=function(a,c){this.align=a;this.vAlign=c};this._getHtml=function(){var a=this.align&&"left"!=this.align.toLowerCase(),
c=this.vAlign&&"top"!=this.vAlign.toLowerCase();(a||c)&&this.append("</div></div>");this.append("</div>")}},specificDomainCtrls:function(a){if(a.domainName==gx.domains.component&&0==a.enabled){var c=a.enabled?";display:none;":"",b=a.id+"_comp_trigger",g=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);a.append("<img");a.tagAtt("src",g);a.tagAtt("id",b);a.tagAtt("class","");a.tagAtt("style",c+" margin-left:2px; cursor:pointer;");a.tagAtt("onclick","gx.popup.openUrl('"+
a.value+"')");a.append("/>");c=[];c.push(a.column.gxId)}else a.dataType==gx.types.geolocation&&(c=!a.enabled?";display:none;":"",b=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\locateMe.png",!0),g=a.id+"_geoLocMe",a.append("<img"),a.tagAtt("src",b),a.tagAtt("id",g),a.tagAtt("class","GeoLocOption"),a.tagAtt("style",c),a.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),a.append(">"),c=[],c.push(a.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);
gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,
this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);
gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl)}}}()}}(gx.$);
gx.util.Observable=function(){return{observers:[],addObserver:function(j,f,d,b){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(j,f,d,b){0>this.indexOf(j,f,d)&&this.observers.push({e:j,o:f,f:d,cfg:b})},deleteObserver:function(j,f,d){new gx.thread.Mutex(this,this.deleteObserverSync,[j,f,d])},deleteObserverSync:function(j,f,d){j=this.indexOf(j,f,d);0<=j&&this.observers.splice(j,1)},removeAll:function(){this.observers=[]},indexOf:function(j,f,d){for(var b=this.observers.length,
a=0;a<b;a++){var c=this.observers[a];if(c&&c.e==j&&c.o==f&&c.f==d)return a}return-1},notify:function(j,f){f||(f=[]);for(var d=this.observers.length,b=[],a=0;a<d;a++){var c=this.observers[a];if(c&&c.e==j&&!c.removed)try{c.cfg&&c.cfg.single&&(c.removed=!0,b.push(a)),c.f.apply(c.o,f)}catch(g){gx.dbg.logEx(g,"gxfx.js","gx.obs.notify")}}if(0<b.length)for(a=b.length-1;0<=a;a--)this.observers.splice(b[a],1)}}};
gx.fx={delayedSuggest:function(){gx.$.each(gx.suggestControls,function(j,f){gx.fx.installSuggest(f,!0)})},installSuggest:function(j,f){if(!f&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[j.id]=j;else try{var d=gx.O.getValidStructFld(j.id);if(d&&!gx.lang.emptyObject(d.gxsgprm)){var b=0<d.grid?gx.fn.currentGridRowImpl(d.grid):"main",a=d.gxsgprm;a.installed||(a.installed={});a.installed[b]||(gx.ajax.suggest(gx.O,a[1],j.id,a[0],a[3],a[2]),a.installed[b]=!0,$(j).attr("data-gx-suggest",
"true"))}}catch(c){gx.dbg.logEx(c,"gxfx.js","installSuggest")}},updateSuggestParms:function(j){if(j)for(var f=j.length,d=0;d<f;d++){var b=gx.fn.validStruct(j[d]);b&&"function"==typeof b.c2v&&b.c2v()}},firesuggest:function(j,f,d,b){this.updateSuggestParms(b);j.textbox.value&&f.requestSuggestions(j.sdtParms,function(){f.values?j.autosuggest(f.values,d):j.hideSuggestions()});if(""===j.textbox.value)gx.evt.onchange_impl(j.textbox);delete gx.fx.suggestProcessing;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(j,
f,d,b,a,c){this.cur=-1;this.layer=this.IFrameControl=null;this.provider=f;this.textbox=j;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=j.onblur);this.ControlRefresh=d;this.typeahead=b;this.suggestParms=a||[];this.sdtParms=c||[];this.requestSuggestions=function(a,c,b){gx.fx.suggestProcessing=true;var d=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(a,c,b,d)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();
$(this.layer).hide()};this.highlightSuggestion=function(a){for(var c=this.layer.childNodes.length,b=0;b<c;b++){var d=this.layer.childNodes[b];if(d==a)d.className="current";else if(d.className=="current")d.className=""}};this.init=function(){var a=function(a){if(!a)a=window.event;this.handleKeyUp(a)};gx.evt.attach(this.textbox,"keyup",a.closure(this));gx.evt.attach(this.textbox,"keydown",function(a){if(!a)a=window.event;this.handleKeyDown(a)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();
this.textbox.GXonblur()}.closure(this));gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",a.closure(this));this.createDropDown()};this.nextSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur<a.length-1?this.cur+1:0;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.previousSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur>0?this.cur-1:a.length-1;a=a[this.cur];this.highlightSuggestion(a);
this.pickvalue(a.firstChild.nodeValue)}};this.selectRange=function(a,c){if(this.textbox.createTextRange){var b=this.textbox.createTextRange();b.moveStart("character",a);b.moveEnd("character",c-this.textbox.value.length);b.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(a,c);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(a){this.cur=-1;var c=null;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,true);this.layer.innerHTML="";if(!this.IFrameControl){c=
false;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");if(!this.IFrameControl){c=true;this.IFrameControl=document.createElement("IFRAME");this.IFrameControl.src="about:blank";this.IFrameControl.id="gxAutosuggestIFrame"}$(this.IFrameControl).css({zIndex:1,display:"none",position:"absolute"});this.IFrameControl.frameBorder="0";c&&document.body.appendChild(this.IFrameControl)}for(var b=a.length,d=0;d<b;d++){c=document.createElement("div");c.appendChild(document.createTextNode(a[d].d));c.style.width=
this.textbox.offsetWidth;this.layer.appendChild(c)}this.layer.style.left=this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()};this.typeAhead=function(a){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var c=
this.textbox.value.length;this.pickvalue(a);a=a.length;c<a&&this.selectRange(c,a)}};this.pickvalue=function(a){for(var c=this.aSuggestions.length,b=0;b<c;b++)if(this.aSuggestions[b].d==a){this.textbox.value=a;gx.evt.onchange_impl(this.textbox);break}};this.autosuggest=function(a,c){this.aSuggestions=a;var b=this.aSuggestions.length;if(c&&this.aSuggestions!=null&&b==1)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&(this.aSuggestions!=null&&b>0)&&(b==1&&this.aSuggestions[0].d!=
this.textbox||b>1)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var a=false;this.layer=gx.dom.byId("gxAutosuggestElement");if(!this.layer){a=true;this.layer=document.createElement("div");this.layer.className="suggestions";this.layer.id="gxAutosuggestElement"}this.setupLayer();a&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=
this.layer.onmouseup=this.layer.onmouseover=function(a){var a=a||window.event,c=gx.evt.source(a);if(a.type=="mousedown"){gx.evt.cancel(a,true);this.pickvalue(c.firstChild.nodeValue);this.hideSuggestions();window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)}else a.type=="mouseover"?this.highlightSuggestion(c):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var a=this.textbox,c=0;a.tagName!="BODY";){c=c+a.offsetLeft;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){c=
c-a.scrollLeft;a=a.parentNode}return c};this.getTop=function(){for(var a=this.textbox,c=0;a.tagName!="BODY";){c=c+a.offsetTop;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){c=c-a.scrollTop;a=a.parentNode}return c};this.handleKeyDown=function(a){switch(a.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(a){a=a.keyCode;a==9?this.hideSuggestions():a==8||a==46?this.requestSuggestions(this,this.provider,
false):a<32||(a>=33&&a<46||a>=112&&a<=123)||this.requestSuggestions(this,this.provider,this.typeahead)};this.init()},suggestProvider:function(j,f,d,b){this.requestSuggestions=function(a,c,g,p){var n,l=gx.ajax.gxObjectUrl(j)+"?",o="gxajaxSuggest_"+b,m=f.length;for(n=0;n<m;n++)o+=","+encodeURIComponent(gx.fn.evalCtxScope(j,f[n]));o+=","+encodeURIComponent(void 0===p?gx.fn.getControlValue_impl(d):p);m=a.length;for(n=0;n<m;n++)o+=","+encodeURIComponent(gx.fn.evalCtxScope(j,a[n]));l+=gx.ajax.encryptParms(j,
o);gx.http.doCall({method:"GET",url:l,handler:function(a,b){var g=gx.json.evalJSON(b);this.values=gx.fx.returnSuggestValues(this.VarRefresh,g[0]);c()},error:g,obj:this})}},returnSuggestValues:function(j,f){return f},addElement:function(j,f,d){if(!this.elementExists(j,f,d)){var b=f.id;!0===d&&(b+=f.types.sort().join(""));j.splice(0,0,f);j[b]=f}},elementExists:function(j,f,d){var b=f.id;!0===d&&(b+=f.types.sort().join(""));return j[b]?!0:!1},deleteElement:function(j,f,d){var b=f;d&&(b+=d.sort().join(""));
j[b]&&delete j[b];for(var b=j.length,a=0;a<b;a++){var c=j[a];if(c.id==f)if(d){if(this.matchingTypes(d,c.types)){j.splice(a,1);break}}else{j.splice(a,1);break}}return j},matchingTypes:function(j,f){for(var d=f.length,b=0;b<d;b++){for(var a=!1,c=j.length,g=0;g<c;g++)f[b].toLowerCase()==j[g].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(j,f,d){f=gx.dom.el(d);if(null!=f)return f;f=gx.dom.el("gxHTMLWrp"+d);if(null!=f)return f;d=RegExp("^"+d+"_(?:(?:[0-9]){4})+$");return null!=j&&
d.test(j.id)?j:null},isUnderMouse:function(j){var f=gx.evt.mouse.x,d=gx.evt.mouse.y,b=gx.dom.position(j),a=gx.dom.dimensions(j);return f>=b.x&&f<=b.x+a.w&&d>=b.y&&d<=b.y+a.h||"DIV"==j.tagName&&(0===a.w&&0===a.h&&j.firstChild)&&(b=gx.dom.position(j.firstChild),a=gx.dom.dimensions(j.firstChild),f>=b.x&&f<=b.x+a.w&&d>=b.y&&d<=b.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(j){return"dblclick"==j?this.dblclicks:this.generics},addEventHandler:function(j,f,d,b){d=gx.lang.emptyObject(j)?
d:j.CmpContext+d;j={id:f+d,cId:d,type:f,obj:j,hdl:b};f=this.getEventHandlers(f);gx.fx.addElement(f,j,!1)},raiseEvent:function(j,f){for(var d=gx.evt.source(f),b=this.getEventHandlers(j),a=b.length,c=0;c<a;c++){var g=b[c],p=gx.fx.findControl(d,g.obj,g.cId);null!=p&&gx.fx.isUnderMouse(p)&&g.hdl.call(g.obj)}},highlight:function(j,f,d){var b=gx.color.fromRGB(f[0],f[1],f[2]),a=gx.dom.getStyle(j,"backgroundColor"),c="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){j.style.backgroundColor=b.Html;
setTimeout(this.end,d)},end:function(){var b=a;c&&(b="transparent");j.style.backgroundColor=b}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(j,f,d){d&&(gx.evt.setEventRow(j,this.dragCtrl),this.obj=d.call(j,this.dragCtrl),this.obj.gxDragTypes=f)},drop:function(j,f,d){d&&d.call(f,j,this.dragCtrl,this.obj)},noDrop:function(){var j=this.noDropCtrl;null!=j&&j.gxDndClassName&&(j.className=j.gxDndClassName+
"NoAcceptDrag")},out:function(){var j=this.dropCtrl;j&&j.gxClassName&&(j.className=j.gxClassName);this.dropCtrl=null;j=this.noDropCtrl;null!=j&&j.gxClassName&&(j.className=j.gxClassName);this.noDropCtrl=null},over:function(){var j=this.dropCtrl;null!=j&&j.gxDndClassName&&(j.className=j.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var j=this.clonCtrl;null!=j&&((null==this.toHdl&&
(j.dropLeft=parseFloat(j.style.left||"0"),j.dropTop=parseFloat(j.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored())?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(j=this.nextCoords(),this.moveDragControl(j.X,j.Y)))},nextCoords:function(){var j=this.clonCtrl,f=parseFloat(j.style.left||"0"),d=parseFloat(j.style.top||"0"),b=0,a=0;f>=d?(b=f-1,a=j.dropTop-(j.dropTop-j.originalTop)*(j.dropLeft-b)/(j.dropLeft-j.originalLeft)):(a=d-1,b=j.dropLeft-
(j.dropTop-a)*(j.dropLeft-j.originalLeft)/(j.dropTop-j.originalTop));b<=j.originalLeft&&(b=j.originalLeft);a<=j.originalTop&&(a=j.originalTop);return{X:b,Y:a}},moveControl:function(j){if(null==this.clonCtrl){var f=document.createElement("DIV");f.style.position="absolute";j.gxDndClassName&&(f.className=j.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(f,!0);f.innerHTML=this.dragInfo();gx.fn.setOpacity(50,f);document.body.appendChild(f);f.originalLeft=gx.evt.mouse.x-10;f.originalTop=gx.evt.mouse.y-
10;f.diffLeft=10;f.diffTop=10;this.clonCtrl=f}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var j=this.clonCtrl;if(null==j)return!0;var f=parseFloat(j.style.left||"0"),d=parseFloat(j.style.top||"0")-j.originalTop;return 0>=f-j.originalLeft&&0>=d?!0:!1},moveDragControl:function(j,f){try{var d=this.clonCtrl;null!=d&&(d.style.left=j-d.diffLeft+"px",d.style.top=f-d.diffTop+"px")}catch(b){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var j="",f="",
d;for(d in this.obj){if("gxDragTypes"!=d){var b=[j];if("function"==typeof this.obj[d])continue;f+=d+": "+this.obj[d]+"</br>";j=b[0]}if(5<=j){f+="...";break}j++}return f}return""},deleteHandlers:function(j){gx.thread.Mutex(this,this.deleteHandlersSync,[j])},deleteHandlersSync:function(j){var f=[],d,b=this.sources.length;for(d=0;d<b;d++){var a=this.sources[d];a.obj!=j&&f.push(a)}this.sources=f;f=[];b=this.targets.length;for(d=0;d<b;d++)a=this.targets[d],a.obj!=j&&f.push(a);this.targets=f},addSource:function(j,
f,d,b,a){gx.thread.Mutex(this,this.addSourceSync,[j,f,d,b,a])},addSourceSync:function(j,f,d,b,a){f=gx.lang.emptyObject(j)?f:j.CmpContext+f;gx.fx.addElement(this.sources,{id:f,cssClass:d,types:b,obj:j,hdl:a},!1)},addTarget:function(j,f,d,b,a){gx.thread.Mutex(this,this.addTargetSync,[j,f,d,b,a])},addTargetSync:function(j,f,d,b,a){f=gx.lang.emptyObject(j)?f:j.CmpContext+f;gx.fx.addElement(this.targets,{id:f,cssClass:d,types:b,obj:j,hdl:a},!0)},deleteSource:function(j){gx.thread.Mutex(this,this.deleteSourceSync,
[j])},deleteSourceSync:function(j){this.sources=gx.fx.deleteElement(this.sources,j)},getSource:function(j){for(var j=gx.evt.source(j),f=this.sources.length,d=0;d<f;d++){var b=this.sources[d],a=this.dragCtrl=gx.fx.findControl(j,b.obj,b.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=b.cssClass,gx.fx.isUnderMouse(a)))return b}return this.obj=this.dragCtrl=null},getTarget:function(j,f){for(var d=gx.evt.source(j),b=this.targets.length,a=0;a<b;a++){var c=this.targets[a],g=gx.fx.findControl(d,
c.obj,c.id);if(null!=g&&(g.gxClassName=g.className,g.gxDndClassName=c.cssClass,gx.fx.isUnderMouse(g))){if(gx.fx.matchingTypes(f,c.types))return this.noDropCtrl=null,this.dropCtrl=g,c;this.out();this.noDropCtrl=g;this.noDrop();return null}}this.out();return null}},notifications:{queuedEvents:[],addTracker:function(j,f,d,b,a,c){j.notifications||(j.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage",j,gx.fx.notifications.notify.closure(j),{single:!1}),gx.fx.obs.addObserver("gx.onafterevent",j,gx.fx.notifications.fireQueuedEvents.closure(j),
{single:!1}));j.notifications[f||""]={gxO:j,handler:a,eventName:d,type:b,noWait:c};gx.webSocket._init()},notify:function(j){var j=gx.json.evalJSON(j),f=this.notifications[j.GroupName||""];f&&(gx.fx.notifications.queuedEvents.push({notifObj:f,data:j}),(f.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var j=0;j<gx.fx.notifications.queuedEvents.length;j++){var f=gx.fx.notifications.queuedEvents[j];if(!f.executed){gx.fx.notifications.queuedEvents.splice(j--,
1);var d=f.notifObj.gxO;f.executed=!0;if(gx.lang.emptyObject(f.data.Object)||f.data.Object.toUpperCase()==d.ServerClass.toUpperCase()){var b=f.notifObj.type,a=f.notifObj.eventName;if(a){var c=d.isServerEvent(a),g={};g[b[0][0]]=f.data;d.setEventParameters(f.notifObj.type,g);gx.evt.dispatcher.dispatch(d.getServerEventName(a),d,0,0,c)}else f.notifObj.handler(f.data)}}}}},ctx:{setters:[],trackers:[],deleteHandlers:function(j){gx.thread.Mutex(this,this.deleteHandlersSync,[j])},deleteHandlersSync:function(j){var f,
d=[],b=this.setters.length;for(f=0;f<b;f++){var a=this.setters[f];a.obj!=j&&d.push(a)}this.setters=d;d=[];b=this.trackers.length;for(f=0;f<b;f++)a=this.trackers[f],a.obj!=j&&d.push(a);this.trackers=d},addSetter:function(j,f,d,b,a){gx.thread.Mutex(this,this.addSetterSync,[j,f,d,b,a])},addSetterSync:function(j,f,d,b,a){f=gx.lang.emptyObject(j)?f:j.CmpContext+f;gx.fx.addElement(this.setters,{id:f,cssClass:d,types:b,obj:j,hdl:a},!1)},addTracker:function(j,f,d){gx.thread.Mutex(this,this.addTrackerSync,
[j,f,d])},addTrackerSync:function(j,f,d){gx.fx.addElement(this.trackers,{id:j.CmpContext+j.IsMasterPage.toString(),cssClass:"",types:f,obj:j,hdl:d},!0)},deleteSetter:function(j){gx.thread.Mutex(this,this.deleteSetterSync,[j])},deleteSetterSync:function(j){this.setters=gx.fx.deleteElement(this.setters,j)},notify:function(j,f,d){gx.thread.Mutex(this,this.notifySync,[j,f,d])},notifySync:function(j,f,d){if(j&&j.forcedFocus)j.forcedFocus=!1;else{var b,a=gx.lang.emptyObject,c=function(a,c){var b=gx.O;gx.setGxO(a);
c();gx.setGxO(b)},g=null;if(a(f)||a(d)){var p=this.setters.length;for(b=0;b<p;b++){var n=this.setters[b];if(a(j)){if(g=gx.fx.findControl(null,n.obj,n.id),null!=g&&a(g.onfocus)&&gx.fx.isUnderMouse(g)){c.apply(this,[n.obj,function(){gx.evt.setEventRow(n.obj,g);f=n.types;d=n.hdl.call(n.obj,g)}]);break}}else if(j.id==n.id){c.apply(this,[n.obj,function(){g=j;gx.evt.setEventRow(n.obj,g);f=n.types;d=n.hdl.call(n.obj,g)}]);break}}}if(!a(f)&&(d||""===d)){a=this.trackers.length;for(b=0;b<a;b++){var l=this.trackers[b];
gx.fx.matchingTypes(f,l.types)&&c.apply(this,[l.obj,function(){l.hdl.call(l.obj,null,g,d)}])}}}}}};
gx.date=function(){var j=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\s?(AM|PM)?/i,f=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\s?(AM|PM)?/i,d=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,b=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(a){return this.getDay()==
a.getDay()&&this.getMonth()==a.getMonth()&&this.getFullYear()==a.getFullYear()?!0:!1},toJson:function(){var a=new gx.date.gxdate("");a.assign_date(this);return a.json()},gxdate:function(c,b){this.json=function(){var a=this.TimeFmt;this.TimeFmt=24;var c=this.HasTimePart,b=this.HasDatePart;this.HasDatePart=this.HasTimePart=!0;var g=this.getStringWithFmt("Y4MD")+" "+this.getTimeString(!0,!0);this.TimeFmt=a;this.HasTimePart=c;this.HasDatePart=b;return g};this.mapCTODFormatToPattern=function(a){return"ANSI"==
a?"Y4MD":a};this.emptyDateString=function(a){return-1==a.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==a?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(c){c=this.mapCTODFormatToPattern(c);if(0===this.Value-a)return this.emptyDateString(c);var b=c,g=gx.text.padl(this.Value.getDate().toString(),2,"0"),d=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),f=gx.text.padl(this.Value.getFullYear().toString(),4,"0"),j=this.FormatPos(c),b=b.replace("D",
g+(3>j.DPos?"/":"")),b=b.replace("M",d+(3>j.MPos?"/":""));-1==c.indexOf("Y4")?(f=f.slice(2,4),b=b.replace("Y",f+(3>j.YPos?"/":""))):b=b.replace("Y4",f+(3>j.YPos?"/":""));return b};this.getString=function(a){gx.lang.emptyObject(a)&&(a=gx.dateFormat);return this.getStringWithFmt(a)};this.toString=function(){return this.getString()};this.gxdtoc=function(a,c){return this.getStringWithFmt(this.mapCTODFormatToPattern(a)).replace("/",c)};this.getUrlVal=function(){var a,c,b;if(gx.date.isNullDate(this))return"";
this.HasDatePart?(a=gx.text.padl(this.Value.getDate().toString(),2,"0"),c=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),b=gx.text.padl(this.Value.getFullYear().toString(),4,"0")):(c=a="01",b="0001");var g=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",d=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",f=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"";return b+c+a+g+d+f};this.getTimeString=function(a,c,b){if(gx.date.isNullDate(this)&&
gx.blankWhenEmpty){var g="";b&&(g+="  ");a&&(g+="   ");c&&(g+="   ");return g}var g="",d=this.Value.getHours(),b=b||!0;12==this.TimeFmt&&12<=d?(12<d&&(d-=12),g=" PM"):12==this.TimeFmt&&(g=" AM");var f=this.HasTimePart?gx.text.padl(d.toString(),2,"0"):"",j=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",t=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"";0===d&&""!==g&&(f="12");d="";b&&(d=f);a&&(d=d+":"+j);c&&(d=d+":"+t);return d+g};this.FormatPos=
function(a){var c,b,g;"ANSI"==a?(c=1,b=2,a=3):(g=a.indexOf("Y4"),c=-1==g?a.indexOf("Y")+1:g+1,b=a.indexOf("M"),0!==g&&b++,a=a.indexOf("D"),0!==g&&a++);return{YPos:c,MPos:b,DPos:a}};this.assign_date=function(c){c instanceof gx.date.gxdate?(this.Value=c.Value,this.HasTimePart=c.HasTimePart,this.HasDatePart=c.HasDatePart):this.Value=void 0===c?a:c};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");
a.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;a.HasDatePart=this.HasDatePart;return a};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;a.HasDatePart=this.HasDatePart;return a};this.assign_string=function(a,c,b,
g){var d=j,k=d.exec(a),q=0;if(null==k)-1!=a.indexOf("  /  /  ")&&(b=!0);else for(var t=k.length,s=1;s<t;s++)gx.lang.emptyObject(k[s])||q++;var r=this.FormatPos(c),v=s=t=c=0,u=0,x=0,y=0;try{this.HasDatePart=!0;if(6==r.DPos+r.MPos+r.YPos&&null!=k&&3<=q){null!=k[r.YPos]&&(c=parseInt(k[r.YPos],10));if(isNaN(c))throw"InvalidDate";c<this.FYearOfCentury?c+=2E3:100>c?c+=1900:1E3>c&&(c+=1E3);null!=k[r.MPos]&&(t=parseInt(k[r.MPos],10)-1);if(isNaN(t)||0>t||11<t)throw"InvalidDate";null!=k[r.DPos]&&(s=parseInt(k[r.DPos],
10));if(isNaN(s)||0>s||s>gx.date.maxDays(t,c))throw"InvalidDate";}else this.HasDatePart=!1;this.HasTimePart=!1;r=0;null==k?(d=f,k=d.exec(a),null!=k&&(r=1,this.HasTimePart=!0)):3<q&&(r=4,this.HasTimePart=!0);if(this.HasTimePart&&!b){null!=k[r]&&(v=parseInt(k[r],10));if(gx.lang.emptyObject(k[r])||isNaN(v))throw this.HasTimePart=!1,"InvalidHour";null!=k[r+1]&&(u=parseInt(k[r+1],10));isNaN(u)&&(u=0);null!=k[r+2]&&(x=parseInt(k[r+2],10));isNaN(x)&&(x=0);null!=k[r+3]&&(y=parseInt(k[r+3],10));isNaN(y)&&
(y=0);if(!this.validTime(-1!=a.toLowerCase().indexOf("m"),v,u,x,y))throw"InvalidHour";if((-1!=a.indexOf("PM")||-1!=a.indexOf("pm"))&&12>v)v+=12;if((-1!=a.indexOf("AM")||-1!=a.indexOf("am"))&&12==v)v=0}}catch(B){if(g)throw B;"InvalidDate"==B&&(y=x=u=v=s=t=c=0);"InvalidHour"==B&&(y=x=u=v=0)}this.Value=new Date(c,t,s,v,u,x,y);if(0<c+t+s+v+u+x+y&&(!this.HasTimePart||b)&&this.Value.getDate()!=s)this.Value=new Date(Date.UTC(c,t,s,v+12,u,x,y))};this.validTime=function(a,c,b,g,d){return a&&12<c||!a&&(24<
c||24==c&&0<b+g)?!1:59>=b||59>=g||59>=d};this.compare=function(a){return"string"==typeof a?this.compare_string(a):this.compare_date(a)};this.compare_string=function(a){return this.compare_date((new gx.date.gxdate(a)).Value)};this.compare_date=function(a){a=a instanceof gx.date.gxdate?a.Value:a;return this.HasTimePart?this.Value-a:this.Value.getFullYear()>a.getFullYear()?1:this.Value.getFullYear()<a.getFullYear()?-1:this.Value.getMonth()>a.getMonth()?1:this.Value.getMonth()<a.getMonth()?-1:this.Value.getDate()>
a.getDate()?1:this.Value.getDate()<a.getDate()?-1:0};this.TimeFmt=gx.timeFormat||12;this.SFmt=b||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof c?this.assign_string(c,this.SFmt):this.assign_date(c)},isANSIDateTime:function(a){return"string"==typeof a&&j.test(a)?!0:!1},isANSIDate:function(a){return"string"==typeof a&&d.test(a)?!0:!1},isLeapYear:function(a){return 0===a%400?!0:0===a%100?!1:0===a%4?!0:!1},dateObject:function(a){return a instanceof this.gxdate?a.Value:"string"==
typeof a?(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).Value:a instanceof Date?a:new Date},gxdateObject:function(a){if(a instanceof this.gxdate)return a;if("string"==typeof a)return new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0);if(a instanceof Date){var b=new this.gxdate("");b.assign_date(a);return b}return new this.gxdate("")},clonedDate:function(a,b){var d=new this.gxdate("");d.assign_date(b);a instanceof this.gxdate&&(d.SFmt=a.SFmt,d.HasTimePart=a.HasTimePart,d.HasDatePart=a.HasDatePart);
return d},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var a=this.today();a.HasTimePart=!0;a.HasDatePart=!0;return a},today:function(){var a=new this.gxdate("");a.assign_date(new Date);return a},ctot:function(a,b){return new this.gxdate(a,b)},ctod:function(a,b){var d=new this.gxdate(a,b);d.Value.setHours(0,0,0,0);return d},ymdtod:function(a,b,d){a=new this.gxdate(a+"/"+b+"/"+d,"ANSI");a.Value.setHours(0,0,0,0);return a},ymdhmstot:function(a,b,d,f,j,o){return new this.gxdate(a+
"/"+b+"/"+d+" "+f+":"+j+":"+o,"ANSI")},hour:function(a){return(new this.gxdate(a)).Value.getHours()},minute:function(a){return(new this.gxdate(a)).Value.getMinutes()},second:function(a){return(new this.gxdate(a)).Value.getSeconds()},millisec:function(a){return 864E5*a},day:function(a){return(new this.gxdate(a)).Value.getDate()},month:function(a){return(new this.gxdate(a)).Value.getMonth()+1},year:function(a){return(new this.gxdate(a)).Value.getFullYear()},addDays:function(a,b){return this.addMill(a,
this.dayToMillisec(b))},addSec:function(a,b){return this.addMill(a,this.secToMillisec(b))},addMill:function(a,b){var d=this.dateObject(a).clone(),f=new this.gxdate;f.assign_date(d);var j=d.getMilliseconds();d.setMilliseconds(j+b);return f.getString(this.isANSIDate(a)?"Y4MD":void 0)},secDiff:function(a,b){return this.millisecToSec(this.milliDiff(a,b))},daysDiff:function(a,b){return this.millisecToDay(this.milliDiff(a,b))},milliDiff:function(a,b){var d=this.gxdateObject(a),f=this.gxdateObject(b),a=
d.Value.valueOf(),b=f.Value.valueOf();return a-b},dayToMillisec:function(a){return 864E5*a},secToMillisec:function(a){return 1E3*a},millisecToDay:function(a){return a/24/60/60/1E3},millisecToSec:function(a){return a/1E3},dateParm:function(a){return"string"==typeof a?new this.gxdate(a):a},urlDate:function(a,b){var d=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(d)?d.Value.getFullYear().toString()+gx.text.padl((d.Value.getMonth()+1).toString(),
2,"0")+gx.text.padl(d.Value.getDate().toString(),2,"0"):""},urlDateTime:function(a,b){var d=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!d.HasDatePart?"00010101"+gx.text.padl(d.Value.getHours().toString(),2,"0")+gx.text.padl(d.Value.getMinutes().toString(),2,"0")+gx.text.padl(d.Value.getSeconds().toString(),2,"0"):!this.isNullDate(d)?d.Value.getFullYear().toString()+gx.text.padl((d.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(d.Value.getDate().toString(),
2,"0")+gx.text.padl(d.Value.getHours().toString(),2,"0")+gx.text.padl(d.Value.getMinutes().toString(),2,"0")+gx.text.padl(d.Value.getSeconds().toString(),2,"0"):""},isNullDate:function(a){a instanceof this.gxdate&&(a=a.Value);var b=this.nullDate();return b.getFullYear()!=a.getFullYear()||b.getMonth()!=a.getMonth()||b.getDate()!=a.getDate()||b.getHours()!=a.getHours()||b.getMinutes()!=a.getMinutes()||b.getSeconds()!=a.getSeconds()?!1:!0},dtoc:function(a,b,d){return(new this.gxdate(a,this.isANSIDate(a)?
"Y4MD":void 0)).gxdtoc(b,d)},dttoc:function(a,b,d){var a=new this.gxdate(a,this.isANSIDateTime(a)?"Y4MD":void 0),f=gx.dateFormat,j="";0<b&&(8<b&&-1==f.indexOf("Y4")&&(f=f.replace("Y","Y4")),j=a.getStringWithFmt(f)+" ");return 0<d?j+a.getTimeString(3<d,8==d,1<d):j},nulldate_toc:function(a,b){var d=new this.gxdate("");d.HasTimePart=!0;d.HasDatePart=!0;var f=gx.dateFormat,j="";0<a&&(8<a&&-1==f.indexOf("Y4")&&(f=f.replace("Y","Y4")),j=d.getStringWithFmt(f)+" ");return 0<b&&!gx.blankWhenEmpty?j+d.getTimeString(1<
b,8==b,3<b):j},addyr:function(a,b){return this.addmth(a,12*b)},addmth:function(a,b){var d=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),f=a.getDate();a.setDate(1);a.setMonth(a.getMonth()+1*b);a.setDate(Math.min(f,this.maxDays(a.getMonth(),a.getFullYear())));return this.clonedDate(d,a)},dtadd:function(a,b){var d=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),f=a.getMilliseconds();a.setMilliseconds(f+1E3*b);return this.clonedDate(d,a)},dtdiff:function(a,b){a=this.dateObject(a);
b=this.dateObject(b);return(a-b)/1E3},maxDays:function(a,b){return[31,this.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][a]},eom:function(a){var b=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),d=this.maxDays(a.getMonth(),a.getFullYear());a.setDate(d);return this.clonedDate(b,a)},dow:function(a){a=this.dateObject(a);return a.equalsNoTime(this.nullDate())?0:a.getDay()+1},age:function(a,b){var d,f,j;f=this.dateObject(a);d=this.dateObject(b);j=this.nullDate();if(f.equalsNoTime(j)||
d.equalsNoTime(j)||f.equalsNoTime(d))return 0;if(d>=f){j=36E5*d.getUTCHours()+6E4*d.getUTCMinutes()+1E3*d.getUTCSeconds()-(36E5*f.getUTCHours()+6E4*f.getUTCMinutes()+1E3*f.getUTCSeconds());if(d.getUTCDate()>f.getUTCDate()||d.getUTCDate()==f.getUTCDate()&&0<=j)j=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds()));else{j=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth()-1,f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds()));
d=d.getUTCMonth()-1;for(-1==d&&(d=11);j.getUTCMonth()!=d;)j.setUTCDate(j.getUTCDate()-1)}return f=j.getUTCMonth()>=f.getUTCMonth()?j.getUTCFullYear()-f.getUTCFullYear():j.getUTCFullYear()-1-f.getUTCFullYear()}return 0},valid_date:function(a,g,d,f,j,o,m,k){var q=m||!1,t=!1,o=a.value,s="",m=d,r="",r="^[ ]*(",v=0<g?"GXM_invaliddate":"GXM_invalidtime",s=gx.num.replaceFullWidthNumerals(o),s=s.split("\n")[0],d="YMD"==d?1:0,j=12==j?1:0;if(b.test(s))t=!0,o=s="";else if(0<g&&4===s.length)var u=(new Date).getFullYear().toString().substring(10===
g?0:2),s=1===d?u+s:s+u;r=0<g?8==g?r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":0===d?q?r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":q?r+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":r+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":r+"( )?( )?( )?";0<f&&(r+="(",0<g&&(r+="[ ]*"),r+="([0-9]{1,2})",r=2<f?r+"(:?([0-9]{1,2}))?":r+"(( )?)?",r=5<f?r+"(:?([0-9]{1,2}))?":r+"(( )?)?",r=(1==j?r+"[ ]*(a|am|p|pm)?":r+"(( )?)?")+")?");d=RegExp(r+
")?[ ]*$","i");if(d.test(s)){d=s.match(d);0<g?(r="/",0<s.indexOf("-")&&(r="-"),d[2]?r=d[2]+r+d[3]+r+d[4]:(r=1==k?"        ":"  "+r+"  "+r+"  ",10==g&&(r+="  "))):r="";0<f&&(0<g&&(r+=" "),1==k&&!d[6]&&!d[8]&&!d[10]?r+="        ":(d[6]?r+=d[6]:t?(k=s.match(b),r=k[4]?r+k[4]:r+(1==j?"12":"00")):r+=1==j?"12":"00",2<f&&(r=d[8]?r+":"+d[8]:r+":00"),5<f&&(r=d[10]?r+":"+d[10]:r+":00"),1==j&&(r="p"==(d[11]?d[11].substr(0,1):"a").toLowerCase()?r+" PM":r+" AM")));j=new this.gxdate("",m);try{j.assign_string(r,
m,0>=f,!0),""!==gx.text.trim(r)&&(r=this.formatDateTime(f,g,m,j))}catch(x){return gx.fn.alert(a,gx.getMessage(v)),gx.csv.setFormatError(a),!1}if(r!=o){a.value=r;if(-1!=navigator.userAgent.indexOf("Firefox/2"))a.onchange();(g=gx.O.getValidStructFld(a))&&gx.O.refreshDependantGrids(g)}gx.csv.setFormatError(a,!1);return!0}gx.fn.alert(a,gx.getMessage(v));gx.csv.setFormatError(a);return!1},formatDateTime:function(a,b,d,f){var j="";0<a&&f.HasTimePart&&(j=f.getTimeString(4<=a,8<=a));a=d;8<b&&-1==a.indexOf("Y4")&&
(a=a.replace("Y","Y4"));return 0<b?f.getStringWithFmt(a)+(f.HasTimePart?" "+j:""):f.HasTimePart?j:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(j){this.capacity=j||10;this.buffer=[];this.append=function(f){this.buffer.push(f);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var j=arguments[0],f=arguments.length,d=1;d<f;d++)j=j.replace("%"+d,gx.text.rtrim(arguments[d].toString()));return j},formatString:function(j,f,d){return d?gx.text.padl("",
f,"*"):j},replaceAll:function(j,f,d){return-1!=j.toString().indexOf(f)?(""+j).split(f).join(d):j},charReplace:function(j,f,d){for(var b="",a=j.length,c=0;c<a;c++){for(var g=!1,p=f.length,n=0;n<p;n++)if(j.charAt(c)==f[n]&&n<d.length){b+=d[n];g=!0;break}!1===g&&(b+=j.charAt(c))}return b},endsWith:function(j,f){return-1!==j.indexOf(f,j.length-f.length)},length:function(j){return j.length},upper:function(j){return j.toUpperCase()},lower:function(j){return j.toLowerCase()},padr:function(j,f,d){f-=j.length;
if(1>f)return j;for(var b=0;b<f;b++)j+=d;return j},padl:function(j,f,d){f-=j.length;if(1>f)return j;for(var b="",a=0;a<f;a++)b+=d;return b+j},ltrim:function(j){return j.toString().replace(/^ */,"")},rtrim:function(j){return j.toString().replace(/ *$/,"")},trim:function(j){return this.rtrim(this.ltrim(j))},chr:function(j){return String.fromCharCode(j)},concat:function(j,f,d){return this.rtrim(j)+d+f},space:function(j){for(var f="",d=0;d<j;d++)f+=" ";return f},substring:function(j,f,d){return j.toString().substring(f-
1,f-1+d)},tostring:function(j){return j.toString()},toformattedstring:function(j){return j.toString().replace(".",gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(j,f){var d=gx.text.escapeMapping[f];if(d)return d;d=f.charCodeAt();return"\\u00"+Math.floor(d/16).toString(16)+(d%16).toString(16)},escapeString:function(j){return this.escapeRegex.start.test(j)?
'"'+j.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+j+'"'},indexOf:function(j,f,d){if(d>j.length)return 0;0>=d&&(d=1);return j.indexOf(f,d-1)+1},lastIndexOf:function(j,f,d){if(d>j.length)return 0;0>=d&&(d=j.length);return j.lastIndexOf(f,d-1)+1}};
gx.num=function(){var j=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,f=function(d,b,a,c){var g=gx.lang.instanceOf,f="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,j=gx.thousandSeparator,l=gx.decimalPoint;"string"==typeof a&&(a=gx.num.parseFloat(a,j,l));"string"==typeof c&&(c=gx.num.parseFloat(c,j,l));return g(a,f)&&g(c,Number)?a[d](new f(c.toString())).toString():g(a,Number)&&g(c,f)?(new f(a.toString()))[d](c).toString():g(a,Number)&&g(c,Number)||"undefined"==typeof gx.num.dec?
b(a,c):a[d](c)};return{str:function(d,b,a){if("string"===typeof d)return d;"undefined"==typeof b&&(b=10);if("undefined"==typeof a||b-1<=a)a=0;d=d.toFixed(a);return d.length<=b?gx.text.padl(d,b," "):gx.text.padr("",b,"*")},maxNumericPrecision:function(){return 15},extractValue:function(d,b){b=gx.num.replaceFullWidthNumerals(b);if(gx.lang.instanceOf(b,Number)||this.overflowNumber(b))return b;var a,c=void 0===b?"":b;if(d){a="+"==d.charAt(0)||"-"==d.charAt(0)?d.replace(/[\+\-\d,*\.*Z*\s]+/,""):d.replace(/[\d,*\.*Z*\s]+/g,
"");d.lastIndexOf(".")!=d.indexOf(".")&&(c=gx.text.replaceAll(c,".",""));for(var g=0;g<a.length;g++)c=c.replace(a.charAt(g),"")}return gx.text.trim(c)},formatNumber:function(d,b,a,c,g,f){gx.lang.emptyObject(d)&&(d="0");var j=-1!=a.indexOf(",")?gx.thousandSeparator:"",l=gx.decimalPoint,o=!1;"string"==typeof d&&j&&(d=gx.text.replaceAll(d,j,""));"string"==typeof d&&(d=d.replace(l,"."));if(gx.num.overflowNumber(d))return d;try{d=gx.num.setScale(d,b)}catch(m){d=d.toString()}var k=d.split(".");k[0]||(k[0]=
"0");k[1]||(k[1]="");if(f){if(k[1].length>b&&k[1].replace(/0*$/,"").length>b)throw"InvalidNumber";c=0===b?c:c-b-1;if(g&&"-"==k[0].charAt(0)&&k[0].replace(/0*/,"").length>c||!g&&"-"==k[0].charAt(0)||k[0].replace(/[+]?0*/,"").length>c)throw"InvalidNumber";}0>d&&(g=!0);if(k[1].length<b){c=k[1];for(d=k[1].length+1;d<=b;d++)c+="0";k[1]=c}c="";g&&"-"==k[0].charAt(0)&&(c="-",k[0]=k[0].substring(1));if(j&&3<k[0].length){f=k[0];k[0]="";for(g=3;g<f.length;g+=3)d=f.slice(f.length-g,f.length-g+3),k[0]=j+d+k[0]+
"";g=f.substr(0,0===f.length%3?3:f.length%3);k[0]=g+k[0]}l=!k[1]?"":l;0<b?(g=a.split("."),g[1]==gx.text.padr("",b,"Z")&&(o=!0)):(g=Array(a),0<g.length&&0===gx.text.replaceAll(gx.text.replaceAll(g[0],",",""),"Z","").length&&(o=!0));b=0;a="";if(1<g.length){f=g[1];for(d=0;d<f.length;d++){var q=f.charAt(d);"9"==q||"Z"==q?k[1].length>b?(a+=k[1].charAt(b),b++):a+="0":"."!=q&&","!=q&&(a+=q)}}f="";g=g[0];b=k[0].length-1;for(d=g.length-1;0<=d;d--)q=g.charAt(d),"9"==q||"Z"==q?0<=b?("Z"==q&&"0"===k[0].charAt(b)&&
0===b||(f=k[0].charAt(b)+f),b--):f=("9"==q?"0":"")+f:"Z"!=q&&","!=q?f=q+f:","==q&&k[0].charAt(b)==j&&(f=k[0].charAt(b)+f,b--);return o&&("0"==f||""===f)&&0===a.replace(/0+$/,"").length?"":c+f+(!a?"":l+a)},add:function(d,b){return f("add",function(a,b){return a+b},d,b)},subtract:function(d,b){return f("substract",function(a,b){return a-b},d,b)},multiply:function(d,b){return f("multiply",function(a,b){return a*b},d,b)},divide:function(d,b){return f("divide",function(a,b){return a/b},d,b)},negate:function(d){return gx.lang.instanceOf(d,
Number)||"undefined"==typeof gx.num.dec?-d:d.negate()},pow:function(d,b){return f("pow",function(a,b){return a^b},d,b)},mod:function(d,b){return f("remainder",function(a,b){return a%b},d,b)},setScale:function(d,b){if(gx.lang.instanceOf(d,Number))return d.toFixed(b);"string"==typeof d&&(d=gx.text.trim(d));if(d.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===d.length&&0===b)return"0";var a=d.split("."),c;a[1]||(a[1]="");if(a[1].length<b){var g=a[1];for(c=a[1].length+1;c<=b;c++)g+=
"0";a[1]=g;return a[0]+(""===a[1]?"":".")+a[1]}return Number(parseFloat(d)).toFixed(b)}return(new gx.num.dec.bigDecimal(d)).setScale(b,gx.num.dec.ROUND_UP).toString()},parseFloat:function(d,b,a){if(gx.lang.instanceOf(d,Number)||this.overflowNumber(d))return d;d=this.toInvariant(d,b,a);return d.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(d):parseFloat(d)},toInvariant:function(d,b,a){return"number"==typeof d||"undefined"!=typeof gx.num.dec&&d instanceof
gx.num.dec.bigDecimal?d:gx.text.replaceAll(d,b,"").replace(a,".")},parseInt:function(d,b,a){if("number"==typeof d)return d;var c=d,c=gx.text.replaceAll(d,a,"");return parseInt(c,b)},overflowNumber:function(d){return/\*(\**)/.test(d)},urlDecimal:function(d,b,a){return"undefined"!=typeof d?(d="undefined"!=typeof d.value?d.value:d,d=this.parseFloat(d,b,a),d.toString()):""},random:function(){return Math.random()},intval:function(d){var b=0,d="undefined"!=typeof d?d.toString():"",b=d.length<gx.num.maxNumericPrecision()||
"undefined"==typeof gx.num.dec?parseInt(d,0):(new gx.num.dec.bigDecimal(d)).setScale(0,gx.num.dec.ROUND_UP);isNaN(b)&&(b=0);return b},val:function(d){d=gx.text.trim(d).replace(",",".");d=this.parseFloat(d);isNaN(d)&&(d=0);return d},trunc:function(d,b){var a=d,d=d.toString(),c=d.length,g=d.indexOf(".");if(-1!=g){a=d.substring(0,g);if(0===b)return Number(a);var f="";g+b<=c&&(f=d.substring(g+1,g+1+b));a=gx.num.parseFloat(a+"."+f);isNaN(a)&&(a=0)}return a},round:function(d,b){return 0<=b?parseFloat(gx.num.decimalAdjust("round",
d,-b).toFixed(b)):gx.num.roundNeg(d,b)},decimalAdjust:function(d,b,a){if("undefined"===typeof a||0===+a)return Math[d](b);b=+b;a=+a;if(isNaN(b)||!("number"===typeof a&&0===a%1))return NaN;b=b.toString().split("e");b=Math[d](+(b[0]+"e"+(b[1]?+b[1]-a:-a)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+a:a))},roundNeg:function(d,b){var d=d.toString(),a=d.indexOf("."),c="",g="",g=0,c="."+"0000000000000000000000".substring(1,parseInt(b,0)+1)+"5",g=parseFloat(c);-1==a?(g="0000000000000000000000",
c=""+d):0===a?(c="0",g=0+parseFloat(d)+parseFloat(g),d=g+"0000000000000000000000",g=""+d.substring(1,d.length)):(g=parseFloat(d)+g,c=g.toString().substring(0,a),g=""+(""+g+"0000000000000000000000").substring(a+1,a+1+parseInt(b,0)));g=g.substring(0,parseInt(b,0));a=parseFloat(c+"."+g);isNaN(a)&&(a=0);return a},valid_decimal:function(d,b,a,c){var g=d.value,f=g.lastIndexOf(a),j=!0;","==a&&(-1==f&&g.lastIndexOf(".")==g.indexOf("."))&&(g=g.replace(".",a));var l=gx.O.getValidStructFld(d);gx.lang.emptyObject(l)||
(g=gx.num.extractValue(l.pic,g));f=RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+b+"[0-9]{3})*(\\"+a+"[0-9]*)?)?[ ]*$");if(g)if(f.test(g)){var f=g.lastIndexOf(a),o=g;-1!=f&&(o=g.slice(0,f+parseInt(c,10)+1));try{gx.lang.emptyObject(l)||(o=gx.num.formatNumber(o,l.dec,l.pic,l.len,l.sign,!0)),"."!=a&&"SELECT"==d.tagName&&(o=gx.num.toInvariant(o,b,a))}catch(m){j=!1}if(j&&o!=gx.text.trim(d.value)&&(d.value=o,-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else j=!1;else j=!0;j?gx.csv.setFormatError(d,
!1):(gx.csv.setFormatError(d),gx.fn.alert(d,gx.getMessage("GXM_badnum")))},valid_integer:function(d,b){var a,c,g,f=gx.O.getValidStructFld(d),j=gx.lang.emptyObject(f);c=d.value;j||(c=gx.num.extractValue(f.pic,c));a=!j&&-1!=f.pic.indexOf(",")?RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+b+"[0-9]{3})*[ ]*$"):/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/;g=!0;if(c)if(a.test(c)){try{j||(c=gx.num.formatNumber(c,f.dec,f.pic,f.len,f.sign,!0))}catch(l){g=!1}if(c!=gx.text.trim(d.value)&&(d.value=c,-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else g=
!1;else g=!0;g?gx.csv.setFormatError(d,!1):(gx.csv.setFormatError(d),gx.fn.alert(d,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(d){return"string"===typeof d?d.replace(j,function(b){return 8213==b.charCodeAt()||12540==b.charCodeAt()?String.fromCharCode(45):String.fromCharCode(b.charCodeAt()-65248)}):d}}}();
gx.color={rgb:function(j,f,d){return 65536*j+256*f+d},css:function(j){return"rgb"==j.substring(0,3)?eval(j):"#"==j.charAt(0)?parseInt(j.substring(1),16):0},html:function(j){j=this.toHex(j);gx.lang.emptyObject(j)&&(j="000000");var j=gx.text.padl(j,6,"0"),f={};f.Hexa=j;f.Html="#"+j;f.R=parseInt(j.substring(0,2),16);f.G=parseInt(j.substring(2,4),16);f.B=parseInt(j.substring(4,6),16);return f},fromRGB:function(j,f,d){var b={};"undefined"!=typeof j&&("undefined"!=typeof f&&"undefined"!=typeof d)&&(b.Hexa=
this.toHex(j)+this.toHex(f)+this.toHex(d),b.Html="#"+b.Hexa,b.R=j,b.G=f,b.B=d);return b},ARGBToHex:function(j){var f=this.toHex(j>>16&255),d=this.toHex(j>>8&255),j=this.toHex(j&255);return f+d+j},toHex:function(j){if(void 0===j)return"000000";if(0>j)return gx.color.ARGBToHex(j);if(0===j)return j+"0";for(var f=0,d="";0!==j;)f=j%16,j=(j-f)/16,d="0123456789ABCDEF".charAt(f)+d;0!==d.length%2&&(d="0"+d);return d}};
gx.popup=function(j){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.left=this.top=this.position=this.height=this.width=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};this.open=function(f){this.state="opening";this.id=f.id||"gxdialog";this.callbacks=f.callbacks;gx.popup.ext.window(this,!1,0,0,f.w,f.h,f.contentHtml,"white",f.title,
"black","black","black","black",!0,!0,!0,void 0===f.resizable||f.resizable,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader","PopupHeaderButton","PopupContent","PopupBorder","PopupShadow",f.showParentPopups,!1,f.callbacks,f.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened"};this.close=function(){this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;
delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(f,d){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=d?d:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){if(gx.lang.isArray(f))this.url=
f[0],this.autoresize=f[1],this.width=f[2],this.height=f[3],this.position=f[4],this.top=f[5],this.left=f[6],this.OncloseCmds=f[7]||[],this.ReturnParms=f[8]||[];else if(f&&f.Url&&(this.url=f.Url,"undefined"!=typeof f.Autoresize&&(this.autoresize=f.Autoresize),"undefined"!=typeof f.Width&&(this.width=f.Width),"undefined"!=typeof f.Height&&(this.height=f.Height),"undefined"!=typeof f.Position&&(this.position=f.Position),"undefined"!=typeof f.Top&&(this.top=f.Top),"undefined"!=typeof f.Left&&(this.left=
f.Left),"undefined"!=typeof f.OncloseCmds&&(this.OncloseCmds=f.OncloseCmds),"undefined"!=typeof f.ReturnParms))this.ReturnParms=f.ReturnParms};this.open=function(){this.state="opening";var b=gx.popup.gxOpener();this.lvl=-1;this.lvl=b&&b.gx&&b.gx.popup.ext.win&&b.gx.popup.ext.win.gx?b.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;b=this.url;if(this.IsPrompt){gx.popup.currentPrompt=
this;for(var a="?",c="",g="",d=this.ReturnParms.length,f=0;f<d;f++){if(gx.lang.emptyObject(this.ReturnParms[f].Ctrl))if("string"==typeof this.ReturnParms[f])c=gx.util.urlValue(this.ReturnParms[f])+",";else if("number"==typeof this.ReturnParms[f])c=gx.util.urlValue(this.ReturnParms[f].toString())+",";else if(this.CustomRenderGrid)g=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[f].id),gx.lang.emptyObject(g)||(c=gx.util.urlValue(g+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[f].id))continue;
else g=gx.fn.getHidden(this.ReturnParms[f].id),gx.lang.emptyObject(g)||(c=gx.util.urlValue(g)),c+=",";else c=gx.util.urlValue(this.ReturnParms[f].Ctrl)+",";a="out"==this.ReturnParms[f].IOType?a+",":a+c;this.ReturnParms[f].isLastKey&&(gx.fn.isOutputParm(this.ReturnParms[f])&&!this.PromptIsGet)&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);b+=a}a=document.activeElement;a==document.body&&gx.csv.lastControl&&(a=gx.csv.lastControl);
a&&(a&&(this.callerActiveElement=a),a.blur&&a.blur());this.InternalPopup=gx.popup.Impl(this,b,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var b=[];if(this.IsPrompt)for(var a=this.ReturnParms.length,c=0;c<a;c++){var g=this.ReturnParms[c];gx.fn.isOutputParm(g)&&b.push(g)}else return this.ReturnParms;return b};this.close=function(b){var a;this.state="closing";b&&(this.RawReturnedParms=b);var c=window;gx.popup.ext.win?(c=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),
gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var g=function(){this.beforeClose&&this.beforeClose(b);if(!this.isPdf&&this.frameWindow&&this.frameWindow.gx){if(this.IsPrompt)this.parentPopup==null?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null;this.frameWindow.gx.evt.onunload.call(this.frameWindow);this.frameWindow=this.frameDocument=this.frameDocument.gxPopup=null}gx.popup.ext.close(this);var c=this.getOutputParms();if(b!=
null&&this.IsPrompt){var g=b.length,d=gx.popup.assignPromptField,f=gx.popup;if(!gx.lang.emptyObject(this.CustomRenderGrid)){d=this.CustomRenderGrid.grid.setCellValue;f=this.CustomRenderGrid.grid}for(a=0;a<g;a++)d.apply(f,[c[a],b[a]]);d=null;g=c.length;for(a=0;a<g;a++){f=c[a].Ctrl;gx.fn.isAccepted(f)&&(d=f)}if(d&&gx.TabOnPrompSelect){c=gx.fn.getControlIndex(d);c!=-1&&(d=gx.fn.searchFocus(c+1,true))}gx.fn.setFocus(d);if(this.PromptIsGet){gx.csv.loadScreen();gx.fn.setFocus(d)}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+
"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),typeof window.GXPkIsDirty=="undefined"?false:window.GXPkIsDirty,null,"eng")}catch(j){gx.dbg.logEx(j,"gxpopup.js","close")}}else b&&c&&(c instanceof Array&&c.length>0)&&gx.fn.setReturnParms(this.Opener,c,b,this.CustomRenderGrid);gx.ajax.dispatchCommands(this.OncloseCmds);this.cleanup();this.state="closed";this.afterClose&&this.afterClose(b)},d=gx.util.browser;d.isFirefox()||d.isIE()?c.setTimeout(g.closure(this),10):g.call(this)};this.setFocusFirst=
function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload()};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(b){gx.dbg.logEx(b,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},gxOpener:function(){var f=null;try{parent.gxTestAvailable=1,f=parent}catch(d){}return f},setFocus:function(){var f=
this.getPopup();f&&f.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(f){var d=gx.popup.getPopup();d?"opened"==d.state?f():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[f],50):f()},getPopup:function(){var f=this.gxOpener();try{if(!gx.lang.emptyObject(f)&&!gx.lang.emptyObject(f.gx))return f.gx.popup.currentPopup}catch(d){}return null},setPopup:function(f){this.currentPopup=f},open:function(f){return this.openPopup(f)},
openUrl:function(f,d,b){var a=1,c=0,g=0,j=0,n=0,l=0;b&&(a=b[0],c=b[1],g=b[2],j=b[3],n=b[4],l=b[5]);return this.openPopup([f,a,c,g,j,n,l,[],d])},openPopup:function(f){var d=this.getPopup(),b,a;if(!d||d.Opener!==gx.O||!gx.lang.isArray(f)){var c=new this.Popup(f,!1);c.Opener=gx.O;f=0;for(d=c.ReturnParms.length;f<d;f++)if((a=gx.fn.vStructForVar(c.ReturnParms[f]))&&a.grid)if(b=gx.O.getGridById(a.grid))break;b&&b.isUsercontrol&&(c.CustomRenderGrid=b);c.open();return c}d.OncloseCmds.push({popup:f})},openDialog:function(f){var d=
new this.Dialog;d.Opener=gx.O;d.open(f);return d},openPrompt:function(f,d,b,a,c,g){if(null==gx.popup.currentPrompt){a&&gx.setGxO(a,c);var j=d[0].Ctrl,n=!1,l,o;if(j)l=gx.fn.rowGridId(j),j=gx.fn.controlRowId(j),!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(j)&&(gx.csv.lastGrid=l,gx.fn.setCurrentGridRow(l,j));else{for(var j=0,m=d.length;j<m;j++)if(d[j].IOType){l=d[j].id;break}if(l&&(l=gx.O.getValidStructFld(l),!gx.lang.emptyObject(l)&&(o=gx.O.getGridById(l.grid))))if(n=o.isUsercontrol)l=o.gridId+"",
j=!gx.lang.emptyObject(o.grid.getSelectedRow)?gx.text.padl(o.grid.getSelectedRow()+"",4,"0"):void 0,!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(j)&&(gx.csv.lastGrid=l,gx.fn.setCurrentGridRow(l,j))}if(g||this.outParmsAccepted(d)||n)f=new this.Popup([f,1,0,0,0,0,0,[],d],!0),f.IsMod=b,f.Opener=gx.getObj(a,c),n&&(f.CustomRenderGrid=o),f.open()}},outParmsAccepted:function(f){for(var d=f.length,b=!1,a=0;a<d;a++){var c=f[a];gx.fn.isOutputParm(c)&&(b=!0);if(gx.fn.isOutputParm(c)&&c.Ctrl&&gx.fn.isAccepted(c.Ctrl))return!0}return!b},
gxReturn:function(f){gx.fn.closeWindow(f)},parmId:function(f){f=gx.dom.id(f);0===f.indexOf("span_")&&(f=f.substring(5));return f},popuplvl:function(){var f=gx.popup.getPopup();return!f||!f.window?-1:f.window.gx.popup.lvl},assignPromptField:function(f,d){if(!gx.lang.emptyObject(f)&&(gx.csv.pkDirty=f.isKey,f.Ctrl)){"checkbox"==f.Ctrl.type&&f.Ctrl.value!=d&&(f.Ctrl.checked=!f.Ctrl.checked);f.Ctrl.value!=d&&f.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var b=gx.csv.ctxControlId(this.parmId(f.Ctrl)),a=
gx.O.getValidStructFld(b),c;if(!gx.lang.emptyObject(a)&&(c=gx.O.getValidStructId(a.fld)))c>gx.O.toValid&&(gx.O.toValid=c),gx.csv.validateAll();!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(a.v2c)&&("date"==a.type||"dtime"==a.type)?(a.v2v(d),a.v2c()):gx.fn.setControlValue(this.parmId(f.Ctrl),d,0);gx.fn.setControlGxValid(f.Ctrl,"0");gx.evt.execOnchange(f.Ctrl);var g=gx.dom.byId("span_"+f.Ctrl.name);null!=g&&(0===g.childNodes.length&&g.appendChild(gx.popup.gxOpener().document.createTextNode("")),g.childNodes[0].nodeValue=
d);a&&a.gxgrid&&a.gxgrid.updateControlValue(a,!1);gx.util.balloon.clear(b);if(c&&(gx.O.toValid=c,gx.csv.validateAll(),!gx.lang.emptyObject(a.rgrid))){b=a.rgrid.length;for(c=0;c<b;c++)a.rgrid[c].filterVarChanged()}}},autofit:function(){var f=this.getPopup();!gx.lang.emptyObject(f)&&"opened"==f.state&&this.ext.autofit(f,null,!1)},Impl:function(f,d,b,a,c,g,j,n){return new this.ext.popUp(f,b,g,n,j,a,c,"gxp",d,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,
!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader","PopupHeaderButton","PopupContent","PopupBorder","PopupShadow",void 0)},setZIndex:function(f){f=gx.dom.getStyle(f,"zIndex");isNaN(f)&&(f=999);f++;this.zindex=f;this.ext.zdx=f},ext:{w3c:gx.util.browser.w3c,ns4:gx.util.browser.ns4,ie5:gx.util.browser.ie5,ns6:gx.util.browser.ns6,isFF:gx.util.browser.isFirefox(),currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,
hide:function(f){if(this.w3c){var d=gx.dom.byId;d(f+"_t").style.visibility="hidden";d(f+"_c").style.visibility="hidden";d(f+"_rs").style.visibility="hidden";d(f+"_b").style.visibility="hidden"}},show:function(f){var d=gx.dom.byId;d(f+"_t").style.visibility="visible";d(f+"_c").style.visibility="visible";d(f+"_rs").style.visibility="visible";d(f+"_b").style.visibility="visible"},close:function(f,d){if(!d||!("function"==typeof d&&!1===d())){gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=
null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var b=f.id,a=document.getElementById(b+"_b"),b=document.getElementById(b+"_ifrm");gx.popup.ext.deinitmodal(f);gx.popup.setPopup(f.parentPopup);var c=f.callerActiveElement;c&&c.focus&&c.focus();f.parentPopup?f.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[f]):gx.fx.obs.notify("popup.close",[f]);b&&(b.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?a.parentNode.removeChild(a):gx.dom.removeControlSafe(a)}},
move:function(f,d,b){if(this.w3c){var a=gx.dom.byId,c=a(f+"_b"),f=a(f+"_c");c.style.left=d+"px";c.style.top=b+"px";f.style.overflow="hidden"}},resize:function(f,d,b){if(this.w3c){var a=gx.dom.byId;if(a(f+"_rs").rsEnable){var c=a(f+"_extWA"),g=a(f+"_rs"),j=a(f+"_b"),n=a(f+"_t"),f=a(f+"_c"),a=this.ie5;c.style.display="block";g.style.left=Math.max(d,a?88:92)+"px";g.style.top=Math.max(b,a?68:72)+"px";j.style.width=Math.max(d+(a?12:8),100)+"px";j.style.height=Math.max(b+(a?12:8),80)+"px";n.style.width=
Math.max(d+(a?4:3),this.ns6?95:92)+"px";f.style.width=Math.max(d-(a?-5:5),a?92:87)+"px";f.style.height=Math.max(b-(a?24:28),44)+"px";f.style.overflow="hidden"}}},ns6bugfix:function(){0<navigator.userAgent.indexOf("Netscape/6")&&setTimeout("self.resizeBy(0,1); self.resizeBy(0,-1);",100)},movepopup:function(){null!=this.currIDb&&this.w3c&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.w3c&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,
gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(f,d){document.getElementById(d.cid+"_extWA").style.display="none";gx.popup.ext.currRS=null},startRS:function(f,d){var b=gx.popup.ext,a=b.ie5?event.clientX+gx.dom.documentScroll().scrollLeft:f.pageX,c=b.ie5?event.clientY+gx.dom.documentScroll().scrollTop:f.pageY;b.rsxoff=parseInt(d.style.left,0)-a;b.rsyoff=parseInt(d.style.top,0)-c;b.currRS=d;b.ns6&&(document.getElementById(d.cid+"_c").style.overflow="hidden");return!1},changez:function(f){var f=
null!=f?f:this,d=gx.popup.ext,b=gx.dom.byId;d.ns6&&(b(f.cid+"_c").style.overflow="hidden");f.style.zIndex=++d.zdx;b(f.cid+"_rs").style.zIndex=++d.zdx},stopdrag:function(f,d){var b=gx.popup.ext;b.currIDb=null;document.getElementById(d.cid+"_extWA").style.display="none";b.ns6bugfix();this.hideFrameMask(d)},grab_id:function(f,d){var b=gx.popup.ext,a=gx.dom.byId,c=gx.util.browser;gx.evt.mouse.update(f);var g=gx.evt.mouse.x,j=gx.evt.mouse.y;b.xoff=parseInt(a(d.cid+"_b").style.left,0)-g;b.yoff=parseInt(a(d.cid+
"_b").style.top,0)-j;b.currIDb=a(d.cid+"_b");c.isIE()&&10>c.ieVersion()&&(a(d.cid+"_extWA").style.display="block");return!1},showFrameMask:function(f){var f=j("#"+f.cid+"_c"),d=f.children(".gx-popup-frame-mask");0===d.length&&(d=j('<div class="gx-popup-frame-mask"></div>'),f.append(d));d.show()},hideFrameMask:function(f){j("#"+f.cid+"_c").children(".gx-popup-frame-mask").hide()},subBox:function(f,d,b,a,c,g){c=document.createElement("div");c.setAttribute("id",g);c.style.position="absolute";c.style.left=
f+"px";c.style.top=d+"px";c.style.width=b+"px";c.style.height=a+"px";c.style.visibility="visible";c.style.padding="0px";return c},window:function(f,d,b,a,c,g,j,n,l,o,m,k,q,t,s,r,v,u,x,y,B,A,z,w,C,D,G,F){C=void 0!==C?C:gx.popup.showParentPopups;q=f.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);w=this.win.gx.dom.byId.closure(this.win.gx.dom);c=Math.max(c,100);g=Math.max(g,80);d=new this.subBox(c-(this.ie5?12:8),g-(this.ie5?12:8),7,7,"",q+"_rs");v&&(d.innerHTML='<img src="'+x+
'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',d.style.cursor="se-resize");d.rsEnable=v;x=this.ie5?c:c+4;b=new this.subBox(b,a,c,g,m,q+"_b");b.className=gx.runtimeTemplates?"gx-responsive-popup "+z:z;b.style.display="block";b.style.boxSizing="content-box";b.style.zIndex=++this.zdx;s||(b.style.visibility="hidden");x=this.ie5?c-8:c-5;z=new this.subBox(2,2,x,20,o,q+"_t");z.style.overflow="hidden";z.style.boxSizing="content-box";z.className=y;s||(z.style.visibility=
"hidden");z.innerHTML='<span id="'+q+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+l+'</span><span class="'+B+'" style="z-index:'+ ++this.zdx+';" id="'+q+'_cls"></span>';x=this.ie5?c-7:c-13;c=new this.subBox(2,24,x,g-36,n,q+"_c");c.className=A;"string"==typeof j?c.innerHTML=j:c.appendChild(j);c.style.overflow="hidden";c.style.boxSizing="content-box";s||(c.style.visibility="hidden");s||(b.style.visibility="hidden");j=new this.subBox(2,
24,0,0,"",q+"_extWA");j.style.display="none";j.style.width="100%";j.style.height="100%";j.style.boxSizing="content-box";b.appendChild(z);b.appendChild(c);b.appendChild(j);b.appendChild(d);F=gx.dom.el(F)||this.doc.body;F.appendChild(b);s||this.hide(q);var J=w(q+"_b");J.cid=q;J.isExt=u?!0:!1;var L=w(q+"_t");L.cid=q;v&&(s=w(q+"_rs"),s.cid=q,s.style.boxSizing="content-box",gx.evt.attach(s,"mousedown",this.startRS.closure(this,[s],!0)),gx.evt.attach(s,"mouseup",this.stopRS.closure(this,[s],!0)));s=w(q+
"_cls");J.activecolor=o;J.inactivecolor=k;gx.evt.attach(s,"click",G.close||this.close.closure(this,[f,G.beforeClose]));r&&(gx.evt.attach(L,"mousedown",function(a){this.grab_id(a,L);this.showFrameMask(L);gx.evt.attach(J,"mouseup",this.stopdrag.closure(this,[L],true),this,{single:true})},this),v&&gx.evt.attach(d.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(t||C)&&this.initmodal(f,C,D)},popUp:function(f,d,b,a,c,g,j,n,l,o,m,k,q,t,s,r,v,u,x,y,B,A,z,w,C,D,G,F,J,L,O,K,H,E,Q){m=gx.popup.ext;
null!=f.parentPopup?(k=f.parentPopup.window,m=k.gx.popup.ext,m.win=k,m.doc=k.document,gx.popup.ext=m):(m.win=window,m.doc=m.win.document);m.win.gx.popup.setPopup(f);f.window=m.win;f.document=m.doc;m.win.gx.popup.lvl++;n+=m.win.gx.popup.lvl;f.id=n;!f.IsPrompt&&!gx.util.sameAppUrl(l)?(gx.popup.setPopup(null),f=new Date,f=f.getTime(),n="",1==b&&(n=m.ns4?"screenX="+a+",screenY="+c:"left="+a+",top="+c),a="",d||(a=",width="+g+",height="+j),window.open(w?l:"","gx"+f,"status=no,menubar=no"+a+",resizable="+
(A?"yes":"no")+",scrollbars=yes,"+n)):(l+=-1!=l.indexOf("?")?",":"?",l+=encodeURIComponent("gxPopupLevel="+m.win.gx.popup.lvl+";"),b=gx.util.getFileName(l),b=b.charAt(0).toUpperCase()+b.slice(1),k=gx.HTML5?"auto":"100%",s=gx.runtimeTemplates?gx.dom.fixes.getPopupMinWidth()+gx.dom.fixes.scrollbarWidth():k,l='<iframe id="'+n+'_ifrm" src="'+l+'" width="'+s+'" height="'+k+'" frameborder="0" style="overflow:auto;" title="'+b+'"></iframe>',b={close:f.close.closure(f)},m.window(f,d,a,c,g,j,l,o,q,t,r,v,u,
x,y,B,A,w,J,L,O,K,H,E,Q,!0,b),d=m.win.gx.dom.el(n+"_ifrm"),m.iFrame=d,gx.lang.doCallTimeout(m.showIfLoaded,m,[f,d,1],50))},initmodal:function(f,d,b){f.showParentPopups=d;null==f.parentPopup?gx.ajax.disableForm(b,!0):d||this.hide(f.parentPopup.id)},deinitmodal:function(f){if(null==f.parentPopup)gx.ajax.enableForm();else{this.show(f.parentPopup.id);var d=f.parentPopup.frameWindow;d&&d.gx&&f.parentPopup.frameWindow.gx.ajax.enableForm()}},isPDFPopup:function(f,d){if(void 0===d.isPdf){var b=f.src;if(gx.util.getContentTypeFromExt(b)==
gx.util.contentTypes.pdf)return d.isPdf=!0;var a=!0;try{if(a=f.contentDocument,a=f.contentWindow.document,a.contentType==gx.util.contentTypes.pdf)return d.isPdf=!0}catch(c){a=!1}if(!1===a){var g,a={};a.url=b;a.method="HEAD";a.sync=!0;a.ajaxHeader=!1;a.handler=function(a,b,c){g=c.getResponseHeader("Content-Type")};a.obj=!0;gx.http.doCall(a);if(g&&0<=g.indexOf(gx.util.contentTypes.pdf))return d.isPdf=!0}return!1}return d.isPdf},showIfLoaded:function(f,d,b){try{if(f.isActive()&&(this.docReady(d,b)||
10<b&&this.isPDFPopup(d,f))){var a=gx.dom.iFrameDoc(d),c=!1;try{c=a&&"about:blank"!=a.URL}catch(g){}var j=this.isPDFPopup(d,f);if(c||j){f.state="opened";this.autofit(f,a,!0);return}}}catch(n){gx.dbg.logEx(n,"gxpopup.js","showIfLoaded")}b++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[f,d,b],50*b)},docReady:function(f,d){if("complete"==f.readyState)return!0;var b=gx.dom.iFrameDoc(f);if(b){var a;try{a="undefined"!=typeof b.gxReadyState?b.gxReadyState:b.readyState}catch(c){return!0}if("complete"==
a)return!0}return!gx.util.browser.isIE()&&10<=d&&b&&b.body&&0!==b.body.childNodes.length?!0:!1},autofit:function(f,d,b){if(!gx.lang.emptyObject(f)){var a=document;f.zindex=null!=a.gxPopup?this.zdx+a.gxPopup.zindex:this.zdx;var c=f.id,g=f.isPdf;this.doc||(this.doc=f.document);var a=this.doc,p=a.getElementById(c+"_ifrm");!d&&gx.popup.ispopup()&&(d=gx.dom.iFrameDoc(p));f.frameDocument=d;f.frameWindow=p.contentWindow;d&&!g&&(d.gxPopup=f);var n=a.getElementById(c+"_rs"),l=a.getElementById(c+"_t"),o=a.getElementById(c+
"_b"),m=a.getElementById(c+"_c"),k=a.getElementById(c+"_gxtitle"),q=gx.dom.getComputedStyle(m),t=gx.dom.getComputedStyle(l),s=gx.dom.getComputedStyle(o),r=gx.dom.getComputedStyle(n),v=parseInt(q.height,0),u=parseInt(q.width,0),x,y,B,A,z=0,w=0;x=gx.util.getWindowInfo().canAccessFrame;k.innerHTML=d&&!g?d.title:"";k.style.width="auto";if(!x||window==window.top||gx.lang.emptyObject(window.top))x=window.innerWidth||a.documentElement.clientWidth||a.body.offsetWidth,y=window.innerHeight||a.documentElement.clientHeight||
a.body.offsetHeight,B=gx.dom.documentScroll(a).scrollTop,A=gx.dom.documentScroll(a).scrollLeft;else{var C=gx.dom.position(window.frameElement);window.top.document.body.clientHeight>a.body.clientHeight?y=a.body.clientHeight:(y=window.top.document.body.clientHeight,w=C.y);B=a.body.scrollTop;A=a.body.scrollLeft;x=Math.min(window.top.document.body.clientWidth,a.body.clientWidth);window.top.document.body.clientWidth>a.body.clientWidth?x=a.body.clientWidth:(x=window.top.document.body.clientWidth,z=C.x)}C=
gx.dom.dimensions(o);f.autoresize||(v=f.height-v+C.h,u=f.width-u+C.w);var D=f.width-u,G=f.height-v;if(f.autoresize)if(!g&&d)if(d=gx.HTML5?d.documentElement||d.body:d.body,a=gx.util.browser.isEdge()?gx.dom.fixes.scrollbarWidth():0,d){gx.util.browser.isChrome()||gx.util.browser.isIE()?(d.gxwidth||(d.gxwidth=d.scrollWidth),D=d.gxwidth+a):D=d.scrollWidth+a;a=d.gxwidth+30-x;G=d.scrollHeight+30-y;g=0;if(d.scrollWidth>x)var F=D-d.clientWidth,g=g+(b&&0<F?F:0);D=Math.max(D,k.clientWidth+15)-u-(0<a?a:0)+g;
G=d.scrollHeight-v-(0<G?G:0)}else gx.util.browser.isIE()&&(0>D&&(D=0),0>G&&(G=0));else g&&(D=a.body.clientWidth/2,G=a.body.clientHeight/2);v=parseInt(f.top,0);u=parseInt(f.left,0);if(!f.position&&(v=(y-G)/2-C.h/2+B-w,u=(x-D)/2-C.w/2+A-z,0>v&&(v=5,G-=5),0>u))u=5,D-=5;o.style.top=parseInt(v,0)+"px";o.style.left=parseInt(u,0)+"px";f.autoresize?(f=function(a,b){var c=parseInt(a,0)+b;return c>0?c:a},l.style.width=f(t.width,D)+"px",o.style.height=f(s.height,G)+"px",o.style.width=f(s.width,D)+"px",m.style.height=
f(q.height,G)+"px",m.style.width=f(q.width,D)+"px",l=gx.util.browser.isIE()?4:2,n.style.top=parseInt(s.height,0)-parseInt(r.height,0)-l+"px",n.style.left=parseInt(s.width,0)-parseInt(r.width,0)-l+"px"):(v=f.height,u=f.width,s=this.ie5,n.style.left=Math.max(u,s?88:92)+"px",n.style.top=Math.max(v,s?68:72)+"px",o.style.width=Math.max(u+(s?12:8),100)+"px",o.style.height=Math.max(v+(s?12:8),80)+"px",l.style.width=Math.max(u+(s?4:3),this.ns6?95:92)+"px",m.style.width=Math.max(u-(s?-5:5),s?92:87)+"px",m.style.height=
Math.max(v-(s?24:28),44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(m.style["overflow-y"]="auto",m.style["-webkit-overflow-scrolling"]="touch"):m.style.overflow="hidden";j(p).css({height:"100%",width:"100%"});b&&this.show(c)}},_init:function(){this.w3c=gx.util.browser.w3c;this.ns4=gx.util.browser.ns4;this.ie5=gx.util.browser.ie5;this.ns6=gx.util.browser.ns6;setInterval(gx.popup.ext.movepopup.closure(gx.popup.ext),40)}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();
var f=this.getPopup();if(f){try{f.frameDocument&&(f.frameDocument.gxPopup=f)}catch(d){f.frameDocument=f.frameWindow.document,gx.dbg.logEx(d,"gxpopup.js","_init")}f=f.window.gx.popup;gx.fx.obs.addObserver("gx.onload",f,function(){this.autofit()}.closure(f));gx.fx.obs.addObserver("grid.onafterrefresh",f,function(b,a,c){a<c&&this.autofit()}.closure(f));gx.fx.obs.addObserver("gx.onafterevent",f,function(){this.autofit()}.closure(f))}}}}(gx.$);
gx.ajax=function(j){var f=/\?(.*)/;return{reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,resolveParmKey:function(d){var b=!1;d.av?b=d.av:d.ctrl&&d.prop?b=d.ctrl+d.prop:d.ctrl&&(b=d.ctrl);return b},serviceUrl:function(d,b){var a=gx.ajax.selfUrl();b&&(a=f.test(a)?a.replace(f,"?"+b+",$1"):a+("?"+b));return a},message:function(d,b,a,c,g){var f;return{gxO:b,grid:a,row:c,methods:[d],addMethod:function(a){this.methods.push(a)},gridsData:function(){var a=this.gxO.getGridById(this.grid,this.row),
b=a,c={};if(a){var g=function(a,b,c){j.each(a.childGrids,function(a,d){var f=c.gxO.getGridById(d.gridId,c.row);b[f.gridName]={id:f.gridId,lastRow:f.lastRowId};return g(f,b)})};g(a,c,this)}else for(j.each(this.gxO.Grids,function(a,b){c[b.gridName]={id:b.gridId,lastRow:b.lastRowId}});b;)c[a.gridName]={id:a.gridId,lastRow:a.lastRowId},b=b.parentGrid;return c},to_json:function(){var a={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,
pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(a.fullPost=this.fullPost);this.addGXStateParms(a);this.grid&&(a.grid=this.grid);a.grids=this.gridsData();this.row&&(a.row=this.row.substring(this.row.length-4));return gx.json.serializeJson(a)},getParmsMetadata:function(a){for(var b=[],c={},g=0,d=this.methods.length;g<d;g++){var f=this.methods[g];if(this.gxO.EvtParms[f])for(var f=this.gxO.EvtParms[f]["input"==a?0:1],j=0;j<f.length;j++)if(f[j].postForm||f[j].sPrefix||f[j].sSFPrefix||
f[j].sCompEvt)b.push(f[j]);else{var p=gx.ajax.resolveParmKey(f[j]);p&&(void 0===c[p]?(c[p]=b.length,b.push(f[j])):void 0===b[c[p]].grid&&void 0!==f[j].grid&&(b[c[p]]=f[j]))}}return b},parmFromHidden:function(a,b){var c=gx.O,g;gx.setGxO(b);!gx.lang.emptyObject(a)&&(!gx.lang.emptyObject(b)&&a.v2v)&&(g=gx.fn.getHidden(this.gxO.IsMasterPage?a.fld+"_MPAGE":gx.O.CmpContext+a.fld),a.v2v(g),g=b[a.gxvar]);gx.setGxO(c);return g},getInputParms:function(){for(var a=this.getParmsMetadata("input"),b=this.gxO.CmpContext,
c=[],g=[],d,f,p,s,r,v=0,u=a.length;v<u;v++)if(d=a[v],d.postForm){s={};s.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(s,gx.http.postDataFormat.JSON);for(var x in gx.http.viewState)this.fullPost[x]||(this.fullPost[x]=gx.http.viewState[x])}else if("Referrer"==d.prop)c.push(gx.referrer?gx.referrer:document.referrer);else if(d.sPrefix)c.push(this.gxO.sPrefix());else if(d.sSFPrefix)c.push("");else if(d.sCompEvt)c.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),
""));else{if(d.ctrl)d.prop?f=this.gxO.getCtrlPropertyValue(d.ctrl,d.prop):(p=this.gxO.getValidStructFld(d.ctrl),null!=p&&gx.html.controls.isMultiSelection(p.ctrltype)&&(s=gx.fn.getControlGridRef(p.fld,p.grid),(s=gx.dom.comboBoxToObj(s,f))&&(f=s)));else if(void 0!==d.fld&&(s=this.gxO.IsMasterPage?d.fld.replace(/_MPAGE$/,""):d.fld,(p=d.fld?this.gxO.getValidStructFld(s):null)&&("function"==typeof p.c2v&&"function"==typeof p.val&&void 0!==p.val())&&p.c2v()),f="function"==typeof this.gxO[d.av]?this.gxO[d.av](this.row):
void 0===this.gxO[d.av]?"":this.gxO[d.av],void 0!==d.grid){var y=f,B=[];j.each(this.gxO.Grids,function(a,c){if(c.gridId===d.grid){var g=c.parentRow?c.parentRow.gxId:"";if(p){f={pRow:g,c:[],hc:[],hsh:[],v:y};for(var j=1;j<=c.lastRowId;j++){r=gx.grid.getPaddedRowId(j);var n=p.isuc?gx.fn.getControlValue(p.fld+"_"+r+g):p.val(r+g);f.c.push(n);d.hsh&&f.hsh.push(gx.fn.getHash(b,p.fld,r+g));gx.lang.emptyObject(p.hc)||f.hc.push(gx.fn.getControlValue("GXHC"+p.fld+"_"+r+g))}}else gx.lang.isArray(f)&&(f={pRow:g,
c:f,v:f[Number(gx.fn.currentGridRowImpl(d.grid))-1]});B.push(f)}});f=B}else d.hsh&&(p&&p.grid?(r=gx.fn.currentGridRowImpl(p.grid)||"",""===r&&(f=this.parmFromHidden(p,this.gxO))):r="",g.push({hsh:gx.fn.getHash(this.gxO.CmpContext,d.fld,r),row:r}));c.push(f)}return{input:c,hashed:g}},addGXStateParms:function(a){var b={};gx.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(b.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(b)||(a.gxstate=b)},call:function(){f=j.Deferred();
var a=gx.O;gx.setGxO(this.gxO);var b;this.grid&&this.row&&(b=gx.fn.currentGridRowImpl(this.grid),gx.fn.setCurrentGridRow(this.grid,this.row));g&&gx.fn.objectOnpost();var c=this.getInputParms();g?(this.parms=c.input,this.hashedParms=c.hashed,this.doFullAjaxCall(!1)):this.doClientSideCall();this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,b);gx.setGxO(a);return f.promise()},doFullAjaxCall:function(a){var b=this.to_json();gx.evt.setProcessing(!0);this.gxO.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",
[b,a]);a=gx.ajax.getPostInfo(this.gxO,b,a);a.handler=this.postHandlerFullAjax.closure(this);a.handleAllStatusCodes=!0;a.url=gx.ajax.serviceUrl(gx.pO,gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));a.reqData=b;a.always=this.callback;a.contentType="application/json";gx.http.doCall(a)},doClientSideCall:function(){this.callback();f.resolve()},postHandlerFullAjax:function(a,b,c){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;var g;c.status==gx.http.STATUS_FORBIDDEN?alert(gx.getMessage("GXM_runtimeappsrv")+
" ("+c.status+")"):gx.http.checkResponseStatus(c)||(200>c.status||299<c.status?gx.dom.write(c.responseText):gx.http.validJsonResponse(c,b)&&(g=gx.json.evalJSON(b),null==g?gx.dom.write(b.toString()):(gx.csv.lastEvtResponse=g,gx.ajax.setJsonResponse({response:g,isPostBack:!0,gxObject:this.gxO,gridId:this.grid,row:this.row}))));gx.evt.setProcessing(!1);f.resolve();gx.fx.obs.notify("gx.onafterevent",[g])}}},timeoutActions:{ignore:0,warn:1},maxGETLength:function(d){return d.AjaxSecurity?600:1350},getImageUrl:function(d,
b){var a=d[b];if(gx.lang.emptyObject(a))return"";"object"==typeof a&&(d[b]=gx.ajax.imageGuidToUrl(a.guid));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+d[b],!0)},imageGuidToUrl:function(d){try{if(!gx.lang.emptyObject(this.resourceProvider)){var b=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(d)+",,"+encodeURIComponent(gx.theme);gx.http.callBackend_simple(b,!0,!0,"GET",null,!0);return gx.http.lastResponse}}catch(a){gx.dbg.logEx(a,"gxcallrpc.js","getImageUrl")}return d},
sendHeader:function(d){try{if(!gx.lang.emptyObject(this.resourceProvider))return gx.http.callBackend_simple(location.href,!0,!0,"HEAD",null,!0,!0,d),!0}catch(b){}return!1},encryptParms:function(d,b){return d.AjaxSecurity?gx.sec.encrypt(b):b},doPost:function(d,b,a,c){!1!==a&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[d,b]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);b=this.getPostInfo(gx.O,d,b);b.url=gx.ajax.serviceUrl(gx.O,d);b.onReady=function(){gx.evt.setProcessing(!1)};
b.always=c;gx.http.doCall(b)},getPostInfo:function(d,b,a){b={};b.formNode=gx.dom.form();b.method="POST";b.encoding="UTF-8";b.useCash=!1;b.gxO=d;!0===a&&(b.sync=!0);b.handler=gx.http.postHandler;this.multipartInfo(b);return b},multipartInfo:function(d){gx.dom.hasSelectedFile()&&(d.multipart=!0,d.mimetype="text/html",d.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(d,b){var a=void 0!==d.refresh_form,c;"GET"==(d.refresh||d.refresh_form)?gx.http.reload(!0):(c="RFR",b.IsMasterPage&&
(c+="_MPAGE"),a=a||!gx.pO.fullAjax?gx.pO:b,a.executeServerEvent(c,!0,null,!0))},dispatchCommands:function(d,b,a){b=b||gx.O;a=a||[];if(d&&0<d.length)for(var c=d.length,g=0;g<c;g++){var f=d[g],j=Object.keys?Object.keys(f)[0]:"";if(!gx.util.inArray(j,a)){f.set_focus&&gx.fn.usrSetFocus(f.set_focus,!0);f.print&&gx.printing.print(f.print);f.close&&(j=[],f.close instanceof Array&&(j=f.close),gx.fn.closeWindow(j));(void 0!==f.refresh||void 0!==f.refresh_form)&&gx.ajax.dispatchRefreshCommand(f,b);f.redirect&&
(f.redirect.url=gx.ajax.removeGXParms(f.redirect.url),gx.http.redirect(f.redirect.url,f.redirect.forceDisableFrm,!1,b));f.cmp_refresh&&(j=gx.pO.getWebComponent(f.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",j));if(f.popup){b.endFeedback();d.length>g+1&&(f.popup[7]=d.slice(g+1));gx.popup.open(f.popup);break}if(f.ucmethod){var l=gx.getObj(f.ucmethod.CmpContext,f.ucmethod.IsMasterPage);l&&(j=gx.O,gx.setGxO(l),(l=gx.O.getUserControl(f.ucmethod.Control))&&"function"==typeof l[f.ucmethod.Method]&&
l[f.ucmethod.Method].apply(l,f.ucmethod.Parms),gx.setGxO(j))}}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(d,b,a,c,g,f,j,l){b=b||gx.O;if(d&&0<d.length){a=d.length;for(g=0;g<a;g++)if(f=d[g],f.load){if(c=b.getGridById(f.load.grid,l))f.load.props.values=f.load.values,c.loadNewRows(f.load.props)}else f.addlines&&(c=b.getGridById(f.addlines.grid,l))&&c.getNewRows(f.addlines.count)}},willLeavePage:function(d){if(d)for(var b=d.length,a=0;a<b;a++)if(d[a].close)return!0;return!1},getRedirectCommand:function(d){if(d)for(var b=
d.length,a=0;a<b;a++){var c=d[a];if(c.popup)break;if(c.redirect)return c}return null},saveJsonResponse:function(d){this.lastJsonResponse=d},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;return this.lastJsonResponse},setPostResponse:function(d,b,a){return this.setJsonResponse({response:d,isPostBack:!0,gxObject:b||gx.O,context:a})},setJsonResponse:function(d){var b=d.response,a=d.isPostBack,c=d.afterCmpLoaded,
g=d.gxObject,f=d.gridId,n=d.row,l=d.context||{},o=gx.fn,m=gx.lang.doCall,k,q,d=this.willLeavePage(b.gxCommands);g&&(k=gx.O,gx.O=g);f&&n&&(q=gx.fn.currentGridRow(f),gx.fn.setCurrentGridRow(f,n));if(gx.evt.srvCommand)gx.evt.srvCommand=!1,m(gx.ajax.dispatchCommands,b.gxCommands,g);else{var t=this.getRedirectCommand(b.gxCommands);t&&t.redirect.forceDisableFrm?m(gx.ajax.dispatchCommands,b.gxCommands,g,["refresh","cmp_refresh"]):d?m(gx.ajax.dispatchCommands,b.gxCommands,g):(m(gx.ajax.dispatchPreCommands,
b.gxCommands,g,b.gxComponents,b.gxHiddens,b.gxValues,b.gxGrids,b.gxProps,n),m(o.clearCompontHiddens,b.gxComponents),m(o.setJsonHiddens,b.gxHiddens),m(o.setJsonComponents,b.gxComponents,b.DynComponentMap,b.gxHiddens,function(d){gx.http.loadStyles();gx.updateTheme();a&&gx.fn.installComponents(false);typeof c=="function"&&c();if(k)gx.O=k;var r=m(o.setJsonValues,b.gxValues),v=m(o.setJsonProperties,b.gxProps,n),t=j.map(d,function(a){a=o.cmpContextFromCtrl(a);if(a=gx.pO.WebComponents[a])return gx.lang.objToArray(a.UserControls).concat(a.getUserControlGrids())});
gx.util.balloon.clearAll();o.enableDisableDelete();a&&m(o.loadJsonGrids,b.gxGrids,a);m(o.setErrorViewer,b.gxMessages);if(a){var x;gx.pO.supportAjaxEvents&&(x=gx.lang.arrayUnique(v.concat(r,t)));o.objectPostback(x,d);o.setFocusAfterLoad(true);gx.dom.indexElements()}l.autoRefreshing||gx.popup.currentPopup||g.endFeedback();m(gx.ajax.dispatchCommands,b.gxCommands,g);q&&gx.fn.setCurrentGridRow(f,q)},a))}return d},swallowKeys:function(d){d.cancel=!0},disableForm:function(d,b){d=void 0===d||d;gx.pO.startFeedback(b);
d&&gx.fx.obs.addObserver("gx.keypress",this,this.swallowKeys)},enableForm:function(){gx.pO&&gx.pO.endFeedback();gx.fx.obs.deleteObserver("gx.keypress",this,this.swallowKeys)},isFormEnabled:function(){return gx.pO?!gx.pO.isFeedbackOn()&&!gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(gx.ajax.formAutocomplete&&!(gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||7>=gx.util.browser.ieVersion()))){var d=gx.dom.form(),b=document.createElement("iframe");
b.id="gx_iframe_force_ajax_autocomplete";b.name="gx_iframe_force_ajax_autocomplete";b.style.cssText="display: none";b.src="/content/blank";document.body.appendChild(b);var a=document.createElement("input");a.type="submit";a.style.cssText="display: none";d.appendChild(a);var c=d.target,g=d.action;d.target=b.name;d.action=b.src;var f=j(a);gx.evt.attach(a,"click",function(a){a.stopPropagation();return!0});f.click();setTimeout(function(){d.target=c;d.action=g;d.removeChild(a);document.body.removeChild(b)})}},
executeCliEvent:function(d,b,a){try{gx.evt.lastEvt=a;var c,g=gx.lang.emptyObject;if(!g(b)){var f=gx.fn.rowGridId(b);if(!g(f)){var j=gx.fn.getGridObj(f);g(j)||(c=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(f)||"0001",j.instanciateRow(c))}}gx.O[d].call(gx.O,c)}catch(l){gx.dbg.logEx(l,"gxcallrpc.js","executeCliEvent")}},suggest:function(d,b,a,c,g,f,j){d=new gx.fx.suggestProvider(d,b,a,c);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(a),d,a,g,f,j)},hideCode:function(d,b,a){for(var c=this.objectUrl()+
"?",b="gxajaxHideCode_"+b,g=d.length,f=0;f<g;f++)b+=","+encodeURIComponent(eval(d[f]));c+=gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(b){gx.fn.setVarValues(a,b)},c,!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(d,b,a){var c=a?gx.fn.setGridComboValues:gx.fn.setComboValues,g=a?b:gx.fn.screen_CtrlRef(b).name,a=this.objectUrl()+"?",d="gxajaxCallCrl_"+b+","+this.arrayToUrl(d),a=a+gx.ajax.encryptParms(gx.O,d);gx.http.callBackend_impl(function(a){c(g,a)},a,!0,gx.http.modes.retval)},
refreshGrid:function(d,b){var a=gx.O;gx.setGxO(d.parentObject);var c="GET",g=gx.ajax.gxObjectUrl(d.parentObject)+"?",f="gxajaxGridRefresh_"+d.gridName+","+b,j;gx.fx.obs.notify("grid.onbeforerefresh",[d]);d.autoRefreshing=!0;gx.csv.autoRefreshing=d;var l=d.grid.rows.length;d.setPagingVars(0,0);if(f.length>gx.ajax.maxGETLength(gx.O)){c="POST";j=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+d.gridName)];for(var f=b.split(","),o=0,m=f.length;o<m;o++)j.push("GXParm"+o+"="+f[o])}else g+=gx.ajax.encryptParms(gx.O,
f);d.grid.mask();gx.http.doCall({method:c,url:g,reqData:j,handler:function(a,b,c){gx.http.postHandler(a,b,c,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[d,l,d.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;d.autoRefreshing=!1;d.grid.unmask();gx.setGxO(a)}})},newRows:function(d,b,a,c,g,f,j,l){var o=this.objectUrl()+"?",c="gxajaxNewRow_"+a+","+c+","+g+","+f,d=gx.fn.gridObj(d,j?a+"_"+j:a,b);gx.O.IsComponent&&(c+=","+gx.O.CmpContext);for(b=0;b<d.postingVariables.length;b++)c+=
","+encodeURIComponent(d.parentObject[d.postingVariables[b]]);o+=gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_simple(o,!0);if(o=gx.http.lastResponse)o=gx.json.evalJSON(o),l.call(d,o),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[o])},loadCrl:function(d,b,a){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var c=this.objectUrl()+"?",d="gxajaxExecAct_"+d+","+this.arrayToUrl(b),c=c+gx.ajax.encryptParms(gx.O,d);gx.http.callBackend_impl(function(b){gx.fn.setVarValues(a,
b)},c,!0,gx.http.modes.retval)}},udp:function(d,b,a){var c=this.objectUrl()+"?",d=d+","+this.arrayToUrl(b),c=c+gx.ajax.encryptParms(gx.O,d);gx.http.callBackend_impl(function(b){gx.fn.setVarValues(a,b)},c,!0,gx.http.modes.retval)},srvEvt:function(d,b,a,c){var g=this.objectUrl()+"?",d=d+","+b+","+this.arrayToUrl(a),g=g+gx.ajax.encryptParms(gx.O,d);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(c,a)},g,!0,gx.http.modes.full)},validSrvEvt:function(d,b,a,c){var g=function(b){gx.csv.setValidValues(a,
c,b)},f=this.objectUrl(),j=d+","+b+","+this.arrayToUrl(a,!0);j.length>this.maxGETLength(gx.O)?this.validAsPost(f,g,d,b,a):(f+="?"+gx.ajax.encryptParms(gx.O,j),gx.http.callBackend_impl(g,f,!0,gx.http.modes.call,!gx.ajax.isFormEnabled()))},validAsPost:function(d,b,a,c,g){a="GXEvent="+gx.ajax.encryptParms(gx.O,a)+"&GXAction="+c;0<g.length&&(a+="&"+this.getParmsPostData(g));gx.http.callBackend_impl(b,d,!0,gx.http.modes.call,!1,"POST",a)},getParmsPostData:function(d){for(var b="",a=0;a<d.length;a++)0<
a&&(b+="&"),b+="GXParm"+a+"="+this.parmToUrl(d[a],!0);return b},getCallerUrl:function(d){if(gx.stackSupported()){var d=(d=gx.call_stack_storage.get(gx.stackId(d)))||[],b=1==d.length&&d[0]!=gx.ajax.selfUrl()?d[0]:"";return b=1<d.length?d[d.length-2]:b}return gx.fn.getHidden("sCallerURL")},pushReferer:function(d,b){b="undefined"==typeof b?location.href:gx.ajax.absoluteurl(b);if(gx.stackSupported()){"undefined"==typeof d&&(d=gx.popup.popuplvl());var a=gx.call_stack_storage.get(gx.stackId(d)),a=a||[];
b!=gx.util.lastArray(a)&&a.push(b);gx.call_stack_storage.set(gx.stackId(d),a)}else{var a=this.objectUrl()+"?",c="dyncall,PushReferer,"+encodeURIComponent(b),a=a+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_simple(a,!0,!0)}},windowClosed:function(d){if(gx.stackSupported())if(-1==d){var b=gx.stackId(gx.popup.popuplvl()),d=(d=gx.call_stack_storage.get(b))||[];d.pop();gx.call_stack_storage.set(b,d)}else gx.call_stack_storage.remove(gx.stackId(d));else b="",b=-1==d?",PopReferer":",DeleteReferer,"+
d.toString(),d=this.objectUrl()+"?",d+=gx.ajax.encryptParms(gx.O,"dyncall"+b),gx.http.callBackend_simple(d,!0,!0)},aggSel:function(d,b,a){var c=this.objectUrl()+"?",d="gxajaxAggSel"+b+"_"+d+","+this.arrayToUrl(a),c=c+gx.ajax.encryptParms(gx.O,d);return gx.http.callBackend_impl(null,c,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(d,b,a,c,g){return gx.num.parseFloat(this.aggSel(d,b,g),a,c)},aggSelInteger:function(d,b,a){return parseInt(this.aggSel(d,b,a),10)},dynComponent:function(d,b,a,c){var g=
j.Deferred(),d=d.toLowerCase();gx.gen.isDotNet()&&(d+=".aspx");d=gx.ajax.objectUrl(d);a="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(a)+"&GXParm0="+encodeURIComponent(c);for(c=0;c<b.length;c++)a+="&GXParm"+(c+1).toString()+"="+encodeURIComponent("function"==typeof b[c].getUrlVal?b[c].getUrlVal():b[c]);gx.http.doCall({method:"POST",url:d,reqData:a,handler:function(a,b){g.resolve(gx.json.evalJSON(b))},error:function(){g.reject()}});return g.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,
"")},removeGXParms:function(d){return d.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(d){if(d&&d.ajaxSecurityToken){var b="GX_AUTH_"+(d.CmpContext?d.CmpContext:"")+d.ServerClass,b=b.toUpperCase(),d=gx.fn.getHidden(b)||d.InternalParms[b];return{id:b,value:d}}},arrayToUrl:function(d,b){for(var a="",c=d.length,g=0;g<c;g++)a+=this.parmToUrl(d[g],b)+",";return a},parmToUrl:function(d,b){var a=eval(d);if(a instanceof Array&&2==a.length&&"string"==typeof a[0]&&"string"==typeof a[1]){var c=
gx.fn.vStructForVar(a[0]);null!=c&&(a=gx.fn.getGridCtrlProperty(c.grid,c.fld,a[1]))}b&&(c=gx.fn.vStructForVar(gx.unprefixVar(d)),null!=c&&gx.html.controls.isMultiSelection(c.ctrltype)&&(c=gx.fn.getControlGridRef(c.fld,c.grid),(c=gx.dom.comboBoxToObj(c,a))&&(a=c)));"object"==typeof a&&(a=gx.json.serializeJson(a));if("undefined"==typeof a||null==a){c=!1;if(d&&0===d.indexOf("gx.O.")){var d=gx.unprefixVar(d),g=gx.fn.getHidden(gx.O.CmpContext+d);null!=g&&"undefined"!=typeof g&&(a=g,c=!0)}c||(a="")}return encodeURIComponent(a)},
gxObjectUrl:function(d){var b="";d&&d.serviceUrl?b=d.serviceUrl:d.fullAjax&&d&&(b=gx.fn.getControlValue(d.CmpContext+"_CMPPGM")||"");return this.objectUrl(b)},objectUrl:function(d){var b="";d?b=d:(b=gx.csv.cmpCtx?gx.fn.getControlValue(gx.csv.cmpCtx+"_CMPPGM"):gx.ajax.selfUrl(),null!=b&&(b=b.replace(/\?.*/,""),b=b.replace(/#[\s\S]*$/,"")),b=this.objnameFromUrl(b));return this.absoluteurl(this.objToRelativeUrl(b))},objToRelativeUrl:function(d){if(this.isabsoluteurl(d))return d;var b=location.pathname;
if(null!=d){for(var a=location.pathname.split("/"),b="",c=a.length,g=1;g<c-1;g++)b+="/"+a[g];b+="/"+d}return b},isabsoluteurl:function(d){return-1!==d.search("://")},isRelativeToHost:function(d){return"/"==d.substr(0,1)},absoluteurl:function(d){if(!this.isabsoluteurl(d)){if("/"!==d.charAt(0)){for(var b="",a=location.pathname.split("/"),c=1;c<a.length-1;c++)b+="/"+a[c];return location.protocol+"//"+location.host+b+"/"+d}return location.protocol+"//"+location.host+d}return d},objnameFromUrl:function(d){0<=
d.indexOf("?")&&(d=d.split("?")[0]);var b=d.split("/"),a=b.length;return 0===a?d:b[a-1]},_init:function(){this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER");if(gx.stackSupported()){var d=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(d)for(var b=0;b<d.length;b++)gx.ajax.pushReferer(gx.popup.popuplvl(),d[b]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){this.init=function(j,f){this.id=j;this.balloonid=j+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.quirksCompatMode=gx.csv.compatibleOverlapMode&&gx.csv.overlap&&("top"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition);this.sourceElements=f||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr="";this.active=!1;this.errorValue=
null;gx.util.balloon.lastLbl=null};this.setMessage=function(j){this.hasMessage||(this.messageWar=j,this.hasMessage=!0)};this.setError=function(j){this.hasMessage||(this.messageErr=j,this.hasMessage=this.isError=!0)};this.create=function(j,f,d,b){var a;a=document.createElement("span");a.id=j;a.className=d;j=document.createElement("div");if(this.quirksCompatMode){var c=gx.dom.position(f);0===c.x&&(0===c.y&&f.parentNode)&&(c=gx.dom.position(f.parentNode));var g=parseInt(c.x,10),c=parseInt(c.y,10);0>=
g&&(g=10);0>=c&&(c=20);j.style.position="absolute";"top"==gx.csv.messagePosition&&(j.style.top=c-gx.dom.dimensions(f).h-4-2+"px",j.style.left=g+"px");"bottom"==gx.csv.messagePosition&&(j.style.top=c+gx.dom.dimensions(f).h+2+"px",j.style.left=g+"px");j.style.zIndex=1}else j.style.position="relative";a.style.display="none";a.style.className=d;d=document.createTextNode(b);a.appendChild(d);j.appendChild(a);this.quirksCompatMode?document.body.appendChild(j):("right"==gx.csv.messagePosition||"bottom"==
gx.csv.messagePosition?(b=(d=f.nextSibling)?d.firstChild:null,d&&(d.id&&d.id=="span_"+this.id)&&(d=d.nextSibling),d&&d.id&&0<d.id.indexOf("dp_trigger")?f=d:d&&("A"==d.nodeName&&b&&"IMG"==b.nodeName&&b.id&&0===b.id.indexOf("PROMPT_"))&&(f=d),f.parentNode.insertBefore(j,f.nextSibling)):f.parentNode.insertBefore(j,f),!0===gx.csv.overlap)?(a.style.position="absolute",a.style.zIndex=100):a.style.position="relative";return a};this.getControlValue=function(){for(var j=[gx.fn.getControlValue(this.id)],f=
0,d=this.sourceElements.length;f<d;f++)j.push(gx.fn.getControlValue(this.sourceElements[f]));return j.join(";")};this.groupControl=function(j){j=gx.dom.el(j);"INPUT"===j.nodeName&&"radio"===j.type&&(j=j.parentNode&&"SPAN"==j.parentNode.tagName?j.parentNode:gx.dom.findParentByTagName(j,"table"));return j};this.hideBalloon=function(j){try{j&&(j.style.display="none",j.parentNode.style.display="none")}catch(f){gx.dbg.logEx(f,"gxballoon.js","hideBalloon")}};this.showBalloon=function(j){try{var f=gx.dom.el(this.id);
if(this.quirksCompatMode)j.style.display="block","top"==gx.csv.messagePosition&&(!this.quirksCompatMode&&!0===gx.csv.overlap)&&(j.style.top=0-gx.dom.dimensions(j).h+"px"),j.parentNode.style.display="inline";else if(j.style.display="inline",!this.quirksCompatMode)if("right"==gx.csv.messagePosition||"left"==gx.csv.messagePosition)j.parentNode.style.display="inline","left"==gx.csv.messagePosition&&!0===gx.csv.overlap&&(j.parentNode.style.left=0-gx.dom.dimensions(j).w+"px");else{if("bottom"==gx.csv.messagePosition&&
!0===gx.csv.overlap){j.parentNode.style.display="inline";if(!j.parentNode.style.left){var d=0-(gx.dom.position(j).x-gx.dom.position(f).x);j.parentNode.style.left=d-1+"px"}j.parentNode.style.top=gx.dom.dimensions(f).h+"px";j.style.top="0px"}"top"==gx.csv.messagePosition&&!0===gx.csv.overlap&&(j.parentNode.style.display="block",j.style.top=0-gx.dom.dimensions(j).h-2+"px");if(("top"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition)&&!1===gx.csv.overlap)j.parentNode.style.display="block"}}catch(b){gx.dbg.logEx(b,
"gxballoon.js","showBalloon")}};this.show=function(j){var f,d,b,a,c,g,p,n,l,o;if(!(void 0!==document.readyState&&"complete"!=document.readyState)){try{if(!1===this.hasMessage)return!0;d=gx.dom.el(this.id);null===d&&null!==gx.csv.validatingUC&&(d=gx.csv.validatingUC.getContainerControl());"hidden"==d.type?(f=gx.dom.el("span_"+this.id),null!==f&&(d=f)):"INPUT"===d.nodeName&&"radio"===d.type&&(n=gx.dom.byName(gx.dom.id(d)),d.parentNode&&"SPAN"==d.parentNode.tagName?d=d.parentNode:(p=n[0],d=gx.dom.findParentByTagName(d,
"table")));if(n){f=[];l=0;for(o=n.length;l<o;l++)f.push(n[l]);n=f}else{n=[d];l=0;for(o=this.sourceElements.length;l<o;l++)n.push(gx.dom.el(this.sourceElements[l]))}this.active=c=!0;0<this.messageErr.length?(b="Error",a=this.messageErr):0<this.messageWar.length&&(b="Warning",a=gx.html.encode(this.messageWar));""!==b&&(f=b+"Messages",gx.dom.addPrefixClass(d,b),(g=gx.dom.byId(this.balloonid))?(g.innerHTML=a,g.className=f,c=!1):g=this.create(this.balloonid,p?p:d,f,a));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&
this.hideBalloon(gx.util.balloon.lastLbl);gx.util.balloon.lastLbl=g;!0===j?gx.csv.oneAtAtime||this.showBalloon(g):this.showBalloon(g);if(!1===gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(c){gx.csv.oneAtAtime&&(gx.evt.attach(d,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(d,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this)));o=n.length;
for(l=0;l<o;l++)"INPUT"===n[l].nodeName&&"radio"===n[l].type?gx.evt.attach(n[l],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(n[l],"blur",gx.util.balloon.cvsHide,this)}this.errorValue=this.getControlValue()}catch(m){gx.dbg.logEx(m,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var j,f,d;try{j=this.groupControl(this.id),d=this.getControlValue(),d!=this.errorValue&&(this.errorValue=d,f=gx.dom.byId(this.balloonid),null!=f&&(gx.dom.removePrefixClass(j,"Error"),gx.dom.removePrefixClass(j,
"Warning"),this.hideBalloon(f),this.active=!1))}catch(b){}},cvsMouseOutHandler:function(){if(this.active){var j=gx.dom.byId(this.balloonid);null!=j&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=j.id&&this.hideBalloon(j):this.hideBalloon(j))}},cvsMouseOverHandler:function(){if(this.active){var j=gx.dom.byId(this.balloonid);null!=j&&this.showBalloon(j)}},clearAll:function(){var j,f,d;this.timerOn=!1;for(d in this.balloons)j=this.balloons[d],f=gx.util.balloon.cvsHide.closure(j),j.clear(),f()},
clear:function(j){var f,d,b;try{f=gx.csv.ctxControlId(j),this.balloons[f]&&(d=this.balloons[f],b=gx.util.balloon.cvsHide.closure(d),d.clear(),b())}catch(a){gx.dbg.logEx(a,"gxballoon.js","clear")}},getNew:function(j,f,d){var d=d||[],b,a,c,g=d.length;"undefined"!=typeof f&&(j=j+"_"+f);try{b=gx.fn.screen_CtrlRef(j);a=gx.dom.id(b);j=gx.csv.ctxControlId(a);for(c=0;c<g;c++)b=gx.fn.screen_CtrlRef(d[c]),a=gx.dom.id(b),d[c]=gx.csv.ctxControlId(a)}catch(p){gx.dbg.logEx(p,"gxballoon.js","getNew")}this.balloons[j]?
(f=this.balloons[j],f.sourceElements=d||[],f.clear()):(f=new this.impl,this.balloons[j]=f,f.init(j,d));return f}};
gx.grid={drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3},getImplClass:function(j,f){if(f){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,gx.grid.impl,!0);gx.lang.inherits(f,gx.ui.grid,!0);var d=new f;
j&&(d.ParentObject=j.parentObject,d.ControlName=j.gridName,j.parentObject.setUserControl(d));return d}return j.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(j){var f=j,f=void 0!=j?j:1;return 0!=f?f:9999},grid:function(j,f,d,b,a,c,g,p,n,l,o,m,k,q,t,s,r,v,u,x,y,B,A,z,w,C,D,G,F,J,L,O){var K=function(a){return function(c){c=this.parentObject.getGridById(b,c||gx.fn.currentGridRow(b));return a.call(this,c||this)}.closure(this)}.closure(this);this.parentObject=
j;this.parentObject["sub"+a+"_Rows"]=K(function(a){return a.grid.pageSize/a.grid.gxGridCols});this.parentObject[c.toUpperCase()+(n?"_MPAGE":"")+"_nFirstRecordOnPage"]=K(function(a){return a.grid.firstRecordOnPage});this.parentObject[c.toUpperCase()+(n?"_MPAGE":"")+"_nEOF"]=K(function(a){return a.grid.eof});this.gridLvl=f;this.gridLvlName=d;this.gridId=b;this.gridName=a;this.realGridName=c;this.containerName=g||this.gridName+"Container";this.parentName=l||"";this.pagingParms=[];this.lvlKey=o||[];this.isFreestyle=
m||!1;this.isResponsive=L||!1;this.allowHovering=(this.allowSelection=q||!1)&&t||!1;this.allowCollapsing=F||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=z||!1;this.hasAddlines=w||!1;this.hasForEachLine=C||!1;this.width=void 0!=y?y:0;this.widthUnit=B||"";this.gridCols=void 0!=k?k:1;this.gridCols=0!=this.gridCols?this.gridCols:9999;this.gridRows=void 0!=s?s:5;this.gridResponsiveCols=O||[1,1,1,1];this.usePaging=
(this.usePaging=r||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=v||!1;this.defaultSetsContext=u||!1;this.boundedCollType=x||"";this.boundedCollName=J||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=p;this.isMasterPageGrid=n;this.htmlTags="";this.onLineActivate=G;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];
this.IsValidState=[];this.implClass=D;this.grid=gx.grid.getImplClass(this,D);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=
this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=
this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=A?A:"New Row";this.grid.beforeRenderCallbacks=[];this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.gxCreateGridCode=function(a){return new gx.grid.grid(this.parentObject,
this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+a,this.gridName,this.containerName+"_"+a,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaulSetsContext,this.boundedCollType,this.width,this.widthUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing)}.closure(this);
this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.getPaddedRowId=function(a){a=""+a;return"0000".substring(0,4-a.length)+a};this.addColumnDinCode=function(a,b){this.gxAddColumnsCode.push(function(){a.apply(this,b)})};this.addSingleLineEdit=function(a,b,c,g,d,f,j,p,n,l,o,m,k,r,s,q,v,t,u,x,y,B,z){this.addColumnDinCode(this.addSingleLineEdit,arguments);var w=this.newColumn(g,j,m,p);w.visible=
v;w.htmlName=c;w.gxId=b;w.gxAttId=a;w.gxAttName=f;w.gxTooltip=d;w.gxWidthUnit=n;w.gxColSize=o;w.gxSetsContext=u;w.gxCssClass=y;w.gxColumnClass=z;w.gxControl=new gx.html.controls.singleLineEdit;w.gxControl.column=w;w.gxControl.isPassword=x;w.gxControl.visible=w.visible;w.gxControl.dataType=w.type;w.gxControl.clickEvent=k;this.grid.addColumn(w)};this.addPostingVar=function(a){this.postingVariables.push(a)};this.addMultipleLineEdit=function(a,b,c,g,d,f,j,p,n,l,o,m,k,r,s,q,v,t){this.addColumnDinCode(this.addMultipleLineEdit,
arguments);var u=this.newColumn(g,f,k,j);u.visible=s;u.htmlName=c;u.gxId=b;u.gxAttId=a;u.gxAttName=d;u.gxWidthUnit=p;u.gxSetsContext=q;u.gxColumnClass=t;u.gxControl=new gx.html.controls.multipleLineEdit;u.gxControl.column=u;u.gxControl.dataType=u.type;u.gxControl.visible=u.visible;u.gxControl.heightUnit=l;u.gxControl.clickEvent=r;this.grid.addColumn(u)};this.addBlob=function(a,b,c,g,d,f,j,p,n,l,o,m,k,r){this.addColumnDinCode(this.addBlob,arguments);var s=this.newColumn(g,f,"left",n);s.visible=m;s.htmlName=
c;s.gxId=b;s.gxAttId=a;s.gxAttName=d;s.gxWidthUnit=o;s.gxSetsContext=k;s.gxColumnClass=r;s.gxControl=new gx.html.controls.blob;s.gxControl.column=s;s.gxControl.dataType=s.type;s.gxControl.visible=s.visible;s.gxControl.height=p;s.gxControl.width=n;this.grid.addColumn(s)};this.addRadioButton=function(a,b,c,g,d,f,j,p,n,l,o){this.addColumnDinCode(this.addRadioButton,arguments);var m=this.newColumn(g,f,"left","");m.visible=n;m.htmlName=c;m.gxId=b;m.gxAttId=a;m.gxAttName=d;m.gxSetsContext=l;m.gxColumnClass=
o;m.gxControl=new gx.html.controls.radio;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.vertical=p;m.gxControl.visible=m.visible;m.gxControl.clickEvent=j;this.grid.addColumn(m)};this.addComboBox=function(a,b,c,g,d,f,j,p,n,l,o,m,k){this.addColumnDinCode(this.addComboBox,arguments);var s=this.newColumn(g,f,"left",o);s.visible=n;s.htmlName=c;s.gxId=b;s.gxAttId=a;s.gxAttName=d;s.gxSetsContext=l;s.gxWidthUnit=m;s.gxColumnClass=k;s.gxControl=new gx.html.controls.comboBox;s.gxControl.column=
s;s.gxControl.dataType=s.type;s.gxControl.rtEnabled=1==p;s.gxControl.visible=s.visible;s.gxControl.clickEvent=j;this.grid.addColumn(s)};this.addListBox=function(a,b,c,g,d,f,j,p,n,l,o,m,k,s){this.addColumnDinCode(this.addListBox,arguments);var r=this.newColumn(g,f,"left",o);r.visible=n;r.htmlName=c;r.gxId=b;r.gxAttId=a;r.gxAttName=d;r.gxSetsContext=l;r.gxWidthUnit=m;r.gxColumnClass=k;r.gxControl=new gx.html.controls.listBox;r.gxControl.column=r;r.gxControl.dataType=r.type;r.gxControl.rows=void 0!==
s?s:4;r.gxControl.rtEnabled=1==p;r.gxControl.visible=r.visible;r.gxControl.clickEvent=j;this.grid.addColumn(r)};this.addCheckBox=function(a,b,c,g,d,f,j,p,n,l,o,m,k,s,r){this.addColumnDinCode(this.addCheckBox,arguments);var q=this.newColumn(g,j,"left",k);q.visible=o;q.htmlName=c;q.gxId=b;q.gxAttId=a;q.gxAttName=f;q.gxChecked=p;q.gxUnChecked=n;q.gxSetsContext=m;q.gxWidthUnit=s;q.gxColumnClass=r;q.gxControl=new gx.html.controls.checkBox;q.gxControl.column=q;q.gxControl.checkedValue=p;q.gxControl.uncheckedValue=
n;q.gxControl.dataType=q.type;q.gxControl.visible=q.visible;q.gxControl.clickEvent=l;this.grid.addColumn(q)};this.addBitmap=function(a,b,c,g,d,f,j,p,n,l,o,m){this.addColumnDinCode(this.addBitmap,arguments);var k=this.newColumn(l,"","left",g);k.htmlName=b;k.gxId=c;k.gxAttId=a;k.gxWidthUnit=d;k.gxControl=new gx.html.controls.image;k.gxControl.column=k;k.gxControl.dataType=k.type;k.gxControl.width=g;k.gxControl.widthUnit=d;k.gxControl.height=f;k.gxControl.heightUnit=j;k.gxControl.clickEvent=p;k.gxCssClass=
o;k.gxColumnClass=m;this.grid.addColumn(k)};this.addVideo=function(a,b,c,g,d,f,j,p,n,l,o,m){this.addColumnDinCode(this.addVideo,arguments);var k=this.newColumn(l,"","left",g);k.htmlName=b;k.gxId=c;k.gxAttId=a;k.gxWidthUnit=d;k.gxControl=new gx.html.controls.video;k.gxControl.column=k;k.gxControl.dataType=k.type;k.gxControl.width=g;k.gxControl.widthUnit=d;k.gxControl.height=f;k.gxControl.heightUnit=j;k.gxControl.clickEvent=p;k.gxCssClass=o;k.gxColumnClass=m;this.grid.addColumn(k)};this.addAudio=function(a,
b,c,g,d,f,j,p,n,l,o,m){this.addColumnDinCode(this.addAudio,arguments);var k=this.newColumn(l,"","left",g);k.htmlName=b;k.gxId=c;k.gxAttId=a;k.gxWidthUnit=d;k.gxControl=new gx.html.controls.audio;k.gxControl.column=k;k.gxControl.dataType=k.type;k.gxControl.width=g;k.gxControl.widthUnit=d;k.gxControl.height=f;k.gxControl.heightUnit=j;k.gxControl.clickEvent=p;k.gxCssClass=o;k.gxColumnClass=m;this.grid.addColumn(k)};this.addTextBlock=function(a,b){this.addColumnDinCode(this.addTextBlock,arguments);var c=
this.newColumn("","","left");c.htmlName=a;c.gxControl=new gx.html.controls.textBlock;c.gxControl.column=c;c.gxControl.dataType=c.type;c.gxControl.clickEvent=b;this.grid.addColumn(c)};this.addLabel=function(a){this.addColumnDinCode(this.addLabel,arguments);var b=this.newColumn("","","left");b.htmlName=a;b.gxControl=new gx.html.controls.label;b.gxControl.column=b;this.grid.addColumn(b)};this.addButton=function(a,b,c,g,d){this.addColumnDinCode(this.addButton,arguments);var f=this.newColumn("","","left");
f.htmlName=b;f.gxId=a;f.gxControl=new gx.html.controls.button;f.gxControl.column=f;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.addGrid=function(a){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(a);var b=this.newColumn("","","left");b.htmlName=a.getContainerControlId();b.gxControl=new gx.html.controls.grid;b.gxControl.column=b;this.grid.addColumn(b)};this.addUsercontrol=function(a,b,c,g,d,f,j,p,n){this.addColumnDinCode(this.addUsercontrol,arguments);var l="",o=this.parentObject;
o.GridUCsProps&&o.GridUCsProps[d]&&(l=o.GridUCsProps[d].title||"");l=this.newColumn(l,"","left");l.gxUCId=a;l.gxUCLastId=b;l.gxUCClassName=c;l.gxUCContainerName=g;l.gxUCControlName=d;l.gxShowFunc=f;l.gxC2VFuncs=j;l.gxV2CFuncs=p;l.visible=n;l.gxControl=new gx.html.controls.userControl;l.gxControl.column=l;l.gxControl.dataType=l.type;this.grid.addColumn(l)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.userControlContainer;
a.gxControl.column=a;a.gxControl.dataType=a.type;this.grid.addColumn(a)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(a){this.addColumnDinCode(this.addWebComponent,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.webComponent;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addEmbeddedPage=function(a){this.addColumnDinCode(this.addEmbeddedPage,
arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.embeddedPage;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addHtmlCode=function(a){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(a)};this.startTable=function(a,b,c){this.addColumnDinCode(this.startTable,arguments);var g=this.newColumn("","","left");g.htmlName=a+"_"+b;g.gxControl=new gx.html.controls.table;g.gxControl.column=g;g.gxControl.width=c;g.gxControl.dataType=
g.type;this.grid.addColumn(g)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(a,b,c,g,d,f){this.addColumnDinCode(this.startRow,arguments);var j=this.newColumn("","","left");j.gxControl=new gx.html.controls.row;j.gxControl.column=j;j.gxControl.title=a;j.gxControl.align=b;j.gxControl.verticalAlign=c;j.gxControl.backColor=g;j.gxControl.borderColor=d;j.gxControl.cssClass=f;j.gxControl.ownCssClass=f;j.gxControl.dataType=
j.type;this.grid.addColumn(j)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(a,b,c,g,d,f,j,p,n,l){this.addColumnDinCode(this.startCell,arguments);var o=this.newColumn("","","left");o.gxControl=new gx.html.controls.cell;o.gxControl.column=o;o.gxControl.title=a;o.gxControl.align=b;o.gxControl.verticalAlign=c;o.gxControl.backColor=g;o.gxControl.borderColor=d;o.gxControl.height=f;o.gxControl.width=j;o.gxControl.colSpan=
p;o.gxControl.rowSpan=n;o.gxControl.cssClass=l;o.gxControl.dataType=o.type;this.grid.addColumn(o)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(a,b,c,g,d){this.addColumnDinCode(this.startGroup,arguments);var f=this.newColumn("","","left");f.htmlName=a;f.gxControl=new gx.html.controls.group;f.gxControl.column=f;f.gxControl.id=a;f.gxControl.caption=b;f.gxControl.height=
c;f.gxControl.width=g;f.gxControl.cssClass=d;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(a,b,c,g){this.addColumnDinCode(this.startDiv,arguments);var d=this.newColumn("","","left");d.htmlName=a+"_"+b;d.gxControl=new gx.html.controls.div;d.gxControl.column=d;d.gxControl.width=g;d.gxControl.height=c;d.gxControl.dataType=d.type;this.grid.addColumn(d)};this.endDiv=
function(){this.addColumnDinCode(this.endDiv,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.divEnd;a.gxControl.column=a;this.grid.addColumn(a)};this.newColumn=function(a,b,c,g){b=this.getColumnType(b);a=new gx.grid.column(a,b,g,c);this.currentBuffer=a.buffer;a.htmlName="";a.gxId="";a.gxAttId="";a.gxAttName="";return a};this.getColumnType=function(a){switch(a){case "decimal":case "int":a=gx.types.numeric;break;case "date":a=gx.types.date;break;case "dtime":a=gx.types.dateTime;
break;case "boolean":a=gx.types.bool;break;case "Geolocation":a=gx.types.geolocation;break;default:a=gx.types.character}return a};this.addOldComponent=function(a,b){"undefined"==typeof this.oldCmps[a]&&(this.oldCmps[a]=[]);this.oldCmps[a].push(b)};this.updateOldComponents=function(){for(var a=this.grid.rows.length,b=0;b<a;b++)delete this.oldCmps[this.grid.rows[b].gxId];for(var c in this.oldCmps){for(a=this.oldCmps[c];0<a.length;)b=a.shift(),gx.fn.deleteHidden(b);delete this.oldCmps[c]}};this.addHidden=
function(a){this.hiddens.push(a)};this.addHiddenControl=function(a,b,c){gx.fn.setHidden(a,b);!0!=c&&this.addHidden(a)};this.clearHiddens=function(){for(;0<this.hiddens.length;){var a=this.hiddens.shift();gx.fn.deleteHidden(a)}};var H={};this.setHtmlTags=function(a){gx.lang.apply(H,a);var b;b=' style="'+("0"==H.Visible?"display:none;":"");var a=""+(' class="'+H.Class+'"'),c=gx.lang.emptyObject;b+=!c(H.Background)?"background:"+H.Background+";":"";b+=!c(H.Backcolor)&&"0"!=H.Backcolor?"background-color:"+
gx.color.html(H.Backcolor).Html+";":"";b+=!c(H.Bordercolor)&&"0"!=H.Bordercolor?"border-color:"+gx.color.html(H.Bordercolor).Html+";":"";a+=!c(H.Align)?' align="'+H.Align+'"':"";a+=!c(H.Tooltiptext)?' title="'+H.Tooltiptext+'"':"";b+=!c(H.Borderwidth)&&"0"!=H.Borderwidth?" border-width:"+H.Borderwidth+";":"";a+=!c(H.Cellpadding)?' data-cellpadding="'+H.Cellpadding+'"':"";a+=!c(H.Cellspacing)?' data-cellspacing="'+H.Cellspacing+'"':"";a+=!c(H.Height)&&"0"!=H.Height?' height="'+H.Height+'"':"";a+=!c(H.Width)&&
"0"!=H.Width?' width="'+H.Width+'"':"";this.htmlTags=gx.text.trim(a+(b+'"'));this.grid.gxHtmlTags=this.htmlTags;c(H.Width)||(this.grid.gxWidth=H.Width);c(H.Height)||(this.grid.gxHeight=H.Height)};var E={};this.setGridStyles=function(a){gx.lang.apply(E,a);this.visible=void 0!=E.Visible?gx.lang.gxBoolean(E.Visible):!0;this.setSortable(void 0!=E.Sortable?gx.lang.gxBoolean(E.Sortable):!0);this.background=void 0!=E.Background?E.Background:"";this.cssClass=void 0!=E.Class?E.Class:"";this.titleBackstyle=
void 0!=E.Backcolorstyle?E.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=E.Titlefont?E.Titlefont:"";this.linesFont=void 0!=E.Linesfont?E.Linesfont:"";this.borderWidth=void 0!=E.Borderwidth?E.Borderwidth:"";this.toolTipText=void 0!=E.Tooltiptext?E.Tooltiptext:"";try{this.backcolor=void 0!=E.Backcolor?gx.color.html(E.Backcolor).Html:"",this.titleBackcolor=void 0!=E.Titlebackcolor?gx.color.html(E.Titlebackcolor).Html:"",this.titleForecolor=void 0!=E.Titleforecolor?gx.color.html(E.Titleforecolor).Html:
"",this.linesBackcolorOdd=void 0!=E.Backcolorodd?gx.color.html(E.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=E.Backcoloreven?gx.color.html(E.Backcoloreven).Html:"",this.bordercolor=void 0!=E.Bordercolor?gx.color.html(E.Bordercolor).Html:""}catch(b){gx.dbg.logEx(b,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=E.Borderwidth?E.Borderwidth:"";this.toolTipText=void 0!=E.Tooltiptext?E.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass=
"";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;
this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):
this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(a){if(this.sortable!=a){this.sortable=a;for(var b=
this.grid.columns.length,c=0;c<b;c++)this.grid.columns[c].sortable=a}};this.lastRowId=0;this.addRow=function(a){var b,c,g,d=this.lastRowId++,f=gx.grid.rowId(d+1),f=new gx.grid.row(d,a,f,this.grid.gxParentRowId);f.gxCmpContext=this.gxComponentContext;f.Grids=a.Grids;f.ownerGrid=this;f.gxLvl=this.gridLvl;this.setRowHiddens(a.Hiddens);for(var j=this.grid.columns,p=j.length,n=0;n<p;n++){var l=j[n];if(0!==d){g=this.grid.rows[0].gxProps[n];b=a.Props[n].length;for(c=this.grid.rowsValues?g.length-1:g.length;b<
c;b++)f.gxProps[n].push(g[b])}c=a.Props[n];c=c[c.length-1];if((g=this.grid.rowsValues)&&!this.autoRefreshing)b=g[d],void 0!==b&&0<b.length&&(c=g[d][n]);f.values[n]=c;this.grid.rowsValues&&f.gxProps[n].push(c);this.parentObject.isTransaction()&&(l=this.columnIndexInKey(l.gxAttId),-1!=l&&(f.gxKeyValues[l]=c))}this.isFreestyle&&(f.IsNew=!0,this.installChildGrids(f));this.grid.addRow(f);return f};this.installChildGrids=function(a){for(var b=this.childGrids.length,c=0;c<b;c++){var g=this.childGrids[c],
d=g.gxCreateGridCode(a.gxId);d.grid.parentGxObject=this.parentObject;var f=(!d.isMasterPageGrid?this.grid.gxCmpContext:"MP")+d.realGridName+"Container";d.gxContainerDivName=f+"Div_"+a.gxId;d.gxContainerDataName=f+"Data_"+a.gxId;d.gxContainerValuesName=f+"DataV_"+a.gxId;a.gxGrids.push(d);d.parentGrid=this;d.parentRow=a;this.parentObject.setGrid(d);g.copyPropertiesTo(d);d.grid.gxCmpContext=this.grid.gxCmpContext;d.grid.gxParentRowId=a.gxId;this.installChildGridColumns(d,g)}};this.installChildGridColumns=
function(a,b){for(var c=b.gxAddColumnsCode.length,g=0;g<c;g++)b.gxAddColumnsCode[g].call(a)};this.copyPropertiesTo=function(a){a.cssClass=this.cssClass;a.titleBackstyle=this.titleBackstyle;a.titleBackcolor=this.titleBackcolor;a.linesBackcolorOdd=this.linesBackcolorOdd;a.linesBackcolorEven=this.linesBackcolorEven;a.grid.gxCssClass=this.grid.gxCssClass;a.grid.gxTitleClass=this.grid.gxTitleClass;a.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;a.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;a.grid.gxAllowCollapsing=
this.grid.gxAllowCollapsing;a.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(a){if(a&&this.parentObject.isTransaction())for(var b in a)gx.fn.setHidden(b,a[b])};this.executeEvent=function(a,b){gx.evt.setGridEvt(this.gridId.toString(),b);this.instanciateRow(b);this.parentObject[a].call(this.parentObject,b)};this.getHiddenName=function(a){var b="";this.parentRow&&(b="_"+this.parentRow.gxId);return this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":
"")+"_"+a+b};this.updatePagingVars=function(a,b){void 0==a&&void 0==b?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=a,this.grid.firstRecordOnPage=b)};this.setPagingVars=function(a,b){this.grid.eof=a;this.grid.firstRecordOnPage=b;gx.fn.setHidden(this.getHiddenName("nEOF"),a);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),b)};this.clearDefaultEventHandlers=function(){var a=0;
if(this.defaultDragable||this.defaultSetsContext)for(var a=this.grid.rows.length,b=0;b<a;b++){var c=this.containerName+"Row_"+this.grid.rows[b].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(c);this.defaultSetsContext&&gx.fx.ctx.deleteSetter(c)}a=this.grid.columns.length;for(b=0;b<a;b++)if(c=this.grid.columns[b],!0==c.gxSetsContext)for(var g=this.grid.rows.length,d=0;d<g;d++)gx.fx.ctx.deleteSetter(c.htmlName+"_"+this.grid.rows[d].gxId)};this.setDefaultEventHandlers=function(){var a=0;if(this.defaultDragable||
this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(var b=this.getRowAsTypes(),a=this.grid.rows.length,c=0;c<a;c++){var g=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[c].gxId,d=gx.dom.el(g);null!=d&&(d.gxGrid=this.containerName,d.gxGridName=this.gridName,d.gxId=this.grid.rows[c].gxId);g=this.containerName+"Row_"+this.grid.rows[c].gxId;d=function(a){return this.returnRowData(a)}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,g,this.cssClass,
b,d);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,g,this.cssClass,b,d)}else a=this.grid.gxCmpContext+this.containerName+"Div",d=function(){return this.returnGridData()}.closure(this),this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,a,this.cssClass,[this.boundedCollType],d),this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,a,this.cssClass,[this.boundedCollType],d);a=this.grid.columns.length;for(c=0;c<a;c++)if(b=this.grid.columns[c],!0==b.gxSetsContext){d=this.grid.rows.length;
for(g=0;g<d;g++){var f=gx.dom.el(this.gxComponentContext+b.htmlName+"_"+this.grid.rows[g].gxId);null!=f&&(f.gxHtmlName=b.htmlName,gx.fx.ctx.addSetter(this.parentObject,b.htmlName+"_"+this.grid.rows[g].gxId,"",[b.gxAttName],this.returnColumnContext))}}};this.returnColumnContext=function(a){var b="",b="SPAN"==a.nodeName?gx.dom.spanValue(a):gx.fn.getControlValue_impl(a.id);return null!=b?b:""};this.returnRowData=function(a){var b={};if(a=this.grid.getRowByGxId(a.gxId))for(var c=this.grid.columns.length,
g=0;g<c;g++){var d=this.grid.columns[g].gxAttName;""!=d&&(b[d]=a.values[g])}return b};this.returnGridData=function(){for(var a=[],b=this.grid.rows.length,c=0;c<b;c++){var g={};a[c]=g;for(var d=this.grid.rows[c],f=this.grid.columns.length,j=0;j<f;j++){var p=this.grid.columns[j].gxAttName;""!=p&&(g[p]=d.values[j])}}return a};this.doDrop=function(a){this.getNewRows(void 0!=a.length?ropObj.length:1,null,function(b){this.addDropedRows(b,a)})};this.addDropedRows=function(a,b){var c=b.length;if(void 0!=
c)for(var g=0;g<c;g++)this.setDroppedRow(a[g],b[g]);else this.setDroppedRow(a[0],b);this.setNewRows(a)};this.setDroppedRow=function(a,b){for(var c=this.grid.columns.length,g=0;g<c;g++){var d=a.Props[g],f=this.grid.columns[g].gxAttName,j="";""!=f&&void 0!=b[f]&&(j=b[f]);d.Value=j;d.FormattedValue=j}};this.getRowAsTypes=function(){for(var a=[],b=this.grid.columns.length,c=0;c<b;c++){var g=this.grid.columns[c].gxAttName;""!=g&&a.push(g)}return a};this.addRows=function(a){var b=a.Count;this.grid.rowsValues=
a.values;for(var c=0;c<b;c++)this.addRow(a[c])};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;var a=this.grid.rows[this.grid.rows.length-1];return a.gxExists()||a.gxIsMod()?!0:!1};this.getNewRows=function(a,b,c){var c=void 0!=c?c:this.setNewRows,g=gx.util.browser.isFirefox()?"keypress":"keydown";null==b||(b.type==g&&(32==b.charCode||32==b.keyCode||13==b.keyCode)||"click"==b.type)&&(0==this.grid.rows.length||this.lastRowIsModified())?(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,
this.isMasterPageGrid,this.realGridName,a+this.lastRowId,this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,c),gx.csv.pkDirty=!1,null!=b&&gx.evt.cancel(b,!0)):null!=b&&(32==b.keyCode||13==b.keyCode)&&gx.evt.cancel(b,!0)};this.setNewRows=function(a){return this.setNewRows_impl(a,function(){this.refreshGrid(!1)})};this.loadNewRows=function(a){return this.setNewRows_impl(a,function(a){this.loadGrid(a,!0,!0)})};this.setNewRows_impl=function(a,b){var c;if(void 0!=
a.Count){var g=0;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(a.values);for(g=0;g<a.Count;g++)c=this.addRow(a[g]),gx.fn.setCurrentGridRow(this.gridId,c.gxId);0<a.Count&&(this.addingRows=!0,b.call(this,a),this.addingRows=!1,this.setFocusFirstControl(a[0]))}return c};this.gxNewRowFocused=function(a){a.style.textDecoration="underline";var b=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(a,b,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};
this.rowKeyPressed=function(a){var b=gx.evt.source(a);void 0!=b&&(a.ctrlKey&&46==a.keyCode)&&(this.setRowDeleted(b),gx.evt.cancel(a,!0))};this.gxHasDuplicateKey=function(){for(var a=[],b=this.grid.rows,c=b.length,g=0;g<c;g++){var d=b[g];if((d.gxExists()||d.gxIsMod())&&!d.gxDeleted()){for(var f="",j=d.gxKeyValues.length,p=0;p<j;p++)f+=d.gxKeyValues[p].toString();if(void 0!=a[f])return!0;a[f]=1}}return!1};this.columnIndexInKey=function(a){for(var b=this.lvlKey.length,c=0;c<b;c++)if(this.lvlKey[c]==
a)return c;return-1};this.refreshVars=[];this.addRefreshingVar=function(a){if(!gx.lang.emptyObject(a)){var b="";this.refreshVars[this.refreshVars.length]=a;if(a.fld){var c=gx.dom.el(this.gxComponentContext+a.fld);if(void 0!=c&&gx.lang.emptyObject(a.hc)&&(b="radio"==c.type||"checkbox"==c.type?"click":"SELECT"==c.tagName?"change":gx.evt.eachKeyAutorefreshType(a.type)?["keyup","input"]:"blur",""!=b))if("radio"==c.type)for(var a=gx.dom.byName(this.gxComponentContext+a.fld),c=a.length,g=0;g<c;g++)gx.evt.attach(a[g],
b,function(){this.filterVarChanged()},this);else"search"==c.type&&(b=[b,"search"]),gx.evt.attach(c,b,function(){this.filterVarChanged()},this)}}};this.doRefresh=function(){this.callAsyncRefresh(this.getRefreshParmsUrl())};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var a=this.getRefreshParmsUrl();this.lastRefreshParms!=a&&(this.lastRefreshParms=a,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=
function(){for(var a=this.refreshVars.length,b=0;b<a;b++){var c=this.refreshVars[b];if("undefined"==typeof c.rfrVar){var g=gx.fn.getHidden(this.gxComponentContext+"GXH_"+c.fld),c=c.val();if(g!=c)return!0}}return!1};this.getRefreshParmsUrl=function(a){var b=gx.O;gx.setGxO(this.parentObject);var c="";this.pageSizeParm&&(c=this.grid.pageSize+",");for(var g=this.refreshVars.length,d=0;d<g;d++){var f=this.refreshVars[d];f&&("function"==typeof f.c2v&&f.c2v(),"function"==typeof f.v2bc&&f.v2bc.call(gx.O));
if("undefined"!=typeof f.rfrVar){var j=void 0,p=void 0;if("undefined"!=typeof f.rfrProp){var n;"undefined"!=typeof f.gxAttId&&(n=this.grid.getColumnByGxAttId(f.gxAttId));n||(n=this.grid.getColumnForVar(f.rfrVar));n?(f=f.rfrProp.toLowerCase(),j=n[f],"value"==f&&n.gxControl.type==gx.html.controls.types.image&&(j=gx.util.removeBaseUrl(j))):j=""}else"undefined"!=typeof this.parentObject.VarControlMap[f.rfrVar]&&(p=this.parentObject.VarControlMap[f.rfrVar].id),gx.lang.emptyObject(this.parentObject[f.rfrVar])?
"undefined"==typeof j&&"undefined"!=typeof p&&(j=gx.fn.getHidden(this.gxComponentContext+p)):j=this.parentObject[f.rfrVar],"object"==typeof j&&(j=gx.json.serializeJson(j));c+=encodeURIComponent(j)+","}else gx.lang.emptyObject(f.hc)?c+=this.getFormattedParm(f)+",":(j=gx.fn.getHidden(this.gxComponentContext+"GXH_"+f.fld),c+=encodeURIComponent(a&&"undefined"!==typeof j?j:this.parentObject[f.hc])+","),gx.fn.setHidden(this.gxComponentContext+"GXH_"+f.fld,f.val())}this.parentObject.IsComponent&&(c+=encodeURIComponent(this.parentObject.CmpContext)+
",");gx.setGxO(b);return c};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.getFormattedParm=function(a){return"date"==a.type?(a=gx.dom.el(this.gxComponentContext+a.fld),encodeURIComponent(gx.date.urlDate(a,gx.dateFormat))):"dtime"==a.type?(a=gx.dom.el(this.gxComponentContext+a.fld),encodeURIComponent(gx.date.urlDateTime(a,gx.dateFormat))):encodeURIComponent(a.val())};this.callAsyncRefresh=function(a,b){gx.evt.refreshGridCallback||
(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=null,gx.evt.setReady(!0));gx.evt.setReady(!1);this.refreshTimer=window.setTimeout(function(){if(this.autoRefreshing)this.callAsyncRefresh(a);else{gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:true});typeof a==="undefined"&&(a=this.getRefreshParmsUrl());gx.ajax.refreshGrid(this,a);gx.evt.setReady(true)}}.closure(this),b||400)};this.updatePropsHidden=
function(a){var b=this.getDataHiddenName();gx.fn.setHidden(b,a)};this.updatePagingVarsAfterRefresh=function(a){if(this.usePaging){var b=this.grid.gxGridName.toUpperCase()+"_nEOF",c=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(a[b],a[c])}};this.getSelection=function(){if(this.allowSelection)for(var a=this.grid.rows.length,b=0;b<a;b++)if(this.grid.rows[b].selected)return b;return-1};this.setSelection=function(a){if(this.allowSelection&&0<=a){var a=gx.grid.rowId(a+1),b=
gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+a);b&&this.grid.setRowSelected(b,a)}};this.blankGridRows=function(){this.lastRowId=0;this.grid.rows=[];delete this.grid.rowsValues};this.setRowDeleted=function(a){var b=null,b="string"==typeof a?this.grid.getRowByGxId(a):void 0==a.gxId?this.getRowFromHtmlCtrl(a):a;b.setDeleted(!b.gxDeleted());this.setRowModified(b.gxId);gx.fn.removeGridRow(b.gxId,this.gridId.toString());this.refreshGrid(!1);gx.dom.indexElements()};this.setFocusFirstControl=
function(a){for(var b=0;b<a.Count;b++){var c=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(c&&(c=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[b].htmlName+"_"+c.gxId),void 0!=c&&gx.fn.isAccepted(c))){gx.grid.lastFocusCtrl=this.grid.columns[b].gxId;gx.fn.setFocus(c);break}}};this.instanciateRow=function(a){var b=gx.O;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{var c=a;"string"==typeof c&&(c=this.grid.getRowByGxId(a));if(null!=c){gx.fn.setCurrentGridRow(this.gridId,
c.gxId);for(var g=c.values.length,d=0;d<g;d++){var f=this.grid.columns[d];if(""!=f.gxId){var j=this.parentObject.getValidStruct(f.gxId);j&&(this.isUsercontrol?j.v2v&&(j.v2v(this.grid.properties[c.id][f.index].value),gx.fn.setHidden(this.grid.properties[c.id][f.index].id,this.grid.properties[c.id][f.index].value)):"function"==typeof j.c2v&&j.c2v())}}}else{gx.fn.setCurrentGridRow(this.gridId,a);g=this.grid.columns.length;for(d=0;d<g;d++)f=this.grid.columns[d],""!=f.gxId&&(j=this.parentObject.getValidStruct(f.gxId))&&
"function"==typeof j.c2v&&j.c2v()}}catch(p){gx.dbg.logEx(p,"gxgrid.js","instanciateRow")}gx.setGxO(b);return!0};this.setRenderProp=function(a,b,c,g){this.grid.setProp(a,b,c,g)};this.setRenderDynProp=function(a,b,c,g){this.grid.setDynProp(a,b,c,g)};this.addRenderEventHandler=function(a,b){this.grid.addEventHandler(a,b)};this.cleanup=function(){this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=
null;this.grid.columns=null;this.grid=this.grid.rows=null};this.loadGrid=function(a,b,c){gx.dbg.logPerf("loadGrid_"+this.gridName);var g=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var d=this.parentObject.isTransaction();d&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));void 0!=a?(d=this.getContainerControl(),null!=d&&(b&&(c||(a.values=this.getValuesFromHidden()),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),
this.grid.setContainerDelayed(d),this.clearHiddens(),this.setRowsProperty(),b=this.getSelection(),c||this.blankGridRows(),this.setHtmlTags(a),this.setGridStyles(a),this.setDeleteMethod(a.DeleteMethod),this.setSelectionAndHover(a.Allowselection,a.Selectioncolor,a.Allowhover,a.Hovercolor),this.setCollapsing(a.Allowcollapsing,a.Collapsed),this.setSflColumns(a.SflColumns),this.setColumnsProperties(a.Columns),this.autoRefreshing?this.updatePagingVarsAfterRefresh(a):this.updatePagingVars(),c||this.addRows(a),
this.updateOldComponents(),this.initRefreshParms(),this.refreshGrid(null,this.autoRefreshing),this.setSelection(b))):(this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=d||this.isFreestyle?9999:this.gridRows,d=this.getContainerControl(),null!=d?(this.grid.setContainerDelayed(d),a=this.getRowsFromHidden(),null!=a?(a.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(a),this.setGridStyles(a),this.setDeleteMethod(a.DeleteMethod),this.setSelectionAndHover(a.Allowselection,
a.Selectioncolor,a.Allowhover,a.Hovercolor),this.setCollapsing(a.Allowcollapsing,a.Collapsed),this.setSflColumns(a.SflColumns),this.setColumnsProperties(a.Columns),this.updatePagingVars(),this.addRows(a),this.initRefreshParms(),this.addingRows=!0,this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),this.refreshGrid())):this.loadWrappedGridChilds());this.isLoading=!1;gx.setGxO(g);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+
"' loaded")};this.loadWrappedGridChilds=function(){try{var a=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=typeof a){for(var a=parseInt(a),b=0;b<a;b++)for(var c=this.grid.columns.length,g=0;g<c;g++){var d=this.grid.columns[g];d.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(b+1),c:d})}this.setupGridUsercontrols(this.GridUserControls)}}catch(f){gx.dbg.logEx(f,"gxgrid.js","loadWrappedGridChilds")}};this.getRowsFromHidden=
function(){var a=this.getDataHiddenName(),b=gx.fn.getHidden(a);gx.json.setNonSerializable(a);return"string"==typeof b?gx.json.evalJSON(b):"object"==typeof b?b:null};this.deleteGridData=function(){var a=this.getDataHiddenName();gx.json.setNonSerializable(a)};this.getValuesFromHidden=function(){var a=this.getValuesHiddenName(),b=gx.fn.getHidden(a);gx.lang.emptyObject(b)&&(b=gx.fn.getControlValue(a));gx.json.setNonSerializable(a);a=null;null!=b&&""!=b&&(a=gx.json.evalJSON(b));return a};this.getContainerControlId=
function(){return void 0!=this.gxContainerDivName?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){var a=gx.dom.byId(this.getContainerControlId());a&&(this.gxContainerCtrl=a,a.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(a,"gx-grid"),this.isResponsive&&gx.dom.addClass(a,"gx-responsive-grid"),gx.dom.addClass(a,this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid"),a.gxGridName=this.grid.gxGridName);return a};this.getHiddenSuffix=
function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(a){try{if(!gx.lang.emptyObject(a))for(var b=
a.length,c=0;c<b;c++){var g=this.grid.columns[c],d;for(d in a[c]){var f=a[c][d];d=this.fixColumnPropName(d);this.isUsercontrol&&(g[d]=f);g[d.toLowerCase()]=f}this.checkPromptColumn(g)}}catch(j){gx.dbg.logEx(j,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(a){try{if(this.isPromptColumn(a)){var b=gx.fn.getAttachedCtrl(a.htmlName);if(b&&b.info&&b.info.controls){for(var c=!1,g=!1,d=b.info.controls.length,f=0;f<d;f++){var j=this.grid.getColumnByGxId(b.info.controls[f]),p=gx.lang.gxBoolean(j.enabled),
n=gx.lang.gxBoolean(j.visible);p&&(g=!0);n&&(c=!0)}g||(a.enabled="0");c||(a.visible="0")}}}catch(l){gx.dbg.logEx(l,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(a){return"Horizontalalignment"==a?"align":a};this.setDeleteMethod=function(a){if(this.parentObject.isTransaction()){var b="DSP"==this.parentObject.Gx_mode;!b&&(a&&"none"==a)&&(b=!0);this.deleteMethod=b?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(a,b,c,g){try{"undefined"!=typeof a&&
(this.allowSelection=gx.lang.gxBoolean(a));"undefined"!=typeof b&&(this.selectionColor=null);"undefined"!=typeof g&&(this.hoverColor=null);if(this.allowSelection&&"undefined"!=typeof b&&("undefined"!=typeof c&&(this.allowHovering=gx.lang.gxBoolean(c)),b=eval(b),this.selectionColor="undefined"!=typeof b[0]?gx.color.fromRGB(b[0],b[1],b[2]):gx.color.html(b),this.allowHovering&&"undefined"!=typeof g))g=eval(g),this.hoverColor="undefined"!=typeof g[0]?gx.color.fromRGB(g[0],g[1],g[2]):gx.color.html(g);
this.grid.gxAllowSelection=this.allowSelection;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxHoverColor=this.hoverColor}catch(d){gx.dbg.logEx(d,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(a,b){try{if(void 0!==a&&(this.allowCollapsing=gx.lang.gxBoolean(a),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==b)this.collapsed=gx.lang.gxBoolean(b),this.grid.gxCollapsed=this.collapsed}catch(c){gx.dbg.logEx(c,"gxgrid.js",
"setCollapsing")}};this.setSflColumns=function(a){try{if(!gx.lang.emptyObject(a)||0===a)this.gridCols=gx.grid.validGridColsValue(parseInt(a)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(a){return a.gxAttId.indexOf&&-1!=a.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var a=gx.fn.getHidden(this.getHiddenName("Rows"));
if(null!=a){try{this.gridRows=parseInt(a,10)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var a=this.grid.columns.length,b=0;b<a;b++){var c=this.parentObject.getValidStruct(this.grid.columns[b].gxId);c&&(c.gxsgprm&&c.gxsgprm.installed)&&(c.gxsgprm.installed={})}};this.refreshCollection=function(a){try{this.blankGridRows();this.updatePagingVars();this.initRefreshParms();for(var b=
a.length,c=0;c<b;c++){for(var g={Props:[]},d=a[c],f=this.grid.columns.length,j=0;j<f;j++){var p=this.grid.columns[j];g.Props[p.index]=[d[p.gxAttName]]}this.addRow(g)}this.refreshGrid(!1,!1,!0)}catch(n){gx.dbg.logEx(n,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(a,b,c){this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.clearDefaultEventHandlers();this.clearHiddens();this.crearInstalledSuggests();this.setRowsProperty();if(void 0!=this.parentRow&&
!gx.lang.emptyObj(this.parentRow.Grids)){var g=this.parentRow.Grids[this.realGridName];null!=g&&(this.setHtmlTags(g),this.setGridStyles(g),this.setColumnsProperties(g.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(g))}var d=!1,g=function(){this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridComponents(this.GridComponents);this.setupGridUsercontrols(this.GridUserControls);this.applyTemplateObject();this.triggerDatePickersSetup(this.DatePickersControls);
this.installImageControls();this.isFreestyle&&this.loadRowsGrids(d);this.updateRcdCount();this.setDefaultEventHandlers()}.closure(this);this.grid.doSort();!1==a?this.grid.render(d,!1,c,g):(d=!0,this.grid.render(d,b,c,g))};this.applyTemplateObject=function(){var a=this.isFreestyle?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";gx.plugdesign.applyTemplateObject("#"+this.getContainerControl().id,a)};var Q="gx-wc-bkp_"+p+"_"+a;this.getComponentsBackupContainer=function(){var a=gx.dom.el(Q);a||(a=document.createElement("div"),
a.id=Q,a.style.display="none",document.body.appendChild(a));return a};this.destroyComponentsBackup=function(){var a=gx.dom.el(Q);a&&a.parentNode&&gx.dom.removeControlSafe(a)};this.backupComponents=function(){try{for(var a=this.grid.rows.length,b=0;b<a;b++){for(var c=this.grid.rows[b],g=this.grid.columns.length,d=0;d<g;d++)if(this.grid.columns[d].gxControl.type==gx.html.controls.types.webComponent){var f=this.gxComponentContext+"gxHTMLWrp"+this.parentObject.getComponentPrefix(c.gxProps[d][0])+c.gxId,
j=gx.dom.el(f);j&&(j.parentNode.removeChild(j),this.getComponentsBackupContainer().appendChild(j))}for(var p=c.gxGrids.length,d=0;d<p;d++){var n=c.gxGrids[d];n&&n.isFreestyle&&n.backupComponents()}}}catch(l){gx.dbg.logEx(l,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(a){var b=this.getContainerControl();if(!b)return[];var c=b.firstChild,b=[];if(c.querySelectorAll)b=gx.fn.toArray(c.querySelectorAll("td[data-colindex='"+a+"'], th[data-colindex='"+a+"']"));else{for(var g=gx.dom.byTag("TD",
c),c=gx.dom.byTag("TH",c),d=0,f=g.length;d<f;d++)g[d].getAttribute("data-colindex")==a&&b.push(g[d]);d=0;for(f=c.length;d<f;d++)c[d].getAttribute("data-colindex")==a&&b.push(c[d])}return b};this.applyPropEntireColumn=function(a,b,c){for(var a=this.getEntireGridColumn(a),g=0;g<a.length;g++)gx.fn.setCtrlPropertyImpl(a[g],b,c)};this.setupFixedColumnProperties=function(){for(var a=0;a<this.ColumnPropertiesAfterRender.length;a++){var b=this.ColumnPropertiesAfterRender[a];this.applyPropEntireColumn(b.colIndex,
b.ptyName,b.ptyValue)}};this.addColPropertyAfterRender=function(a,b,c){this.ColumnPropertiesAfterRender.push({colIndex:a,ptyName:b,ptyValue:c})};this.setupCellAttributes=function(a){for(var b in a){var c=a[b],g=gx.dom.el(b);if(g)for(var d in c)g.setAttribute(d,c[d])}};this.setupGridControls=function(a){for(var b=0,c=a.length;b<c;b++){var g=a[b],d=gx.dom.el(g.hookId),f=d.parentNode;f&&(f.insertBefore(g.el,d),gx.dom.removeControlSafe(d))}};this.setupGridComponents=function(a){for(var b=a.length,c=0;c<
b;c++){var g=a[c];if(!1===g.create){var d=gx.dom.el(g.existingEl),f=d.parentNode,g=gx.dom.el(g.el);gx.dom.removeControlSafe(d);f.appendChild(g)}else gx.html.processCode(g.c,!1,function(a){var b=gx.createComponent(a.n,a.p);if(b!=null){gx.addComponent(b);b.readServerVars();if(a.load)b.onload()}},[g])}this.destroyComponentsBackup()};this.setupGridUsercontrols=function(a){for(var b=a.length,c=0;c<b;c++){var g=a[c].r,d=a[c].c,g=gx.uc.getNew(this.parentObject,d.gxUCId,d.gxUCLastId,d.gxUCClassName,d.gxUCContainerName+
"_"+g,d.gxUCControlName,this.gridLvl,this.gridId,g);g.DesignContainerName=d.gxUCContainerName;g.setC2ShowFunction(d.gxShowFunc);for(var f=d.gxC2VFuncs.length,j=0;j<f;j++)g.addC2VFunction(d.gxC2VFuncs[j]);f=d.gxV2CFuncs.length;for(j=0;j<f;j++)g.addV2CFunction(d.gxV2CFuncs[j]);g.setGridProperties();g.setGridEventHandlers();this.parentObject.setUserControl(g);g.execV2CFunctions(!0);g.execShowFunction()}};this.triggerDatePickersSetup=function(a){for(var b=a.length,c=0;c<b;c++){for(var g=a[c].CtrlId,d=
a[c].Grid,f=a[c].Row,j=gx.O,p=null,n=gx.fn.controlIds(),l=n.length,o=0;o<l&&!(p=gx.fn.validStruct(n[o]),p.grid==d&&j.CmpContext+p.fld+"_"+f==g);o++);null!=p&&void 0!=p.dp&&gx.fn.installDatePicker(g,p.dp.f,p.dp.st,p.dp.wn,p.dp.mf,gx.fn.datePickerFormat(p.dp.pic,p.dp.dec,p.len))}};this.installImageControls=function(){for(var a=gx.dom.byClass("gx-multimedia-upload","",this.gxContainerCtrl),b=0,c=a.length;b<c;b++)gx.html.multimediaUpload.createControl(a[b])};this.addComponentToDraw=function(a){this.GridComponents.push(a)};
this.addUsercontrolToDraw=function(a){this.GridUserControls.push(a)};this.addDatepickerToSetup=function(a){this.DatePickersControls.push(a)};this.addControlToReuse=function(a){a.el.parentNode&&gx.dom.removeControlSafe(a.el);this.GridControls.push(a)};this.loadRowsGrids=function(a){for(var b=this.grid.rows.length,c=0;c<b;c++)this.loadRowGrids(this.grid.rows[c],a)};this.loadRowGrids=function(a,b){for(var c=a.gxGrids.length,g=0;g<c;g++){var d=a.gxGrids[g];d.grid.setContainerDelayed(gx.dom.el(d.gxContainerDivName));
if(b){if(void 0!=d.parentRow&&!gx.lang.emptyObj(d.parentRow.Grids)){var f=d.getDataHiddenName();gx.fn.setHidden(f,gx.json.serializeJson(d.parentRow.Grids[d.realGridName]))}d.loadGrid()}else d.refreshGrid();a.IsNew=!1}};this.updateRcdCount=function(){if(this.hasForEachLine||this.parentObject.isTransaction())gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var a=gx.fn.getHidden(this.grid.gxCmpContext+
this.gridName.toUpperCase()+"_ROW");parseInt(a,10)>this.lastRowId&&this.grid.instanciateSelectionVars("0000");0===this.lastRowId&&gx.fn.setCurrentGridRow(this.gridId,"")};this.updateControlValue=function(a,b,c){try{var g=this,d=c=c||gx.fn.currentGridRow(a.grid).toString(),f=c.length;if(4<f){var j=c.substring(4,f),g=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+j,this.isMasterPageGrid);if(!g)return;d=c.substring(0,4)}var p=parseInt(d,10)-1;!0==b&&g.setRowModified(c);var n=g.getColumnIndexByName(a.fld),
l=gx.dom.el(this.gxComponentContext+a.fld+"_"+c);g.updateRowValue(n,p,l);return g}catch(o){gx.dbg.logEx(o,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(a,b,c){var g=a.lastIndexOf("_");if(-1!=g){var d=a.substring(0,g);if(g=this.grid.getRowByGxId(a.substring(g+1)))if(d=this.grid.getColumnByHtmlName(d)){var f=this.parentObject[c.gxvar];"decimal"==c.type&&gx.lang.instanceOf(f,Number)&&(f=f.toFixed(c.dec));g.values[d.index]=f;g.gxProps[d.index]||(g.gxProps[d.index]={});
if((a=gx.dom.el(a))&&"SELECT"==a.tagName)g.gxProps[d.index].Values=gx.dom.comboBoxToObj(a);g.gxProps[d.index].Value=f;g.gxProps[d.index].FormattedValue=b}}};this.getColumnIndexByName=function(a){for(var b=this.grid.columns,c=b.length,g=0;g<c;g++)if(b[g].htmlName==a)return g;return-1};this.setRowModified=function(a){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+a,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(a)};
this.validateRow=function(a){if(a)try{var b=a.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(b,a.gxrow);var c=gx.fn.lastGridControl(b);gx.csv.validControls(gx.csv.lastId,c+1,!0,gx.O)}catch(g){gx.dbg.logEx(g,"gxgrid.js","validateRow")}};this.updateRowValue=function(a,b,c){var b=this.grid.getRowById(b),g=this.grid.columns[a];"checkbox"==c.type&&(c.value=c.checked?g.gxChecked:g.gxUnChecked);c=this.parentObject.getValidStruct(this.grid.columns[a].gxId).val(b.gxId);b.values[a]=c;gx.lang.emptyObject(b.gxProps[a])||
(b.gxProps[a].Value=c,b.gxProps[a].FormattedValue=gx.fn.getControlValue(this.grid.columns[a].htmlName+"_"+b.gxId,"screen"));this.parentObject.isTransaction()&&(a=this.columnIndexInKey(g.gxAttId),-1!=a&&(b.gxKeyValues[a]=c));g.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+g.htmlName+"_"+b.gxId+"_gxBlob",c)};this.expandCollapse=function(a,b){gx.evt.cancel(b,!0);var c=gx.dom.el(this.gxComponentContext+this.containerName+"Tbl");null!=c&&(this.collapsed?(c.style.display=
"block",a.src=gx.ajax.getImageUrl(gx,"collapseImage")):(c.style.display="none",a.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(c=this.gridName.substring(this.gridName.lastIndexOf("_")),c=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+c):c=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(c,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(a){var b=a.gxrow;
gx.lang.emptyObject(b)&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return this.grid.getRowByGxId(b)};this.showContextMenu=function(a,b){this.contextMenu.show(a,b)}},contextMenu:function(j){this.gxgrid=j;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;var f=new gx.text.stringBuffer;this.show=function(d,b){this.gxgrid.validateRow(d);this.contextEvent=b;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(b,!0);this.rowClicked=
d;this.startMenu();f.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};this.startMenu=function(){f.clear();var d=this.getMenuCoords();f.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');f.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+
".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');f.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");f.append("top:"+d.top+"; left:"+d.left+";").append('">')};this.endMenu=function(){f.append("</div>");var d=gx.dom.byId(this.controlName);null==d&&(d=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),
d.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(d),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));
gx.dom.shouldPurge()&&gx.dom.purge(d,!0);d.innerHTML=f.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var d=0,b=0,a=this.contextEvent;if(a.pageX||a.pageY)d=a.pageX,b=a.pageY;else if(a.clientX||a.clientY)d=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:d,top:b}};this.contextMenuClicked=
function(d){this.handleContextMenuAction(gx.evt.source(d).id);this.hide()};this.handleContextMenuAction=function(d){switch(d){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(j){j=""+j;return"0000".substring(0,4-j.length)+j},rowId:function(j){for(j=j.toString();4>j.length;)j="0"+j;return j},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);
this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=
this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}};
gx.grid.impl=function(j){return function(f){var d=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass=this.gxParentRowId="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";this.pagingButtonNextClass=
"PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=f;this.container=null;this.setContainerDelayed=function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;var b=this.columns.length;a.index=
b;a.table=this;this.columns[b]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.getColumnByCtrlType=function(a){return j.map(this.columns,function(b){return b.gxControl.type==a?b:null})};this.addRow=function(a,b){a.table=this;if(a!=null){this.rows[this.rows.length]=a;typeof a.id!="undefined"&&
(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(b)&&this.render();return a}};this.getColumnByHtmlName=function(a){var b,g;b=this.columnsHtmlName[a];if(typeof b=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){g=a.substring(0,this.gxCmpContext.length);if(g==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);b=this.columnsHtmlName[a]}}return b};this.getColumnByGxId=function(a){return this.columnsGxId[a]};
this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var g=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(g&&g.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){if(a==this.sortColumn)this.ascSort=b==null?!this.ascSort:gx.lang.booleanValue(b);else{this.sortColumn=a;this.ascSort=
b==null?true:gx.lang.booleanValue(b)}this.doSort();this.ownerGrid.refreshGrid()};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=
function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.el(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName=="A")a.parentNode.style.display="inline"}};this.appendDeleteHeader=function(a,
b){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var g=this.isGxTrn(),d=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)d=true;else return;else gx.grid.deletePosition==b&&(d=true);if(g&&d){g="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)g=gx.grid.deleteTitle;a.append('<th class="'+this.columnHeaderClass+'">'+g+"</th>")}}};this.appendDeleteImage=function(a,b,g){if(this.ownerGrid.deleteMethod!=
gx.grid.deleteMethods.none&&this.isGxTrn()){var d=false,f=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){d=b.gxDeleted();f=b.gxIsMod()||b.gxExists()}var j=this.deleteImgId(b.gxId),o=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(g==gx.grid.deletePositions.left)o=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==g)o=true;else if(this.gxIsFreestyle){var m=gx.grid.deletePositionFree;g==gx.grid.deletePositions.left?o=m==gx.grid.deletePositions.topL||
m==gx.grid.deletePositions.bottomL:g==gx.grid.deletePositions.right&&(o=m==gx.grid.deletePositions.topR||m==gx.grid.deletePositions.bottomR);g=m}if(o){var k="<"+this.CELL_TAG+' class="gx-remove-row" style="text-align:'+this.deleteImageAlign(g)+";vertical-align:"+this.deleteVerticalAlign(g)+'">',g="</"+this.CELL_TAG+">",o="",m=false;if(d&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)o=gx.grid.undeleteImage;else if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)o=gx.grid.deleteImage;
else if(d&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)o=gx.grid.deleteImage;else{o=gx.grid.deleteImage;m=true}d="";a.append(k);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){f=gx.fn.firstGridControl(this.ownerGrid.gridId);d=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+b.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+f+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+
"',"+this.ownerGrid.gridId+')"');b="";m&&(b=b+"display:none;");b&&a.append(' style="'+b+'"');a.append(">")}a.append('<img id="'+j+'" src="'+o+'"');d&&a.append(' title="'+d+'"');a.append(' style="border-style: none;');m&&a.append("display:none;");a.append('"');a.append("/>");this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&a.append("</a>");a.append(g)}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var b=
"top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b="bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.topL)b="left";return b}return"center"};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(a,b){var g=this.ROW_TAG,d=this.ROW_BASE_CLASS;
if(this.gxIsFreestyle)g=this.CELL_TAG;this.gxIsFreestyle||(d=d+((d?" ":"")+(a?this.evenRowClass:this.oddRowClass)+(b?" RowDeleted":"")));return{cls:d,tag:g}};this.simpleAppendFn=function(a){return function(b){b.append(a)}};this.appendGridStyle=function(a){var b=d.exec(this.gxHtmlTags);b&&b.length>1&&a.append(b[1]);gx.lang.emptyObject(this.gxBackground)||a.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,true)+"');");gx.lang.emptyObject(this.gxBorderWidth)||a.append(";border: solid "+
this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?a.append(";"):a.append(this.gxBordercolor+";");this.ownerGrid.width>0&&a.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";");this.gxAllowCollapsing&&this.gxCollapsed&&a.append(";display:none")};this.appendGridAttributes=function(a){a.append(this.gxHtmlTags.replace(d,""))};this.appendGridClassAttribute=function(a){this.gxHtmlTags.indexOf("class=")==-1&&a.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=
function(a){a.append('<table><tr data-cell-valign="top"><td>');a.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?a.append(gx.ajax.getImageUrl(gx,"expandImage")):a.append(gx.ajax.getImageUrl(gx,"collapseImage"));a.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></td><td width="100%">')};this.appendCollapsingWrapperEnd=function(a){a.append("</td></tr></table>")};this.appendContainerStart=function(a,b){b.append("<table ");this.appendGridClassAttribute(b);
b.append(' id="'+a+'" ');gx.lang.emptyObject(this.gxToolTipText)||b.append('title="'+this.gxToolTipText+'" ');b.append('style="');this.appendGridStyle(b);b.append('" ');this.appendGridAttributes(b);b.append(">")};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(a,b){gx.lang.emptyObject(this.headerText)||b.append('<tr><td colspan="'+a+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};this.appendFooterText=function(a,b){gx.lang.emptyObject(this.footerText)||
b.append('<tr><td colspan="'+a+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>")};this.appendHeader=function(a,b){var g=a.length,d=[],f=gx.ajax.getImageUrl(gx,"ascImage"),j=gx.ajax.getImageUrl(gx,"descImage"),o=0,m;b.append("<thead>");b.append("<tr>");this.appendDeleteHeader(b,gx.grid.deletePositions.left);for(var k=0;k<g;k++){var q=a[k];m=[this.columnHeaderClass,q.gxColumnClass].join(" ");b.append('<th class="'+m+'"');m="white-space:nowrap;";gx.lang.gxBoolean(q.visible)||(m=m+"display:none;");
if(q.width){if(!q.gxWidthUnit)q.gxWidthUnit="px";m=m+("width:"+q.width+q.gxWidthUnit+";")}q.align&&(m=m+("text-align:"+q.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==gx.grid.styles.report)){m=m+("background-color:"+this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&this.gxTitleBackstyle==gx.grid.styles.uniform){m=m+("background-color:"+this.gxBackColor+
";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(m=m+("color:"+this.gxTitleForeColor+";"));gx.lang.emptyObject(this.gxTitleFont)||(m=m+this.gxTitleFont);q.titlefontunderline?m=m+"text-decoration: underline;":q.titlefontstrikethru&&(m=m+"text-decoration: line-through;");q.titlefontbold&&(m=m+"font-weight: bold;");q.titlefontitalic&&(m=m+"font-style: italic;");q.titlebackcolor&&(m=m+("background-color:"+gx.color.html(q.titlebackcolor).Html+";"));q.titleforecolor&&
(m=m+("color:"+gx.color.html(q.titleforecolor).Html+";"));b.append(' style="'+m+';"');b.append(' data-colindex="'+o+'"');b.append(">");o++;if(gx.lang.emptyObject(gx.text.trim(q.title)))b.append("&nbsp;");else{b.append("<span");q.gxTooltip&&b.append(' title="'+q.gxTooltip+'"');q.sortable&&b.append(' onclick="'+this.gridObject()+".grid.setSort("+q.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"");b.append(">");b.append(q.title);
if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=f;this.descLabel.src=j;q.sortable&&this.sortColumn==q.index&&b.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,d))}b.append("</span>")}b.append("</th>")}this.appendDeleteHeader(b,gx.grid.deletePositions.right);b.append("</tr>");b.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");
this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;
this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;j.each(this.beforeRenderCallbacks,function(a,b){b()});this.beforeRenderCallbacks=[]};this.render=function(a,b,g,d){var a=!!a,f=this.gxCmpContext+this.gxGridObject+"Tbl";this.beforeRender();a=this.drawGrid(f,a,b,g);if(gx.dom.shouldPurge()){for(var j=["onblur",
"onclick","onfocus","onchange"],o=gx.dom.byTag("input",this.container),g=0,b=o.length;g<b;g++)gx.dom.purgeElement(o[g],j);o=gx.dom.byTag("textarea",this.container);g=0;for(b=o.length;g<b;g++)gx.dom.purgeElement(o[g],j);o=gx.dom.byTag("select",this.container);g=0;for(b=o.length;g<b;g++)gx.dom.purgeElement(o[g],j);o=gx.dom.byTag("span",this.container);g=0;for(b=o.length;g<b;g++)gx.dom.purgeElement(o[g],j);o=gx.dom.byTag("img",this.container);g=0;for(b=o.length;g<b;g++)gx.dom.purgeElement(o[g],j)}var m=
gx.dom.getActiveElement(),b=m&&(m.id||m.name)&&gx.dom.isChildNode(m,this.container);gx.csv.IgnoreBlur=true;this.container.innerHTML=a;gx.csv.IgnoreBlur=false;b&&setTimeout(function(){var a=gx.dom.el(m.id||m.name);if(a){gx.csv.disableFocus=true;a.offsetWidth>0&&a.offsetHeight>0&&a.focus()}},10);this.afterRender(f);gx.fx.obs.notify("grid.onafterrender",[this]);d();this.rendered=true};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.drawGrid=function(a,b,g,d){var f=this.isGxTrn(),
j=this.gxIsFreestyle&&this.gxGridCols>1,g=new gx.text.stringBuffer,o=this.columns,m=o.length,k,q;!this.gxIsFreestyle&&f&&m++;var t,s;if(Number(this.pageSize)!==0){t=this.getMaxPage();if(this.currentPage<=0)this.currentPage=1;else if(this.currentPage>t)this.currentPage=t;t=Math.max(this.pageSize*(this.currentPage-1),0);s=Math.min(t+this.pageSize,this.rows.length)}else{t=0;s=this.rows.length}this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(g);this.appendContainerStart(a,g);this.appendHeaderText(m,
g);var r=o.length;this.gxIsFreestyle||this.appendHeader(o,g);this.appendBodyWrapperStart(g);for(var v=true,a=t;a<s;a++){var v=!v,u=this.rows[a];b&&(a===t&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,u.gxId);var x=u.gxDeleted();k=new gx.text.stringBuffer;var y=this.getRowRenderingProps(v,x,a,t,s);if(j&&this.gxIsFreestyle&&(a>0&&a%this.gxGridCols===0||a===0&&this.gxGridCols>0)){a>0&&this.appendRowEnd(g,a,t,s);this.appendRowStart(g,a,t,s)}var B="";this.gxTitleBackstyle==
gx.grid.styles.report&&(B=v?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)B=this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)B=this.gxBackColor;if(!this.gxIsFreestyle||this.gxIsFreestyle&&j){this.appendRowPrefix(k,a,t,s);k.append("<"+y.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+u.gxId+"'");if(this.gxIsFreestyle&&j){k.append(' data-gxrow="'+u.gxId.toString()+'"');(q=this.columns[1].gxControl.verticalAlign)&&
k.append(' data-cell-valign="'+q+'"')}else k.append(' data-gxrow="'+u.gxId.toString()+'"');k.append(' class="'+y.cls+'"');u.selected&&k.append(' data-selected="1"');q="";B&&(q="background-color:"+B+";");gx.lang.emptyObject(this.gxLinesFont)||(q=q+this.gxLinesFont);q&&k.append(' style="'+q+'" ');k.append(">");g.append(k.toString())}if(this.gxIsFreestyle){j&&this.appendRowBreaksWrapperStart(g,u);k=this.gxBuffer.toString();g.append(k)}this.gxIsFreestyle||this.appendDeleteImage(g,u,gx.grid.deletePositions.left);
this.appendCellPrefixStart(g,a,t,s,u,y);for(y=0;y<r;y++){k=o[y];q=gx.lang.gxBoolean(k.visible);var A=u.gxProps[k.index],z=u.values[k.index],w=k.gxControl;if(this.gxIsFreestyle&&w.type==gx.html.controls.types.row&&k.index===0)w.isFreestyleRow=true;w.setGridData({grid:this.ownerGrid,row:u,gridId:this.gxId,gridRow:u.gxId});if(d){delete w.formattedValue;w.value=z;w.id=k.htmlName+"_"+w.gridRow}else w.setProperties.apply(w,A);if(b)delete gx.usrPtys[w.id];else if(gx.usrPtys[w.id]!==void 0)for(var C in gx.usrPtys[w.id]){if(C==
"enabled")w.rtEnabled=true;w.setIndividualProp(C,gx.usrPtys[w.id][C])}if(x){w.rtEnabled=true;w.enabled=false}if(typeof A.Value!=="undefined"){z=this.parentGxObject.getValidStruct(k.gxId);w.value=gx.decimalPoint!="."&&z&&z.type=="decimal"&&typeof A.Value=="string"?A.Value.replace(".",gx.decimalPoint):A.Value}if(typeof A.FormattedValue!=="undefined")w.formattedValue=A.FormattedValue;if(A.Values)w.possibleValues=A.Values.v;if(this.gxIsFreestyle&&w.type==gx.html.controls.types.row&&k.index===0){w.id=
this.gxCmpContext+this.gxGridObject+"Row_"+u.gxId;if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)w.oncontextmenu=this.gridObject()+".showContextMenu(this, event);";if(B)w.style=w.style+("background-color:"+B+";")}if(!this.gxIsFreestyle){g.append("<"+this.CELL_TAG+' class="gx-attribute '+(w.columnClass||"")+'" data-cell-valign="'+k.valign+'"');g.append(' data-colindex="'+y+'"');A="";if(!q){A=A+"display:none;";w.visible&&(!k.isGxRemove()&&!this.ownerGrid.isPromptColumn(k))&&this.ownerGrid.addColPropertyAfterRender(y,
"Visible",1)}if(k.width){if(!k.gxWidthUnit)k.gxWidthUnit="px";A=A+("width:"+k.width+k.gxWidthUnit+";")}else if(k.gxColSize)w.colSize=k.gxColSize;k.align&&(A=A+("text-align:"+k.align+";"));w.style&&(A=A+w.style);A&&g.append(' style="'+A+'" ');g.append(">")}g.append(w.getHtml());this.gxIsFreestyle&&(w.type==gx.html.controls.types.row&&k.index===0)&&this.appendDeleteImage(g,u,gx.grid.deletePositions.left);w.persistValue();this.gxIsFreestyle||g.append("</"+this.CELL_TAG+">");if(this.gxIsFreestyle){k.index==
this.columns.length-1&&this.appendDeleteImage(g,u,gx.grid.deletePositions.right);k=k.buffer.toString();g.append(k)}}this.appendCellPrefixEnd(g,a,t,s);this.gxIsFreestyle&&j?this.appendRowBreaksWrapperEnd(g):this.appendDeleteImage(g,u,gx.grid.deletePositions.right)}this.gxIsFreestyle&&(this.gxGridCols>0&&j)&&this.appendRowEnd(g);this.appendBodyWrapperEnd(g);this.appendFooterWrapperStart(g);(f||this.hasPagingButtons())&&this.appendNavigationBar(m,g);this.appendFooterText(m,g);this.appendFooterWrapperEnd(g);
this.appendContainerEnd(g);this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(g);b=g.toString();g.clear();return b};this.defineEventHandlers=function(){if(!this.gxIsFreestyle){gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this)}this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",
this.mouseDownHandler.closure(this,[],true),this);gx.evt.attach(this.container,"click",this.clickHandler,this);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&a.tagName=="TR"&&a.getAttribute("data-gxrow")&&gx.dom.findParentByTagName(a,"DIV")==this.container};this.getTargetRow=function(a,b){var g=a;for(this.isGridRow(g)||(g=gx.dom.findParentByTagName(a,"TR"));g&&gx.dom.isChildNode(g,this.container);){if(this.isGridRow(g)&&(!b||
b=="body"&&g.parentNode.tagName=="TBODY"||b=="header"&&g.parentNode.tagName=="THEAD"))return g;g=gx.dom.findParentByTagName(g,"TR")}};this.mouseOverHandler=function(a){if(this.gxAllowHovering)(a=this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&this.startRowHover(a,parseInt(a.getAttribute("data-gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(a){if(this.gxAllowHovering)(a=this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&
this.endRowHover(a,parseInt(a.getAttribute("data-gxrow").substring(0,4),10)-1)};this.contextMenuHandler=function(a){var b=this.getTargetRow(gx.evt.source(a),"body");b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=function(a,b){var g=this.getTargetRow(gx.evt.source(a),"body");if(g){b=typeof b==="undefined"?this.gxAllowSelection&&!this.gxIsFreestyle:b;this.setRowSelected(g,g.getAttribute("data-gxrow"),true,b)}};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a),"body")&&
this.ownerGrid.rowKeyPressed(a)};this.clickHandler=function(a){var b=gx.evt.source(a);b.parentNode&&gx.dom.hasClass(b.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(b,a)}.closure(this))};this.pagingHandler=function(a,b){var g="";gx.evt.cancel(b,true);if(!gx.dom.hasClass(a,this.pagingButtonDisabled)){gx.dom.hasClass(a,this.pagingButtonFirstClass)?g="FIRST":gx.dom.hasClass(a,this.pagingButtonPreviousClass)?g="PREV":gx.dom.hasClass(a,this.pagingButtonNextClass)?
g="NEXT":gx.dom.hasClass(a,this.pagingButtonLastClass)&&(g="LAST");this.changeGridPage(g)}};this.changeGridPage=function(a){var b=this.gxGridName.toUpperCase()+"PAGING",g=this.ownerGrid,d="",f;if(a){this.mask();if(gx.pO.fullAjax){gx.setGxO(this.parentGxObject);d="E"+g.realGridName.toUpperCase()+"_"+a+"PAGE"+(g.isMasterPageGrid?"_MPAGE":"");if(g.parentGrid)f=g.parentGrid.gridId}else{gx.fn.setHidden(this.gxCmpContext+b,a);d=this.gxCmpContext+"E"+b+"."}gx.evt.execEvt(void 0,void 0,d,gx.evt.dummyCtrl,
f,void 0,void 0,false,this.unmask.closure(this))}};this.setRowSelected=function(a,b,g,d){var d=d===void 0||d,f=function(){var g=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){if(d&&!gx.runtimeTemplates){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(b){if(a.gxOriginalBackcolor===void 0)b.gxOriginalBackcolor=b.style.backgroundColor})}this.instanciateSelectionVars(b);var f=this.rows.length,n,k=[];for(n=0;n<f;n++){var q=this.rows[n];
q.selected=q.gxId==b;if(q.selected){if(d){if(!gx.runtimeTemplates){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html}gx.dom.addClass(a,this.selectedRowClass);j(a).attr("data-gxselected","")}k.push(q)}else if(d){var t=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+q.gxId);if(t!=null&&t.gxSBackcolor!==void 0&&!gx.runtimeTemplates){t.style.backgroundColor=t.gxSBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(t,
this,function(a){if(a!=null&&a.gxSBackcolor!==void 0)a.style.backgroundColor=t.style.backgroundColor})}gx.dom.removeClass(t,this.selectedRowClass);j(t).removeAttr("data-gxselected")}}for(n=0;n<k.length;n++){this.instanciateSelectedRow(k[n]);d&&!gx.runtimeTemplates&&gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html})}gx.setGxO(g)}};g&&(d||gx.O.isTransaction())?
setTimeout(f.closure(this),100):f.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a){this.setSelectedRowVars(a);if(this.gxOnLineActivate&&!this.ownerGrid.isLoading){gx.csv.instanciatedRowGrid=this.ownerGrid;this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,a.gxId)}};this.setSelectedRowVars=
function(a){for(var b=this.parentGxObject,g=this.columns.length,d=0;d<g;d++){var f=this.columns[d],j=b.GXValidFnc[f.gxId];if(j!=null){var o=a.values[d];if(this.ownerGrid.isUsercontrol)o=this.properties[a.id][f.index].value;j.v2v&&j.c2v(o)}}};this.startRowHover=function(a,b){if(!gx.runtimeTemplates){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(a){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor});
var g=this.getRowById(b);if(this.gxAllowHovering&&this.gxHoverColor&&!g.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html})}}};this.endRowHover=function(a,b){if(!gx.runtimeTemplates){var g=this.getRowById(b);if(this.gxAllowHovering&&!g.selected&&a.gxHBackcolor!==void 0){a.style.backgroundColor=a.gxHBackcolor;
gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){if(a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor})}}};this.hasPagingButtons=function(){return this.usePaging&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(a,b){gx.lang.emptyObject(this.gxRealTitleBackColor)?b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+
this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(a){a.append("</td></tr>")};this.appendNavigationBar=function(a,b){var g=this.getRowCount(),d=a,g=(g>0||g===0&&!this.isFirstPage())&&this.usePaging,f=this.parentGxObject.Gx_mode,f=this.isGxTrn()&&!this.gxHasAddlines&&!(f=="DSP"||f=="DLT");this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)d=this.gxGridCols;(g||f)&&this.appendNavBarRowStart(d,b);if(g){b.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">');
if(this.currentPage<=0)this.currentPage=1;b.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first")));b.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous")));b.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next")));b.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last")));b.append("</div>")}f&&b.append(this.buildLink("["+
this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));(g||f)&&this.appendNavBarRowEnd(b)};this.buildPagingButton=function(a,b,g){return'<button class="'+a+(b?"":" "+this.pagingButtonDisabled)+'"'+('style="padding-left:20px;padding-bottom:5px;'+(b?"":"opacity:.7;cursor:default")+'"')+' title="'+g+'"'+(b?"":" disabled")+"/>"};this.buildLink=function(a,b,g,d,f){var j=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+
f+'" onblur="this.style.textDecoration = \'none\';"><span '+(d!==void 0?'id="'+d+'"':"")+' style="'+("cursor:"+(document.createTextRange?"hand":"pointer")+";")+'" class="'+j+'" onclick="'+b+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+g+"';return true;\" onMouseOut=\"this.className='"+j+"';window.status='';return true;\">"+a+"</span></a>"};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?
"0":this.firstRecordOnPage)=="0"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var b=0;this.handleLabel=function(a){if(a.src){var c="img"+b;b++;return"<img name='"+c+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var g=
a.table,d=g.getColumnByIndex(g.sortColumn),f,j;f=a.values[g.sortColumn];j=b.values[g.sortColumn];gx.lang.instanceOf(f,Array)||(f=[f]);gx.lang.instanceOf(j,Array)||(j=[j]);switch(d.type){case gx.types.numeric:d=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:d=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:d=function(a){return gx.lang.booleanValue(a)?
1:0};break;default:d=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var o=Math.max(f.length,j.length),m=0,k=0;m===0&&k<o;k++){var q=f[k];q==null&&(m=-1);var t=j[k];t==null&&(m=1);if(m===0){q=d(q);t=d(t);m=typeof q.localeCompare=="function"?q==t?0:q.localeCompare(t):q==t?0:q>t?1:-1}m!==0&&(m=m*(g.ascSort?1:-1))}return m};this.mask=function(){var a=this.container||this.getContainerControl();a.firstChild&&gx.dom.mask(a.firstChild)};this.unmask=function(){var a=this.container||this.getContainerControl();
a.firstChild&&gx.dom.unmask(a.firstChild)}}}(gx.$);
gx.grid.column=function(j,f,d,b,a){this.table=null;this.index=-1;this.title=j||"";this.type="undefined"!=typeof f?f:gx.types.character;this.width=d||"";this.align=b||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(j,f,d,b){this.table=null;this.id=j;this.gxParentRowId=b||"";this.gxId=d+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=f.Props||[];this.gxRenderProps=f.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(j){var f=["xs","sm","md","lg"];return function(d){d=new gx.grid.impl(d);d.appendContainerStart=function(b,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+b+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');a.append(">")};d.ROW_TAG="div";d.CELL_TAG="div";d.ROW_BASE_CLASS="row";d.getRowRenderingProps=function(b,a){var c=this.ROW_TAG,g=this.ROW_BASE_CLASS,
d=this.gxGridResponsiveCols;this.gxIsFreestyle&&(c=this.CELL_TAG,g=j.map(f,function(a,b){return["col-",a,"-",Math.floor(12/(d[b]||12))||1].join("")}).join(" "));this.gxIsFreestyle||(g+=" "+(b?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:g,tag:c}};d.appendGridClassAttribute=function(b){b.append(' class="'+this.gxCssClass+'"')};d.appendContainerEnd=d.simpleAppendFn("</div>");d.appendHeaderText=gx.emptyFn;d.appendFooterText=gx.emptyFn;d.appendHeader=gx.emptyFn;d.appendBodyWrapperStart=
gx.emptyFn;d.appendBodyWrapperEnd=gx.emptyFn;d.appendFooterWrapperStart=d.simpleAppendFn("<div>");d.appendFooterWrapperEnd=d.simpleAppendFn("</div>");d.appendRowStart=function(b,a,c){a==c&&b.append('<div class="row">')};d.appendRowEnd=function(b,a,c,g){a==g&&b.append("</div>")};d.appendRowBreaksWrapperStart=function(b,a){b.append("<div>");this.appendDeleteImage(b,a,gx.grid.deletePositions.left)};d.appendRowBreaksWrapperEnd=d.simpleAppendFn("</div></div>");d.appendRowPrefix=function(b,a,c){if(a!=c){var g=
this.gxGridResponsiveCols,d=!1,c=j.map(f,function(b,c){return 1!=g[c]&&0===a%g[c]||0===g[c]&&0===a%12?(d=!0,"visible-"+b):""}).join(" ");d&&b.append('<div class="clearfix '+c+'"></div>')}};d.appendCellPrefixStart=function(b,a,c,g,d){1==this.gxGridCols&&(b.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+d.gxId+'" data-gxrow="'+d.gxId.toString()+'" class="row"><div class="col-xs-12">'),this.appendDeleteImage(b,d,gx.grid.deletePositions.left))};d.appendCellPrefixEnd=function(b){1==this.gxGridCols&&
b.append("</div></div>")};d.appendNavBarRowStart=function(b,a){a.append('<div class="row"><div class="col-xs-12 '+this.navigationClass+'">')};d.appendNavBarRowEnd=function(b){b.append("</div></div>")};return d}}(gx.$);
gx.GxObject=function(j){var f=function(){this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.ajax.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings=[];this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls=
{};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=gx.GxObject.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})*$/;this.sPrefix=function(){return this.CmpContext};this.declareDomainHdlr=function(a,b){this.GXValidFnc[a].dom_hdl=b};this.setVCMap=function(a,b,c,d){this.VarControlMap[a]=
{id:b,grid:c,type:d}};this.InitStandaloneVars=function(){var a=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=a&&gx.setGxO(a)};this.getCmpType=function(a){a=this.cmpRegex.exec(a);this.cmpRegex.lastIndex=0;return a};this.getContainer=function(){if(this.containerControl)return gx.dom.el(this.containerControl);var a,b=this.getCmpType(this.CmpContext);b&&(a=gx.dom.el(b[1]+"gxHTMLWrp"+b[2]));if(a)return a};this.setContainer=function(a){this.containerControl=a};this.setObjectType=function(a){this.ObjectType=
a};this.getObjectType=function(){return this.ObjectType};this.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};this.setAjaxSecurity=function(a){this.AjaxSecurity=a};this.setOnAjaxSessionTimeout=function(a){switch(a){case "Warn":this.OnSessionTimeout=gx.ajax.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=gx.ajax.timeoutActions.callObj}};this.addKeyListener=function(a,b){gx.evt.addKeyListener(this.CmpContext,a,b)};this.clearMessages=
function(){this.MsgList.length=0};this.addMessage=function(a){this.MsgList.push(a)};this.showMessages=function(){for(var a=[],b=this.MsgList.length,c=0;c<b;c++)a.push({att:"",type:2,text:this.MsgList[c]});b={};b[""==this.CmpContext?"MAIN":this.CmpContext]=a;gx.fn.setErrorViewer(b);this.clearMessages()};this.setPrompt=function(a,b){gx.fn.attachCtrl(this.CmpContext+a,{id:a,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:b,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[a]=
function(b){if((b=(b||gx.dom.el(a)).parentNode)&&b.href)if((b=b.href.match("javascript:(.+)"))&&b.length>1){b=decodeURIComponent(b[1]);try{eval(b)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setPrompt")}}}};this.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var a=[],b=gx.csv.lastEvtResponse.gxValues,c=b.length,d=0;d<c;d++){var f=b[d];if(f.CmpContext==this.CmpContext&&gx.lang.booleanValue(f.IsMasterPage)==this.IsMasterPage){a.push(f);break}}gx.fn.setJsonValues(a)}};this.refreshInputs=
function(a){for(var b=a.length,c=0;c<b;c++){var d=this.getValidStructFld(a[c][1]);null!=d&&"function"==typeof d.c2v&&d.c2v()}};this.refreshOutputs_impl=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var f=a[c];if(f.fld){var j=this.getValidStructFld(f.fld);if(null!=j)j.v2c(),f=gx.fn.getControlGridRef(j.fld,j.grid),gx.csv.invalidateGXCtrl(f),gx.fn.setControlOldValue(f,j.val());else{j=this.getVariable(f.av);if(null!=j&&"object"==typeof j){var k=this.getFormBCForVar(f.av);null!=k&&this.bcToScreen(k,
j);(k=this.getGridForColl(f.av))&&k.refreshCollection(j)}gx.fn.setHidden(gx.csv.ctxControlId(f.fld,this),j)}}else f.ctrl&&b.push(f)}c=0;for(d=b.length;c<d;c++)f=b[c],gx.uc.isUserControl(f.ctrl)&&(f.ctrl.execV2CFunctions(!1),f.ctrl.execShowFunction())};this.refreshOutputs=function(a){this.refreshOutputs_impl(a);this.showMessages()};this.refreshRowOutputs=function(a){this.refreshOutputs_impl(a)};this.refreshServerOutputs=function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c],f=gx.fn.getHidden(this.CmpContext+
d.fld);void 0!=f&&((d=this.getValidStructFld(d.fld))&&d.v2v?(d.v2v(f),d.v2c()):this.setVariable(a[c].av,f))}};this.getContextObject=function(a){return null!=this.getValidStructFld(a)&&(a=gx.fn.getControlValue_impl(this.CmpContext+a),null!=a)?a:""};this.getValidStructId=function(a){if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),c=0;c<b.length;c++)if(this.isSameField(this.getValidStruct(b[c]),a))return b[c];return-1};this.getValidStructFld=function(a){if("function"==typeof a||"object"==typeof a&&
a.tagName)a="object"==typeof a&&"radio"===a.type&&a.name?a.name:gx.dom.id(a);var b=this.getValidStructFld_cache[a];if(b)return b;if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),c=b.length,d=0;d<c;d++){var f=this.getValidStruct(b[d]);if(this.isSameField(f,a))return this.getValidStructFld_cache[a]=f}return this.getValidStructFld_cache[a]=null};this.isSameField=function(a,b){var c=a.fld;if(c==b)return!0;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(b=b.substring(this.CmpContext.length));
0!=a.grid&&(b=b.replace(this.rowPatternRegex,""));return c==b};this.getUserFocus=function(){var a=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(a)&&"notset"!=a){var b=gx.dom.byId(a);if(!gx.lang.emptyObject(b)&&!gx.fn.isAccepted(b)){a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var c=gx.O;gx.O=this;b=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=c;gx.csv.cmpCtx=a;a=gx.lang.emptyObject(b)?"":b.id}}if(gx.lang.emptyObject(a)){if(this.hasMasterPage()&&(a=this.MasterPage.getUserFocus(),
!gx.lang.emptyObject(a)))return a;b=[];for(c=0;c<this.WebComponents.length;c++)if(0==this.WebComponents[c].CmpContext.indexOf("MP"))b.push(this.WebComponents[c]);else if(a=this.WebComponents[c].getUserFocus(),!gx.lang.emptyObject(a))return a;for(c=0;c<b.length&&!(a=b[c].getUserFocus(),!gx.lang.emptyObject(a));c++);}return a};this.getGridColumn=function(a,b){var c=null,d=null;gx.fn.getPropertyControlRef(a,b);d=gx.fn.controlGridId(a);0!=d&&(d=gx.O.getGridById(d,b))&&(c=d.grid.getColumnByHtmlName(a));
return c};this.hasMasterPage=function(){return null!=this.MasterPage};this.setComponent=function(a){this.CmpControls[a.id.toLowerCase()]=a};this.refreshGrid=function(a){(a=this.getGrid(a))&&a.doRefresh()};this.refreshComponent=function(a){var b=this.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix);b?gx.evt.dispatcher.dispatch("REFRESH",b):(b=gx.fn.controlGridId(a),0!==b&&(b=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix+gx.fn.currentGridRow(b)))&&gx.evt.dispatcher.dispatch("REFRESH",
b))};this.getComponentPrefix=function(a){return(a=this.getComponentData(a))?a.Prefix||"":""};this.getComponentData=function(a){return this.CmpControls[a.toLowerCase()]};this.createWebComponent=function(a,b,c,d,f,j){j=j||this.getComponentPrefix(a);d||(a=gx.fn.controlGridId(a),d=0!==a?gx.fn.currentGridRow(a):"");var f=f||this.CmpContext+"gxHTMLWrp"+j+d,j=this.CmpContext+j,k=gx.getObj(j,!1);k?k.startFeedback():gx.dom.mask(f);a=gx.gen.isJava()&&gx.pO.PackageName?gx.pO.PackageName+".":"";gx.ajax.dynComponent(a+
b,c,j,d).done(function(a){if(!a.DynComponentMap)a.DynComponentMap={};a.DynComponentMap[j+d]=f;gx.ajax.setPostResponse(a,k);k?k.endFeedback():gx.dom.unmask(f)})};this.setWebComponent=function(a,b){this.deleteComponent(a.CmpContext,a,!1);b&&this.restoreComponentHiddens(a.CmpContext,b);this.WebComponents[a.CmpContext]=a;this.WebComponents.push(a);a.JustCreated=!0;gx.fn.setHidden(a.CmpContext,a.ServerClass);gx.fx.obs.notify("webcom.render",[a])};this.getWebComponent=function(a){return this.WebComponents[a]};
this.deleteComponent=function(a,b,c){var c="undefined"==typeof c?!0:c,d=this.getWebComponent(a);if(d){var f=gx.gen.isJava()&&d.PackageName?d.PackageName+".":"";gx.cache.deleteInlineCode(a+f+d.ServerClass.toLowerCase());c&&this.deleteComponentHiddens(a);gx.lang.emptyObject(b)||gx.fn.setHidden(b.CmpContext,b.ServerClass);d.ondestroy();delete this.WebComponents[a];b=this.WebComponents.length;for(c=0;c<b;c++)if(this.WebComponents[c].CmpContext==a){this.WebComponents.splice(c,1);break}var b=this.WebComponents,
j;for(j in b)isNaN(parseInt(j))&&0===j.indexOf(a)&&this.deleteComponent(j)}};this.deleteComponentHiddens=function(a){var a=gx.fn.filterHiddens(RegExp("^"+a),gx.http.viewState),b;for(b in a)b&&gx.fn.deleteHidden(b)};this.restoreComponentHiddens=function(a,b){var c=gx.fn.filterHiddens(RegExp("^"+a),b),d;for(d in c)d&&gx.fn.setHidden(d,c[d])};this.setCmpContext=function(a){void 0!=a&&(""!==a&&(this.IsComponent=!0),this.CmpContext=a)};this.getOldLvl=function(a){for(var b in this.LvlOlds)for(var c=this.LvlOlds[b],
d=c.length,f=0;f<d;f++)if(c[f]==a)return b;return-1};this.refreshDependantGrids=function(a){for(var b=this.Grids.length,c=0;c<b;c++)for(var d=this.Grids[c],f=d.refreshVars,j=f.length,k=0;k<j;k++)if(f[k].fld==a.fld){d.filterVarChanged();break}};this.getCtrlPropertyValue=function(a,b){var c=gx.fn.getCtrlProperty(a,b);void 0===c&&(c=gx.fn.getHidden(a+"_"+b));return c};this.setGrid=function(a){this.Grids[a.gridName]=a;var b=this.getGridIdxByName(a.gridName);-1!=b?this.Grids[b]=a:this.Grids.push(a)};this.getGrid=
function(a){return this.Grids[a]};this.getGridIdxByName=function(a){for(var b=this.Grids.length,c=0;c<b;c++)if(this.Grids[c].gridName==a)return c;return-1};this.getGridIdx=function(a){for(var b=this.Grids.length,c=0;c<b;c++)if(this.Grids[c].gridId==a)return c;return-1};this.getGridById=function(a,b){for(var b=b||"",c=this.Grids.length,d=0;d<c;d++){var f=this.Grids[d];if(f.gridId==a&&(!f.parentRow||gx.text.endsWith(b,f.parentRow.gxId)))return f}return null};this.getGridForColl=function(a){for(var b=
this.Grids.length,c=0;c<b;c++){var d=this.Grids[c];if(d.boundedCollName==a)return d}return null};this.getFormBCForVar=function(a){for(var b in this.FormBCs){var c=this.FormBCs[b];if(c&&c.gxvar==a)return c}return null};this.getGridBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));return this.GridBCs[b]};this.getFormBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));return this.FormBCs[b]};
this.addGridBCProperty=function(a,b,c,d){var f=this.getGridBC(a);"undefined"==typeof f&&(f={},f.gxvar=d,this.GridBCs[a]=f);this.addBCProperties(f,b,c,d)};this.addBCProperty=function(a,b,c,d){var f=this.getFormBC(a);"undefined"==typeof f&&(f={},f.gxvar=d,this.FormBCs[a]=f);this.addBCProperties(f,b,c,d)};this.addBCProperties=function(a,b,c,d){if(a)if(b instanceof Array)for(var f=b.length,m=function(){var a=this[c.gxvar];if("date"==c.type)a=(new gx.date.gxdate(a)).getString("Y4MD");else if("bitstr"===
c.type&&gx.pO.fullAjax){var g=gx.fn.getControlGridRef(c.fld,c.grid);""!==j(g).val()&&(a="gxformdataref:"+g.id)}this.valueToBCProp(this[d],b,c,a)},k=0;k<f;k++){if("undefined"==typeof a[b[k]])if(k<f-1)a[b[k]]={};else{a[b[k]]=c;"object"==typeof this[d]&&(c.v2bc=m);break}a=a[b[k]]}else"string"==typeof b&&(a[b]=c)};this.valueToBCProp=function(a,b,c,d){try{if(a)for(var f=b.length,j=0;j<f;j++){if(gx.lang.isArray(a)&&c&&c.grid){if(0==a.length)continue;var k=gx.fn.getGridObj(c.grid),q=k&&k.grid?k.grid.firstRecordOnPage:
0,t=gx.fn.currentGridRow(c.grid);4<t.length&&(t=t.substr(t.length-4*(j+1),4));a=a[Number(q||0)+Number(t)-1]}1<f&&(j<f-1&&void 0===a[b[j]])&&(a[b[j]]={});if("object"==typeof a[b[j]])a=a[b[j]];else{a[b[j]]=d;break}}}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","valueToBCProp")}};this.bcToScreen=function(a,b){for(var c in a)if("gxvar"!=c)try{if("object"==typeof b[c])this.bcToScreen(a[c],b[c]);else{var d=a[c];if((0==d.grid||gx.csv.validatingGrid&&d.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(d.hc)&&
d.v2v)d.v2v(b[c]),d.v2c()}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","bcToScreen")}};this.addGridUCEventHandler=function(a,b,c){gx.lang.emptyObject(this.GridUCsEvts[a])&&(this.GridUCsEvts[a]=[]);this.GridUCsEvts[a].push({e:b,h:c})};this.getGridUCEventHandlers=function(a){a=this.GridUCsEvts[a];return gx.lang.emptyObject(a)?[]:a};this.setGridUCDynProp=function(a,b,c,d,f){this.setGridUCProp(a,b,c,void 0,f)};this.setGridUCProp=function(a,b,c,d,f){gx.lang.emptyObject(this.GridUCsProps[a])&&(this.GridUCsProps[a]=
[]);this.GridUCsProps[a].push({p:b,h:c,v:d,t:f});"InternalTitle"==b&&(this.GridUCsProps[a].title=d)};this.getGridUCProperties=function(a){a=this.GridUCsProps[a];return gx.lang.emptyObject(a)?[]:a};this.addUsercontrolBinding=function(a,b,c){this.UCBindings[a]||(this.UCBindings[a]={fld:b,uc:[]});gx.util.inArray(c,this.UCBindings[a].uc)||this.UCBindings[a].uc.push(c)};this.setUserControl=function(a){a.ContainerName&&(this.UserControls[a.ContainerName]=a)};this.getUserControl=function(a){var b=this.UserControls[a];
!b&&""!=this.CmpContext&&(b=this.UserControls[this.CmpContext+a]);return b};this.getUserControlGrids=function(){return j.map(this.Grids,function(a){if(a.grid&&a.isUsercontrol)return a.grid})};this.execV2CFunctions=function(a,b){if(!b||gx.lang.isArray(b)&&0==b.length)b=this.UserControls;var c=this;j.each(b,function(b,d){c==d.ParentObject&&d.updateAndShow(a)})};this.execC2VFunctions=function(){j.each(this.UserControls,function(a,b){try{b.execC2VFunctions()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}try{b.saveProperties()}catch(d){gx.dbg.logEx(d,
"gxfrmutl.js","execC2VFunctions")}})};this.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};this.setVariable=function(a,b){var c=this[a]=b;0!=a.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+a,b);if(void 0!=this.VarControlMap[a]){var d=this.VarControlMap[a].type;if("date"==d||"dtime"==d)"string"==typeof b&&(b=new gx.date.gxdate(b),this[a]=b),c="date"==d?b.getStringWithFmt("Y4MD"):b.getStringWithFmt("Y4MD")+" "+
b.getTimeString(!0,!0);"decimal"==d&&"."!=gx.decimalPoint?(c=b.toString().replace(".",gx.decimalPoint),"string"==typeof b&&(this[a]=gx.num.parseFloat(b))):"int"==d&&"string"==typeof b&&(this[a]=gx.num.parseInt(b));gx.fn.setHidden(this.CmpContext+this.VarControlMap[a].id,c)}"Gx_mode"==a&&this.setMode();void 0!=this.UCBindings[a]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[a].fld,b)};this.getVariable=function(a){return this[a]};this.isServerEvent=function(a){return this.Events[a][1]||!1};this.getServerEventName=
function(a){return this.Events[a][0]||""};this.getClientEventName=function(a){for(var b in this.Events)if(this.Events[b][0]==a)return b;return""};var d={RFR:"REFRESH"};this.cleanEventName=function(a){var a=a.replace(RegExp("^"+this.CmpContext),""),b=/^E('?(\w+)\.?([^\.]*)'?)/.exec(a),a=b&&b.length&&1<b.length?b[1].replace(/\.\d*$/,""):a;return d[a]||a};this.inputHasFormatErrors=function(a,b,c){var d,f;d=this.cleanEventName(a);var j,k,a=!1,q=gx.csv.anyFormatError(),t;if(!q||!this.EvtParms[d])return!1;
f=this.EvtParms[d][0];var s=this,r=function(a){if(a)if(b&&c&&a.grid==b){if((j=gx.fn.getControlGridRef(a.fld,b,c))&&j.id&&gx.csv.gxFormatErrors[j.id])return!0}else if((j=gx.fn.getControlGridRef(a.fld,a.grid))&&j.id)for(t in gx.csv.gxFormatErrors)if(a==s.getValidStructFld(t))return!0;return!1};d=0;for(len=f.length;d<len&&!a;d++){var v=f[d];if(v.postForm)return q;if(v.fld)if(k=this.getValidStructFld(v.fld))a=a||r(k);else if(v=this.getFormBCForVar(v.av),null!=v)for(var u in v)k=v[u],"object"===typeof k&&
(a=a||r(k))}return a};this.setEventParameters=function(a,b){gx.csv.lastEvtRow=null;gx.O=this;var c=!0,d=-1;gx.csv.cmpCtx=this.CmpContext;for(var f=a.length,j=0;j<f;j++){var k=a[j][0],q=a[j][1],t=a[j][2],s=!1,r;for(r in b)if(r.toLowerCase()==k.toLowerCase()){this.setVariable(t,b[r]);s=!0;break}s||this.setVariable(t,b);k=this.getValidStructFld(q);null!=k?(0!=k.grid&&-1==d?d=k.grid:0!=k.grid&&k.grid!=d&&(c=!1),k.v2c()):gx.fn.setHidden(this.CmpContext+q,this.getVariable(t))}c&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(d))};
this.executeEvent=function(a,b,c,d){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var f=this.getClientEventName(a),j=f?this.isServerEvent(f):!0;gx.lang.emptyObject(gx.csv.validatingGrid||gx.csv.instanciatedRowGrid);j?this.executeServerEvent(a,b,c,d):gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,f,"",c,"");gx.csv.instanciatedRowGrid=null};this.executeServerEvent=function(a,b,c,d,f){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var j=!0;void 0!=b&&!1==b&&(j=!1);b="string"==typeof c?c:"";gx.lang.emptyObject(gx.csv.lastEvtRow)||
(b=gx.csv.lastEvtRow);var c=gx.csv.validatingGrid||gx.csv.instanciatedRowGrid,k=!gx.lang.emptyObject(c)?c.gridId:!1;f?b="":(""==b&&k&&(b=gx.csv.lastRow[k]),"undefined"==typeof b&&(b=gx.fn.currentGridRowImpl(c.gridId)));gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+a+"."+b,gx.evt.dummyCtrl,k,j,null,null,null,d)};this.executeEnterEvent=function(a,b){var c=!1;if(b&&b.onblur)b.onblur();if((gx.pO.fullAjax||null==d)&&gx.evt.cancelAndRefresh(a)){if(!this.refreshAndEnter)return;c=!0}gx.dom.hasSubmitControl()&&
gx.evt.cancel(a,!0);b&&("INPUT"==b.nodeName&&gx.dom.isEditControl(b))&&gx.evt.cancel(a,!0);var d=this.gxOWithEnter();if(null!=d){gx.evt.enter=!0;var f="ENTER";d.IsMasterPage&&(f+="_MPAGE");var f=d.CmpContext+"E"+f+".",j;if(gx.evt.isEnterEvtCtrl(b)){var k=gx.fn.controlRowId(b);j=gx.fn.controlGridId(b.id);k&&(f+=k)}gx.evt.execEvt(d.CmpContext,d.IsMasterPage,f,gx.evt.dummyCtrl,j,!1,null,!1,null,c);gx.evt.enter=!1;gx.evt.cancel(a,!0)}};this.gxOWithEnter=function(){if(this.hasEnterEvent)return this;if(this.IsComponent){var a=
this.getCmpType(this.CmpContext),b=""==a[1]&&0==a[0].indexOf("MP"),a=gx.getObj(a[1],b);if(!gx.lang.emptyObject(a))return a.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};this.getLastControlId=function(){return this.GXLastCtrlId};this.getValidStruct=function(a){return this.GXValidFnc[a]};this.getControlIds=function(){return this.GXCtrlIds};this.getControlIdsh=function(){return this.GXCtrlIdsh};this.getUsercontrolFromChild=function(a){j.each(this.UserControls,
function(b,c){var d=c.getContainerControl();if(gx.dom.isChildNode(a,d))return c});return null};this.installFlatLevelDatePickers=function(){for(var a=null,b=this.getControlIds(),c=b.length,d=0;d<c;d++)a=this.getValidStruct(b[d]),void 0!=a&&(0==a.grid&&void 0!=a.dp)&&gx.fn.installDatePicker(this.CmpContext+a.fld,a.dp.f,a.dp.st,a.dp.wn,a.dp.mf,gx.fn.datePickerFormat(a.dp.pic,a.dp.dec,a.len))};this.installImageControls=function(){for(var a=gx.dom.byClass("gx-multimedia-upload"),b=0,c=a.length;b<c;b++)gx.html.multimediaUpload.createControl(a[b]);
gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};this.initControlsEnabledFlag=function(a){if("bits"!=a.type&&("audio"!=a.type&&"video"!=a.type)&&(a=gx.fn.getControlRef(a.fld))){var b=gx.http.viewState[gx.dom.id(a)+"_Enabled"];void 0!==b&&gx.fn.setEnabledProperty(a,gx.lang.gxBoolean(b),!1)}};this.initControlsBehaviour=function(){var a=this;j.each(gx.O.GXValidFnc,function(b,c){if(c&&c.fld&&(a.initControlsEnabledFlag(c),c.gxsgprm)){var d=gx.fn.getControlRef(c.fld);d&&gx.fx.installSuggest(d)}})};
this.clearMultimediaValue=function(a){a=gx.html.multimediaUpload.getElements(a);a.fileField.onchange(a.fileField);gx.fn.setHidden(a.fileField.id,"");gx.fn.setHidden(a.uriField.id,"");gx.fn.setHidden(a.fileField.id+"_gxBlob","")};this.refreshOlds=function(){for(var a in this.LvlOlds){var b=this.LvlOlds[a];if("function"!=typeof b){var c=gx.fn.lvlGrid(parseInt(a,10)),d;0!=c&&(d=gx.fn.currentGridRow(c));for(var c=b.length,f=0;f<c;f++){var j=b[f],k=j,q="",t=gx.fn.vStructForOld(k);if(t){if(!t.gxgrid||0<
t.gxgrid.grid.rows.length)q=gx.typedOld(t.fld,k,t.type)}else gx.lang.emptyObject(d)||(j+="_"+d),q=gx.fn.getHidden(j);"undefined"!=typeof q&&(t||(window[k]=q),this[k]=q)}}}};this.deleteEventHandlers=function(){try{gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this)}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","deleteEventHandlers")}};this.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),j.each(this.UserControls,function(a,b){if(!gx.lang.emptyObject(b.destroy))try{b.destroy()}catch(c){gx.dbg.logEx(c,
"gxfrmutl.js","ondestroy")}}),delete this.containerControl}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","ondestroy")}};this.onpost=function(){var a=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();for(var b=this.WebComponents.length,c=0;c<b;c++)this.WebComponents[c].onpost();this.ReadonlyForm&&(this.IsComponent&&a!=this)&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(a)};this.roControlsAsHidden=function(){for(var a=this.getControlIds(),b=a.length,c=0;c<b;c++){var d=this.getValidStruct(a[c]);
if(0==d.grid&&"function"==typeof d.val){var d=this.CmpContext+d.fld,f=gx.dom.el(d);f&&!gx.fn.isAccepted(f)&&gx.fn.setHidden(d,gx.fn.getControlValue(d))}}};this.onload=function(a){gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this));var b=this.Grids.length;if(!1!==a)for(var c=0;c<b;c++)this.Grids[c].loadGrid();b=this.WebComponents.length;for(c=0;c<b;c++)this.WebComponents[c].onload(a);gx.dbg.logPerf("objectAfterLoad_"+
this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0);this.JustCreated=!1;this===gx.pO&&(gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass)};this.onunload=function(a){if(this.hasMasterPage()&&!1!==a)this.MasterPage.onunload();a=this.Grids.length;for(a-=1;0<=a;a--)delete this.Grids[this.Grids[a].gridName],this.Grids[a].cleanup(),
this.Grids.splice(a,1);a=this.WebComponents.length;for(a-=1;0<=a;a--)delete this.WebComponents[this.WebComponents[a].CmpContext],this.WebComponents[a].onunload(),this.WebComponents.splice(a,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};this.clean=function(a){this.cleanHiddens();this.onunload(a)};this.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};this.screenToVars=function(){try{for(var a=this.getControlIds(),b=a.length,c=0;c<b;c++){var d=
this.getValidStruct(a[c]);d&&(0==d.lvl&&"function"==typeof d.c2v)&&d.c2v()}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","screenToVars")}};this.postbackLoad=function(a,b){this.hasMasterPage()&&this.MasterPage.postbackLoad(a);for(var c=this.WebComponents.length,d=0;d<c;d++)this.WebComponents[d].postbackLoad(a);this.IsComponent&&this.JustCreated&&(this.installImageControls(),this.installFlatLevelDatePickers());this.execV2CFunctions(!0,a);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&gx.fn.doAttachs(b)};
this.addDragSource=function(a,b,c,d){gx.fx.dnd.addSource(this,a,b,c,d)};this.addDropTarget=function(a,b,c,d){gx.fx.dnd.addTarget(this,a,b,c,d)};this.addContextSetter=function(a,b,c,d){gx.fx.ctx.addSetter(this,a,b,c,d)};this.addContextTracker=function(a,b,c,d){gx.fx.ctx.addTracker(this,c,d)};this.addOnMessage=function(a,b,c,d,f){gx.fx.notifications.addTracker(this,a,b,c,d,f)};this.addEventHandler=function(a,b,c){gx.fx.dom.addEventHandler(this,a,b,c)};this.updateBitmapValue=function(a,b,c,d){a=gx.html.multimediaUpload.getContainer(a);
"file"==gx.html.multimediaUpload.getOptionValue(a)?this[b]=d:this[c]=d};var b,a=0,c=void 0===gx.NotificationDelay?200:gx.NotificationDelay;this.getFeedbackContainer=function(){return gx.pO&&!gx.pO.fullAjax||this==gx.pO?document.body:this.getContainer()};this.startFeedback=function(g){a++;var d=!0===g?0:c,f=function(){var a=this.getFeedbackContainer();a&&gx.dom.mask(a)};0===d?f.call(this):b||(d=gx.lang.doCallTimeout(f,this,arguments,d),b=d.t)};this.endFeedback=function(){0<a&&a--;if(0==a){b&&(clearTimeout(b),
b=!1);var c=this.getFeedbackContainer();c&&gx.dom.unmask(c)}};this.isFeedbackOn=function(){return 0<a}};f.WEBCOMPONENT_CLASS_NAME="gxwebcomponent";f.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body";f.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})/;return f}(gx.$);
gx.uc=function(j){return{getNew:function(f,d,b,a,c,g,p,n,l){a=eval(a);gx.lang.inherits(a,gx.uc.UserControl,!0);a=new a(j);a.ContainerName=c;a.DesignContainerName=c;a.setupControl(f,g,d,b,p,n,l);return a},fromChild:function(f){var d=gx.pO.getUsercontrolFromChild(f);if(null!=d||gx.pO.hasMasterPage()&&(d=gx.pO.MasterPage.getUsercontrolFromChild(f),null!=d))return d;for(var b=gx.pO.WebComponents.length,a=0;a<b;a++)if(d=gx.pO.WebComponents[a].getUsercontrolFromChild(f),null!=d)return d;return null},getUserControlObj:function(f){var d=
gx.O.getUserControl(f);if(gx.lang.emptyObject(d)){if(gx.pO.hasMasterPage()&&(d=gx.pO.MasterPage.getUserControl(f),!gx.lang.emptyObject(d)))return d;for(var b=gx.pO.WebComponents.length,a=0;a<b&&!(d=gx.pO.WebComponents[a].getUserControl(f),!gx.lang.emptyObject(d));a++);}return d},userControlContainerId:function(f){var d=f.lastIndexOf("_");return-1!=d&&(d=f.substring(0,d)+"Container"+f.substring(d),null!=gx.dom.byId(d))?d:f+"Container"},setProperties:function(f,d){var b=gx.uc.getUserControlObj(gx.uc.userControlContainerId(f));
if(null!=b)if(void 0!=d.length)for(var a=d.length,c=0;c<a;c++)for(var g in d[c]){var j=d[c][g];b[g]=j}else for(g in d)j=d[g],b[g]=j},isUserControl:function(f){if(gx.lang.emptyObj(gx.O.UserControls))return!1;if(f instanceof gx.uc.UserControl)return!0;f=gx.dom.byId(gx.uc.userControlContainerId(f));return null!=f&&"DIV"==f.tagName?!0:!1},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=
0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.RealControl=this.C2ShowFunction=null;this.IsPostBack=!1;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(f){return gx.dom.byId(this.DesignContainerName+
f+(""!=this.GridRow?"_"+this.GridRow:""))};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(f,d,b,a,c,g,j){this.ParentObject=f;this.ControlName=d;this.ControlId=b;this.LastIdBefore=a;this.ControlLvl=void 0!=c?c:0;this.GridId=void 0!=g?g:0;this.GridRow=void 0!=j?j:"";this.ParentObject.GXValidFnc[this.ControlId]={lvl:this.ControlLvl,grid:this.GridId,
op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl}};this.addValidFunction=function(f,d,b){this.ValidFunctions.push(f);this.ParentObject.addUsercontrolBinding(d,b+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var f=this.ValidFunctions.length,d=0;d<f;d++)if(!this.ValidFunctions[d].call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var f=this.getContainerControl();
if(gx.lang.emptyObject(document.frames))f.onfocus=this.onfocus,this.RealControl=f;else{var d=document.frames.length;if(0<d)for(var b=0,b=0;b<d;b++){var a=document.frames[b];if(!0==gx.dom.isChildNode(a,f)){a.frameElement.onfocus=this.onfocus;this.RealControl=a.frameElement;break}}}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=
this.ControlId;gx.csv.anyError||this.setFocusBase()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(f){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=f};this.createWebComponent=function(f,d,b,a,c){this.ParentObject.createWebComponent(f,d,b,this.GridRow,a,c)};this.deleteWebComponent=
function(f){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(f))};this.notifyContext=function(f,d){gx.fx.ctx.notify(null,f,d)};this.addV2CFunction=function(){if(1==arguments.length&&"function"==typeof arguments[0])this.V2CFunctions.push(arguments[0]);else{var f=arguments[0],d=arguments[1],b=arguments[2];this.ParentObject.addUsercontrolBinding(f,d,this);this.V2CFunctions.push(function(a,c,g){var j=d;g&&(c&&(j=d+"_"+c),a.ParentObject[f]=gx.fn.getControlValue(j));a[b](a.ParentObject[f])})}};
this.addC2VFunction=function(f){this.C2VFunctions.push(f)};this.setC2ShowFunction=function(f){this.C2ShowFunction=f};this.execV2CFunctions=function(f){var d=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var b=0,a=this.V2CFunctions,c=a.length,b=0;b<c;b++)try{a[b](this,this.GridRow,f)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=d};this.execC2VFunctions=function(){var f=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var d=0,b=this.C2VFunctions,
a=b.length,d=0;d<a;d++)try{b[d](this,this.GridRow)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=f};this.execShowFunction=function(){try{null!=this.C2ShowFunction&&this.getContainerControl()&&this.C2ShowFunction(this)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execShowFunction")}this.IsPostBack=!0};this.updateAndShow=function(f){try{this.execV2CFunctions(f)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","updateAndShow")}f&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};
this.isServerEvent=function(f){var d=this.ParentObject,b=d.IsMasterPage?"_MPAGE":"",f=this.ControlName.toUpperCase()+b+"."+f.toUpperCase()+b;if(f=d.getClientEventName(f))return d.isServerEvent(f);gx.dbg.logDebug("Client event name couldn't be resolved.");return!1};this.eventHandler=function(f,d,b){gx.evt.setReady(!1);gx.setGxO(this.ParentObject);if(0<f){var a=this.DesignContainerName,c=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);c&&c[1]&&(a=c[1]);this.ParentObject[a]=
this;(f=this.ParentObject.getGridById(f))&&f.instanciateRow(d)}else gx.csv.instanciatedRowGrid=null;this.execC2VFunctions();b.call(this.ParentObject,this.getEventRow());gx.evt.setReady(!0)};this.addEventHandler=function(f,d){this[f]=function(b){var a=this.isServerEvent(f);a&&"function"===typeof b&&gx.fx.obs.addObserver("gx.onafterevent",this,b,{single:!0});this.eventHandler(this.GridId,this.GridRow,d);!a&&"function"===typeof b&&b.call(this)}.closure(this)};this.addProperty=function(f,d){this.Properties[f]=
d};this.setProp=function(f,d,b,a){this.addProperty(f,d);this.PropTypes[f]=a;gx.lang.isBooleanType(a)?this[f]=gx.lang.gxBoolean(b):"color"==a?gx.lang.emptyObject(b)||(this[f]="number"==typeof b||"string"==typeof b?gx.color.html(b):b):gx.lang.isNumericType(a)?gx.lang.emptyObject(b)||(this[f]=gx.num.parseFloat(b)):this[f]=b};this.setDynProp=function(f,d,b,a){this.DynProperties.push(f);var c=function(){var c=this.getDynPropertyValueFromHidden(f,d);void 0===c&&(c=b);this.setProp(f,d,c,a)};this.ParentObject.CmpContext?
gx.fx.obs.addObserver("webcom.render",this,function(a){a===this.ParentObject&&c.call(this)}):gx.fx.obs.addObserver("gx.onready",this,c,{single:!0})};this.refreshDynProperties=function(){for(var f=0,d=this.DynProperties.length;f<d;f++){var b=this.DynProperties[f];this[b]=this.getDynPropertyValueFromHidden(b,this.Properties[b])}};this.getDynPropertyValueFromHidden=function(f,d){var b=gx.fn.getHidden(this.getHiddenName(d));void 0===b&&(b=gx.fn.getHidden(this.getHiddenName(f)));return b};this.setGridProperties=
function(){for(var f=this.ParentObject.getGridUCProperties(this.ControlName),d=f.length,b=0;b<d;b++){var a=f[b],c=a.v;"undefined"==typeof c&&(c=this.getHiddenName(a.h),c=gx.fn.getHidden(c),"color"==a.t&&(c=gx.color.html(c)));this.setProp(a.p,a.h,c,a.t)}};this.setGridEventHandlers=function(){for(var f=this.ParentObject.getGridUCEventHandlers(this.ControlName),d=f.length,b=0;b<d;b++){var a=f[b];this.addEventHandler(a.e,a.h)}};this.getHiddenName=function(f){var d="";""!=this.GridRow&&(d="_"+this.GridRow);
return this.ParentObject.CmpContext+this.ControlName.toUpperCase()+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+f+d};this.saveProperties=function(){for(var f in this.Properties){var d=this[f];"function"!=typeof this.Properties[f]&&("undefined"!=typeof d&&("undefined"!=typeof d.R&&"undefined"!=typeof d.G&&"undefined"!=typeof d.B)&&(d=gx.color.rgb(d.R,d.G,d.B)),gx.lang.isBooleanType(this.PropTypes[f])&&(d=d?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[f]),d))}}}}}(gx.$);
gx.printing={loaded:!1,tries:0,waitInterval:100,IFrameId:"gxprintHelper_Iframe",print:function(j){if(j&&gx.lang.emptyObject(j.printerRule))this.printDirect(j);else{if(!this.loaded){var f='<applet name="GeneXusPrintAppletForWindows" archive="'+gx.util.resourceUrl("printingappletsigned.jar",!0)+'" code="com/genexus/printing/Printer.class" width="0" height="0">',f=f+('<param name="path" value="'+gx.util.resourceUrl(gx.basePath,!0)+'">');document.body.appendChild(gx.html.nodesFromText(f+'<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p></applet>')[0]);
this.loaded=!0}0==this.tries?this.printWhenReady(j):gx.dbg.logMsg("Already trying to print a document.")}},printDirect:function(j){var f=gx.dom.byId(gx.printing.IFrameId);f||(f=document.createElement("IFRAME"),f.id=gx.printing.IFrameId,f.style.visibility="hidden",document.body.appendChild(f));f.src=j.reportFile;f.onload=function(){this.contentWindow.print();this.onload=null;this.src=""}},printWhenReady:function(j){this.tries>=60*this.waitInterval?(this.tries=0,gx.dbg.logMsg("The printing applet was not loaded.")):
(this.tries++,this.isReady()?(document.GeneXusPrintAppletForWindows.printReport(j.reportFile,j.printerRule,"GXPRN.INI"),this.tries=0):setTimeout(function(){gx.printing.printWhenReady(j)},this.waitInterval))},isReady:function(){var j=document.GeneXusPrintAppletForWindows;return j&&("function"==typeof j.isReady||"unknown"==typeof j.isReady)?j.isReady():!1}};
gx.fn=function(j){var f=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,d=function(b){b=b.replace(/\\/g,".");return gx.gen.isDotNet()?b.replace(/\.aspx$/,""):b};return{attachedControls:function(){return gx.attachedControls},closeWindow:function(b){if("string"==typeof b){if(this.closeFromServer(b))return;b=[]}b||(b=[]);if(gx.popup.ispopup()){var a=gx.popup.getPopup(),c=a.url?gx.util.noParmsUrl(a.url):"";if(!a.frameWindow||-1!=a.frameWindow.location.href.search(c+"(\\?.*)?$")||
gx.grid.drawAtServer){a.close(b);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(b=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(b)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),b=gx.ajax.absoluteurl(b),gx.spa.started?(gx.spa.redirect(b),gx.ajax.enableForm()):location.href=b))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(b){try{if(window.parent&&
window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(b)):window.parent.gx.fn.closeWindow(gx.json.evalJSON(b)),!0}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(b,a){gx.evt.execLoad=!1;a&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(b)},invalidEmptyValue:function(b){if(gx.lang.emptyObject(b.s)){for(var a=b.v.length,c=0;c<a;c++)if(b.v[c][0]===
b.s)return!1;return!0}return!1},trimSelectValue:function(b,a){return"int"==a?gx.text.trim(b):gx.text.rtrim(b)},selectedDescription:function(b,a){for(var c=b.v.length,g=0;g<c;g++)if(this.trimSelectValue(b.v[g][0],a)===b.s)return b.v[g][1];return null},setGridCheckBoxValue:function(b,a,c,g){this.setCheckBoxValue(b+"_"+a,c,g)},setGridDecimalValue:function(b,a,c){return this.setGridControlValue(b,a,c)},setGridControlValue:function(b,a,c,g){if(void 0!==a)return this.setControlValue(b+"_"+a,c,g)},setVarValues:function(b,
a){for(var c=b.length,g=0;g<c;g++){var d=gx.fn.vStructForVar(b[g]);d&&d.v2v?d.v2v(a[g]):eval(b[g]+'="'+a[g]+'"')}},setControlOldValue:function(b,a){if(b){var c=b.id,g=gx.O.getValidStructFld(c);g&&g.gxgrid&&(g.gxgrid.IsValidState[c]?g.gxgrid.IsValidState[c].gxOldValue=a:g.gxgrid.IsValidState[c]={gxOldValue:a});if("radio"==b.type)for(var c=gx.dom.byName(b.name),g=c.length,d=0;d<g;d++)c[d].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,a);else b.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,a)}},setControlGxValid:function(b,
a){if(b&&b.id){var c=b.id,g=gx.O.getValidStructFld(c);g&&g.gxgrid&&(g.gxgrid.IsValidState[c]?g.gxgrid.IsValidState[c].gxvalid=a:g.gxgrid.IsValidState[c]={gxvalid:a});b.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,a)}},setControlValue:function(b,a,c){b=gx.csv.ctxControlId(b);this.setControlValueAny(b,a,c)},setControlValueAny:function(b,a,c){var g=gx.O.getValidStructFld(b),d=gx.dom.el(b),f=!1;g&&("dtime"==g.type||"date"==g.type?""===a?a=gx.date.nulldate_toc(g.len,g.dec):"string"==typeof a&&(a=new gx.date.gxdate(a)):
gx.lang.isCharacterType(g.type)&&(a=gx.text.rtrim(a)));a instanceof gx.date.gxdate?gx.lang.emptyObject(g)||(a=gx.date.formatDateTime(g.dec,g.len,gx.dateFormat,a)):gx.lang.instanceOf(a,Number)||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal?!gx.lang.emptyObject(g)&&void 0!=g.pic&&(a=gx.num.formatNumber(a,g.dec,g.pic,g.len,g.sign,!1)):"string"==typeof a&&(!gx.lang.emptyObject(g)&&void 0!=g.isPwd)&&(f=!0,null!=d&&"SPAN"==d.nodeName&&(a=gx.text.formatString(a,g.len,g.isPwd)));this.persistGridControlValue(b,
a);null!=d&&"SPAN"!=d.nodeName?this.setControlValue_impl(d,a,c):gx.fn.setHidden(b,a);null!=d&&"SPAN"==d.nodeName&&(b=d);var j=!1,j=g?g.multiline:null!=d&&"TEXTAREA"==d.tagName;f?this.setControlValue_span_safe(b,gx.text.formatString(a,g.len,g.isPwd),c,j):this.setControlValue_span_safe(b,a,c,j)},setDecimalValue:function(b,a){this.setControlValue(b,a)},toDecimalValue:function(b,a,c){return gx.num.parseFloat(b,a,c)},toDatetimeValue:function(b,a){return new gx.date.gxdate(b,a)},setCheckBoxValue:function(b,
a,c){try{var b=gx.csv.ctxControlId(b),g=gx.dom.byId(b);g||(g=gx.dom.form()[b]);g&&(g.checked=a.toString()==c.toString(),g.value=a)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(b,a,c){var g=b.lastIndexOf("_");if(-1!=g&&(c=c?c:gx.O.getValidStructFld(b.substring(0,g)))&&c.gxgrid)g=b.substring(g+1),4<g.length?(g=g.substring(4,g.length),(g=gx.O.getGrid(c.gxgrid.gridName+"_"+g))&&g.persistControlValue(b,a,c)):c.gxgrid.persistControlValue(b,a,c)},setControlValue_span_safe:function(b,
a,c,g){"string"==typeof b&&(b=gx.dom.el("span_"+b));if(null!=b){if("SPAN"!=b.nodeName)var d="span_",d="string"==typeof b?d+b:d+gx.dom.id(b),b=gx.dom.byId(d);d=gx.dom.bySelector('[data-name="'+b.id+'"]');2>d.length&&(d=[b]);j.each(d,function(b,d){gx.fn.setControlValue_fmt(d,a,c,g)})}},setControlValue_fmt:function(b,a,c,g){try{if(null!=b)if(1==c){var d=b.getAttribute("gxlink");!gx.lang.emptyObject(d)&&(null!=b.firstChild&&"A"==b.firstChild.nodeName)&&(b=b.firstChild);gx.html.setInnerHtml(b,a,!0)}else{0==
c&&"string"==typeof a&&(a=a.replace(/ +/g," "));for(d=b;null!=b.firstChild&&"#text"!=b.firstChild.nodeName;)b=b.firstChild;0==c&&(null==b.firstChild||"#text"!=b.firstChild.nodeName)&&"A"!=b.nodeName?gx.html.setInnerText(d,a,c,g):gx.html.setInnerText(b,a,c,g)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(b,a,c){"string"==typeof b&&(b=gx.dom.el(b));a instanceof gx.date.gxdate&&(a=a.getString());if(null!=b){var d=gx.dom.byName(b.id);if(2>d.length||"radio"===
b.type)d=[b];j.each(d,function(b,d){"radio"===d.type?this.setRadioValue(d.name,a):gx.dom.isEditControl(d)||"textarea"==d.type?d.value=gx.lang.decodeValue(a):void 0!=d.value?d.value=a:this.setControlValue_span_safe(d,a,c)})}},setGridComboBoxValue:function(b,a,c){this.setComboBoxValue(b+"_"+a,c)},setComboBoxValue:function(b,a){var c=gx.util.browser.isIE(),b=gx.csv.ctxControlId(b),d=gx.dom.byId(b);if(d){var f="",j=gx.O.getValidStructFld(b);gx.lang.emptyObject(j)||(f=j.type);"int"==f?a=gx.text.trim(a):
"date"==f&&a instanceof gx.date.gxdate?a=a.getStringWithFmt("Y4MD"):"decimal"!=f&&(a=gx.text.rtrim(a));var l=a,o=!1;try{for(var m=d.options.length,k,q=0;q<m;q++){var t=d.options[q];if(gx.lang.isNumericType(f)?Number(t.value)==Number(a):gx.text.trim(t.value)==gx.text.trim(a)){if(l="undefined"!=typeof t.innerText?t.innerText:t.text,d.selectedIndex=q,o=!0,t.setAttribute("selected","selected"),k=t,c)break}else c||t.removeAttribute("selected")}k&&(k.value!=d.value&&gx.util.browser.isFirefox())&&gx.dom.redrawControl(d);
o||(d.selectedIndex=0);0<j.grid&&this.persistGridControlValue(b,a,j)}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(b,l,0)}},loadRadioButton:function(b,a,c){var d=j(b).parent().closest(".gx-radio-button"),f=d.is("table")?"radio-vertical":"radio-horizontal",n=j(b),a=j(gx.html.controls.applyTemplate(f,{id:b.name,className:d.attr("class"),style:d.attr("style"),title:b.title,isDisabled:b.disabled,gxoch0:n.attr("gxoch0"),values:j.map(a,function(a,d){return{itemId:b.name+
"_"+d,itemValue:a[0],itemDesc:a[1],isSelected:gx.text.trim(c.toString())==gx.text.trim(a[0].toString())}})}));d.replaceWith(a);gx.plugdesign.applyTemplateObject(a)},loadComboBox:function(b,a){this.setComboValues(b,a)},setGridComboValues:function(b,a){if(0==this.controlGridId(b))this.setComboValues(b,a);else for(var c=1;999>c;c++){var d=gx.text.padl(c.toString(),4,"0"),d=gx.dom.el(b+"_"+d);if(null==d)break;this.setComboValues(d.name,a)}},setComboValues:function(b,a){var c=gx.dom.el(b),d=gx.util.browser;
if(null!=c){var f="";-1!=c.selectedIndex&&(f=c.options[c.selectedIndex].value);for(;c.options.length>a.length;)c.remove(c.options.length-1);for(;a.length>c.options.length;){var j=document.createElement("OPTION");c.options.add(j)}for(var l=a.length,o=0;o<l;o++)if(j=c.options[o],j.value=a[o][0],d.isIE()&&9<=d.ieVersion()?j.innerText!=a[o][1]&&(j.innerText=a[o][1]):j.text!=a[o][1]&&(j.text=a[o][1]),Number(j.value)?Number(j.value)==Number(f):gx.text.trim(j.value)==gx.text.trim(f))c.selectedIndex=o;if(0==
c.options.length)c.selectedIndex=-1;else if(-1==c.selectedIndex||c.selectedIndex>c.options.length-1)c.options[0].selected=!0}},getControlRefById:function(b){return(b=this.validStruct(b))?0==b.grid?this.getControlRef(b.fld,!1):this.getControlGridRef(b.fld,b.grid):null},getControlRef:function(b,a){a||(b=gx.csv.ctxControlId(b));if("FORM"==b)return document;var c=gx.dom.el(b);return null!=c?c:null},getControlRef_list:function(b){var a=gx.dom.byName(b);if(null!=a)return a;b=gx.dom.byId(b);return null!=
b?[b]:null},screen_CtrlRef:function(b){b=this.getControlGridRef(b,this.controlGridId(b));return!gx.lang.emptyObject(b)?("hidden"==b.type&&(b=gx.dom.el("span_"+gx.dom.id(b))),b):null},screen_CtrlId:function(b){return this.getControlGridId(b,this.controlGridId(b))},getControlGridId:function(b,a,c){b=gx.csv.ctxControlId(b);if(gx.dom.el(b))return b;try{if(0==a)return b;void 0==c&&(c=this.currentGridRow(a));return b+"_"+c}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(b,
a,c){var b=gx.csv.ctxControlId(b),d=gx.dom.el(b);if(d)return d;try{if(0==a)return gx.dom.el(b);void 0==c&&(c=this.currentGridRow(a));if(d=gx.dom.el(b+"_"+c))return d;var f=gx.O.getComponentData(b);if(f)return gx.dom.el("gxHTMLWrp"+f.Prefix+c)}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRow:function(b,a){if("0000"!=a)try{return gx.currentRows[b]=a}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(b){try{return gx.currentRows[b]}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(b){b=this.currentGridRowImpl(b);return void 0==b?"0001":b},gridDuplicateKey:function(b){b=gx.fn.validStruct(b);if(void 0!=b){var a=b.gxgrid;if(null!=a&&(a=a.updateControlValue(b,!0)))return a.gxHasDuplicateKey()}return!1},firstGridControl:function(b,a){var c=gx.fn.controlIds(),d=c.length;for(i=0;i<d;i++){var f=gx.fn.validStruct(c[i],a);if(void 0!=f&&f.grid==b)return c[i]}return-1},lastGridControl:function(b,a){var c=gx.fn.controlIds();
for(i=c.length-1;0<=i;i--){var d=gx.fn.validStruct(c[i],a);if(void 0!=d&&d.grid==b)return c[i]}return-1},getGridDateTimeValue:function(b,a){var c=this.getControlValue(b+"_"+a);return new gx.date.gxdate(c,gx.dateFormat)},getGridDecimalValue:function(b,a,c,d){return this.getDecimalValue(b+"_"+a,c,d)},getGridIntegerValue:function(b,a,c){return this.getIntegerValue(b+"_"+a,c)},getGridControlValue:function(b,a){return this.getControlValue(b+"_"+a)},getControlValue:function(b,a){return this.getControlValue_impl(gx.csv.ctxControlId(b),
a)},getControlValue_impl:function(b,a){try{var c=gx.O&&gx.O.getValidStructFld(b),d;if(c&&c.gxgrid&&!c.gxgrid.isUsercontrol||!c||!c.gxgrid){var f=gx.dom.el(b);if(null!=f&&gx.O){c&&!f.gxtype&&(f.gxtype={type:c.type,len:c.len,dec:c.dec});if("checkbox"==f.type&&c.values&&c.values.length&&1<c.values.length)d=f.checked?c.values[0]:c.values[1];else if("hidden"==f.type||"text"==f.type||"textarea"==f.type||"checkbox"==f.type)d=f.value;else if("radio"==f.type)d=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==
f.nodeName&&0<f.options.length?d=-1!=f.selectedIndex?"screen"==a?f.options[f.selectedIndex].text:f.options[f.selectedIndex].value:"screen"==a?f.options[0].text:f.options[0].value:c&&("date"!=c.type&&"dtime"!=c.type&&"bits"!=c.type&&"audio"!=c.type&&"video"!=c.type)&&(d=f.value),"IMG"==f.nodeName||"INPUT"==f.nodeName&&"image"==f.type)d=f.getAttribute("src");if(void 0!==d)return c&&"boolean"==c.type?gx.lang.gxBoolean(d):d}f=gx.dom.el("span_"+b);if(null!=f){var j=gx.fn.getHidden(b),l=gx.fn.getControlValue_span(f);
return"screen"==a?void 0!=l?l:j:void 0!=j?j:l}f=gx.dom.form()[b];if(null!=f)return this.getControlValueInt(f);f=gx.dom.byId("_"+b);if(null!=f)return f.value;(ControlList=gx.dom.byName(b))&&0==ControlList.length&&(ControlList=gx.dom.byName("_"+b));if(null!=ControlList){for(var o=ControlList.length,c=0;c<o;c++)if(f=ControlList[c],null!=f)return this.getControlValueInt(f);if(f=ControlList[0])return f.value}}if(null==f)return"nohidden"===a?null:gx.fn.getHidden(b)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js",
"getControlValue_impl")}return""},setRadioValue:function(b,a){var b=gx.csv.ctxControlId(b),c=gx.dom.byName(b);if(null!=c)for(var d=c.length,f=0;f<d;f++)if(gx.text.ltrim(c[f].value)==gx.text.ltrim(a)){c[f].checked=!0;break}},getRadioValue:function(b){for(var a=b.length,c=0;c<a;c++)if(b[c].checked)return b[c].value;return""},getControlValueInt:function(b){if(void 0!=b.length&&"SELECT"!=b.tagName&&"undefined"!=typeof b[0]&&"radio"==b[0].type)return this.getRadioValue(b);if("checkbox"==b.type)return b.checked;
if("SPAN"==b.tagName){var a=gx.fn.getHidden(gx.dom.id(b));return void 0!=a?a:gx.fn.getControlValue_span(b)}if("INPUT"==b.tagName&&"text"==b.type&&(a=gx.dom.id(b),gx.O)){var c=gx.O.getValidStructFld(a);if(c&&"undefined"!=typeof c.pic){if("int"==c.type)return this.getIntegerValue(a,-1!=c.pic.indexOf(",")?gx.thousandSeparator:"");if("decimal"==c.type)return this.getDecimalValue(a,-1!=c.pic.indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return b.value},getControlValue_span:function(b){for(;b&&
!b.nodeValue;)b=b.childNodes[0];return b&&b.nodeValue?b.nodeValue:""},getDateTimeArrayValue:function(b){try{var a,c=function(a,b){gx.lang.emptyObject(a)||j.each(a,function(c,d){a[c]=new gx.date.gxdate(d,b)});return""},d=this.getControlValue(b,"nohidden");a=c(d,gx.dateFormat);a||(d=gx.fn.getHidden(gx.csv.ctxControlId(b)),a=c(d,"Y4MD"));return a}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(b){return this.getDateTimeValue(b)},getDateTimeValue:function(b){try{var a=
this.getControlValue(b,"nohidden");if(!gx.lang.emptyObject(a))return new gx.date.gxdate(a,gx.dateFormat);a=gx.fn.getHidden(gx.csv.ctxControlId(b));return new gx.date.gxdate(a,"Y4MD")}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(b,a){var c=0,c=gx.O?gx.O.getValidStructFld(b):null,d=this.getControlValue(b);c&&d&&(d=gx.num.extractValue(c.pic,d));if(gx.lang.isArray(d))return d;d="undefined"!=typeof d?d.toString():"";c=d.length<gx.num.maxNumericPrecision()||"undefined"==
typeof gx.num.dec?gx.num.parseInt(d,10,a):(new gx.num.dec.bigDecimal(gx.text.replaceAll(d,a,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(c)?0:c},getDecimalValue:function(b,a,c){var d=gx.O?gx.O.getValidStructFld(b):null,b=this.getControlValue(b);d&&b&&(b=gx.num.extractValue(d.pic,b));if(gx.lang.isArray(b))return b;a=gx.num.parseFloat(b||"",a,c);return isNaN(a)?0:a},getBlobValue:function(b){var a=gx.dom.el("Object_"+b);if(null!=a){if(a.data&&!gx.text.endsWith(a.data,"about:blank"))return a.data}else if(a=
gx.dom.el("Link_"+b),null!=a)return a.getAttribute("href");return""},getVarControlMap:function(b){for(var a in gx.O.VarControlMap)if("function"!=typeof a){var c=gx.O.VarControlMap[a];if(c.id==b||gx.O.CmpContext+c.id==b)return a}return null},getVarControlMapForVar:function(b){for(var a in gx.O.VarControlMap)if("string"==typeof a&&a==b)return gx.O.VarControlMap[a];return null},v2cMap:function(b){var a=this.getVarControlMapForVar(b);if(null!=a){var c="";"number"==typeof a.grid&&0!=a.grid&&(c="_"+gx.fn.currentGridRowImpl(a.grid));
gx.fn.setHidden(gx.O.CmpContext+a.id+c,gx.O[b])}},c2vMap:function(b){var a=this.getVarControlMapForVar(b);if(null!=a){var c="";"number"==typeof a.grid&&0!=a.grid&&(c="_"+gx.fn.currentGridRowImpl(a.grid));gx.O[b]=gx.fn.getHidden(gx.O.CmpContext+a.id+c)}},depsToVars:function(b){for(var a=0;a<b.length;a++){var c=b[a],d=gx.fn.vStructForVar(c);!gx.lang.emptyObject(d)&&"function"==typeof d.c2v?d.c2v():this.c2vMap(c)}},verticalFormula:function(b,a,c,d,f,j){var l=gx.fn.vStructForVar(b);gx.lang.emptyObject(l)?
this.v2cMap(b):l.v2c();for(var o=gx.fn.currentGridRowImpl(c),m=gx.fn.getGridObj(c),k=0,q=!1,t=m.grid.rows.length,s=0;s<t;s++){var r=m.grid.rows[s],v=r.gxDeleted(),u=r.gxExists(),x=r.gxIsMod();if(!v&&(u||x))gx.fn.setCurrentGridRow(c,r.gxId),j&&0<j.length?this.depsToVars(j):!gx.lang.emptyObject(l)&&"function"==typeof l.c2v?l.c2v():this.c2vMap(b),d.call(gx.O)&&(q=!0,k=f(s,k))}gx.fn.setCurrentGridRow(c,o);j&&0<j.length?this.depsToVars(j):!gx.lang.emptyObject(l)&&"function"==typeof l.c2v?l.c2v():this.c2vMap(b);
q||(k=a);return k},sumFrm:function(b,a,c,d,f,j,l){return gx.fn.verticalFormula(b,a,f,j,function(a,f){var j=gx.num.parseFloat(gx.O[b],c,d);return 0==a?j:f+j},l)},maxFrm:function(b,a,c,d,f,j,l){return gx.fn.verticalFormula(b,a,f,j,function(a,f){var j=gx.num.parseFloat(gx.O[b],c,d);return 0==a?j:j>f?j:f},l)},minFrm:function(b,a,c,d,f,j,l){return gx.fn.verticalFormula(b,a,f,j,function(a,f){var j=gx.num.parseFloat(gx.O[b],c,d);return 0==a?j:j<f?j:f},l)},averageFrm:function(b,a,c,d,f,j,l){return gx.fn.verticalFormula(b,
a,f,j,function(a,f){var j=gx.num.parseFloat(gx.O[b],c,d);return 0==a?j:(f*a+j)/(a+1)},l)},countFrm:function(b,a,c,d,f){return gx.fn.verticalFormula(b,a,c,d,function(a,b){return 0==a?1:b+1},f)},serialRule:function(b,a,c,d,f){f=f||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(c),c))return f[b];gx.lang.emptyObject(f[a])&&(f[a]=f[b]+d,(c=gx.fn.vStructForVar(a))&&c.v2c(),(c=f.VarControlMap[b])&&gx.fn.setControlValue(c.id,f[a]));return Math.max(f[a]||0,f[b]||0)},setReturnParms:function(b,a,c,d){try{var f,
j,l;if(d){j=c.length;for(f=0;f<j;f++)l=gx.fn.vStructForVar(a[f]),d.grid.setCellValue.apply(d.grid,[l,c[f]])}else if(b&&(a&&c)&&(j=a.length,j==c.length)){gx.setGxO(b);d=null;for(f=0;f<j;f++){var o=a[f];if(o){var m=c[f];l=gx.fn.vStructForVar(o);gx.lang.emptyObject(l)&&(l=gx.fn.vStructForHC(o));if(l){var k=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(l.fld));gx.fn.isAccepted(k)&&(d=k,gx.evt.execOnchange(k));l.v2v&&(l.v2v(m),l.v2c());"function"===typeof l.v2bc&&l.v2bc.call(b);b.refreshDependantGrids(l)}else b.setVariable(o,
m)}}d&&gx.fn.setFocus(d)}}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","setReturnParms")}},isOutputParm:function(b){return b&&b.IOType&&("out"==b.IOType||"inout"==b.IOType)?!0:!1},checkPopupFocus:function(b){if(gx.popup.ispopup()){var a=gx.popup.getPopup();if(a&&a.frameDocument&&(b.ownerDocument?b.ownerDocument:b.document).URL!=a.frameWindow.location.href)return a.setFocusFirst(),!1}return!0},persistControlProperty:function(b,a,c){b=gx.fn.screen_CtrlId(gx.csv.ctxControlId(b));gx.usrPtys[b]||(gx.usrPtys[b]=
{});gx.usrPtys[b][a.toLowerCase()]=c},setCtrlProperty:function(b,a,c){if(gx.O){var d=null,d="FORM"==b?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(b));null!=d&&(this.persistControlProperty(b,a,c),this.setCtrlPropertyImpl(d,a,c))}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(b,a,c){var d=gx.fn.screen_CtrlRef(b);if(null!=d){this.setCtrlPropertyImpl(d,a,c);var f=gx.fn.controlGridId(b);if(f&&(d=j(d).parent().closest("TD",
j("[data-gxgridid="+f+"]").get(0)).get(0)))this.persistControlProperty(b,a,c),this.setCtrlPropertyImpl(d,a,c)}},setCtrlPropertyImpl:function(b,a,c){if(null!=b){if(b==document&&("Class"==a||"Backcolor"==a))b=document.body;var d=gx.O.getValidStructFld(b.id);if(!("Enabled"===a||"Visible"===a)||!d||!(0<d.grid&&gx.fn.rowIsRemoved(d.grid,gx.fn.controlRowId(b)))){var f=b,d={control:f,property:a,value:c};gx.fx.obs.notify("gx.control.onbeforepropertychange",[d]);if(!d.cancel){var d=this.getRONode(b.id,!1),
n=[b];d&&n.push(d);n=j(n);switch(a){case "Caption":this.setCtrlCaption(b,c);break;case "Tooltiptext":b.title=c;break;case "Invitemessage":b.placeholder=c;break;case "Visible":if("INPUT"==b.nodeName&&"button"==b.type)this.setButtonVisibility(b,!this.propertyValueFalse(c));else{"INPUT"==b.nodeName&&("checkbox"==b.type?b=b.parentNode:"radio"==b.type&&(d=j(b).parent().closest(".gx-radio-button"),0<d.length&&(b=d[0])),(d=gx.html.multimediaUpload.getContainer(b))&&(b=d));d=this.propertyValueFalse(c);n=
b.gxusrdisabled?b.gxusrdisabled:!1;if(d){var l=gx.dom.el("span_"+b.id);this.setVisible(b,!d);l&&this.setVisible(l,!d)}else(l=this.getRONode(b.id,n))&&this.setVisible(l,n),this.setVisible(b,!n);gx.fn.setDateCtrlProperties(b,!n,!d)}gx.fn.checkAttachedProperty(b.id,a,c);break;case "Enabled":d=this.propertyValueFalse(c);if("hidden"===b.type||"SPAN"===b.tagName&&d)return;if("INPUT"===b.nodeName&&"radio"===b.type){a=gx.dom.byName(b.name);c=a.length;for(f=0;f<c;f++)this.setEnabledProperty(a[f],!d);return}(gx.dom.isEditControl(b)||
"textarea"===b.type||"file"===b.type||"SELECT"===b.tagName)&&"password"!==b.type?(l=this.getRONode(b.id,d),gx.fn.isVisible(b,0)||l&&gx.fn.isVisible(l,0)?(l&&this.setVisible(l,d),this.setEnabledProperty(b,!d),this.setVisible(b,!d),gx.fn.setDateCtrlProperties(b,!d,!0),gx.fn.checkAttachedProperty(b.id,a,!d),gx.fn.checkAttachedProperty(b.id,"Visible",!d)):(this.setEnabledProperty(b,!d),gx.fn.setDateCtrlProperties(b,!d,!1),gx.fn.checkAttachedProperty(b.id,a,!d))):this.setEnabledProperty(b,!d);break;case "Class":n.attr("class",
c);break;case "Columnclass":(d=b.parentNode)&&"TD"==d.tagName&&this.setCtrlClass(d,"gx-attribute "+c);break;case "Link":this.setCtrlLink(this.getRONode(b.id,!1)||b,c);break;case "Linktarget":this.setCtrlLinkTarget(this.getRONode(b.id,!1)||b,c);break;case "Backcolor":if((d=gx.color.html(c))&&void 0==b.gxGridName)b.style.backgroundColor=d.Html;break;case "Background":b.style.backgroundImage="url("+c+")";break;case "Forecolor":(d=gx.color.html(c))&&n.css("color",d.Html);break;case "Fontbold":d=this.propertyValueFalse(c);
n.css("fontWeight",d?"normal":"bold");break;case "Fontitalic":d=this.propertyValueFalse(c);n.css("fontStyle",d?"normal":"italic");break;case "Fontunderline":d=this.propertyValueFalse(c);n.css("textDecoration",d?"none":"underline");break;case "Fontstrikethru":d=this.propertyValueFalse(c);n.css("textDecoration",d?"none":"line-through");break;case "Fontname":n.css("fontFamily",c);break;case "Fontsize":n.css("fontSize",c+"pt");break;case "Filename":this.setBlobFilename(b,c);break;case "Filetype":this.setBlobFiletype(b,
c);break;case "URL":this.setBlobUrl(b,c);break;case "IsBlob":this.setMultimediaType(b,c);break;case "Bitmap":b.src=c;break;case "Multimedia":this.setMultimediaValue(b,c);break;case "Jsonclick":b.jsevent=c;break;case "Source":d=c;n=d.indexOf("?");0<n&&(d=d.substring(0,n));b.src=-1==d.indexOf(":")&&-1==d.indexOf("/")?gx.ajax.objectUrl(c):gx.util.resourceUrl(c,!0);gx.evt.attach(b,"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==b.tagName||gx.dom.isRadio(b)||"SPAN"==b.tagName)if(c=gx.json.evalJSON(c),
"SELECT"==b.tagName)!1!=c.isset&&(gx.fn.loadComboBox(b.id,c.v),gx.fn.setComboBoxValue(b.id,c.s));else if(gx.dom.isRadio(b))!1!=c.isset&&gx.fn.loadRadioButton(b,c.v,c.s);else{var n=b.id.substring(5),l="",o=c.s,d=gx.O.getValidStructFld(n);gx.lang.emptyObject(d)||(l=d.type);o=gx.fn.trimSelectValue(o,l);c.s=o;gx.fn.setControlValue_span_safe(n,gx.fn.selectedDescription(c,l))}break;case "Width":b.width&&(b.width=c);b.style.width=gx.dom.addUnits(c);break;case "Height":b.height&&(b.height=c),b.style.height=
gx.dom.addUnits(c)}if(b=gx.dom.id(b))if(d=gx.O.getValidStructFld(b),b=b+(d&&d.grid&&0<d.grid?"":"_")+a,gx.fn.createPtyCondition(a)||gx.fn.isHidden(b))c=!0==c?"1":!1==c?"0":c,gx.fn.setHidden(b,c);gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:f,property:a,value:c}])}}}},createPtyCondition:function(b){return("Visible"==b||"Enabled"==b)&&gx.O.isTransaction()},setEnabledProperty:function(b,a,c){var d=gx.dom.id(b);if(!gx.lang.gxBoolean(a)||!gx.fn.isAccepted(b,!1)){if(!0==gx.csv.validating&&
a&&null==gx.csv.validActivatedControl&&b!=gx.csv.lastControl){var f=gx.O.getValidStructId(d);f>gx.O.fromValid&&f<=gx.O.toValid&&(gx.csv.validActivatedControl=b)}a?delete gx.disabledControls[d]:gx.util.addOnce(gx.disabledControls,b,d);b.gxusrdisabled=!a;b.disabled=b.gxdisabled?!0==b.gxdisabled?!0:b.gxusrdisabled:b.gxusrdisabled;(void 0===c||c)&&this.setEnabled(b,a)}},setEnabled:function(b,a){j(b).toggleClass("gx-disabled",!gx.lang.booleanValue(a));if(this.disabledAsSpan(b)){var c;try{"checkbox"==b.type&&
(c=b.parentNode),"radio"==b.type&&(c=j(b).parent().closest(".gx-radio-button")[0])}catch(d){}if(gx.lang.booleanValue(a)){if(c&&0==c.className.indexOf("Readonly")&&(c.className=c.className.substring(8)),this.isVisible(b))this.setVisible(b,1),(c=this.getRONode(b.id,!0))&&this.setVisible(c,0)}else if(c&&0>c.className.indexOf("Readonly")&&(c.className="Readonly"+c.className),this.isVisible(b)&&"password"!=b.type&&"image"!=b.type&&"checkbox"!=b.type&&"radio"!==b.type)if(c=this.getRONode(b.id,!0)){this.setVisible(b,
0);this.setVisible(c,1);var f=gx.O.getValidStructFld(b),n=0;!gx.lang.emptyObject(f)&&f.format&&(n=f.format);this.setControlValue_span_safe(c,gx.fn.getControlValue(gx.dom.id(b),"screen"),n,"textarea"==b.type)}}},disabledAsSpan:function(b){return"IMG"!=b.tagName},setVisible:function(b,a){j(b).toggleClass("gx-invisible",!gx.lang.booleanValue(a));b.style.display=0==a?"none":this.displayByType(b.nodeName);var c=gx.O.getValidStructFld(b),d=b.parentNode;a&&c&&c.gxgrid&&!c.gxgrid.grid.gxIsFreestyle&&null!=
d.getAttribute("data-colindex")?c.gxgrid.applyPropEntireColumn(d.getAttribute("data-colindex"),"Visible",a):gx.fn.rowGridId(b)&&(c=j(b).find("table")[0])&&this.setVisible(c,a)},getRONode:function(b,a){if(gx.lang.emptyObject(b))return null;var c=gx.dom.byId(b),d="span_"+b,f=gx.dom.byId(d);if(null!=f)return f;if(!a||null==c)return null;f=document.createElement("SPAN");f.setAttribute("id",d);this.setVisible(f,!1);f.className="Readonly"+c.className;f.appendChild(document.createTextNode(c.value||""));
c.parentNode.insertBefore(f,c);return f},setDateCtrlProperties:function(b,a,c){var d=gx.dom.el(gx.dom.id(b)+"_dp_trigger");d&&j(d).toggle(a);if(d=j(gx.dom.el(gx.dom.id(b)+"_dp_container")))b.Flat&&j(b).hide(),b=j(".calendar",d),d.toggle(a&&c||!a&&c),b&&b.toggle(a&&c)},getGridCtrlProperty:function(b,a,c){try{if(0!=b){var d=this.getGridObj(b);if(d){var f=d.grid.getColumnByHtmlName(a);if(f)return f[c.toLowerCase()]}}else return this.getCtrlProperty(a,c)}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getGridCtrlProperty")}return""},
getCtrlProperty:function(b,a){var c;c=gx.uc.getUserControlObj(gx.uc.userControlContainerId(b));if(null!=c)return c[a];if(c=this.screen_CtrlRef(b))return"Text"===a?this.getControlValue(b,"screen"):"Visible"==a&&gx.fn.getRONode(b)?this.getCtrlProperty_impl(c,a)||this.getCtrlProperty_impl(gx.fn.getRONode(b),a):"Enabled"==a&&gx.fn.getRONode(c.id)?!this.getCtrlProperty_impl(gx.fn.getRONode(c.id),"Visible"):this.getCtrlProperty_impl(c,a)},getCtrlProperty_impl:function(b,a){if(null==b)return"";switch(a){case "Tooltiptext":return b.title;
case "Invitemessage":return b.placeholder;case "Visible":return"none"!=b.style.display;case "Enabled":return 0!=gx.lang.emptyObject(b.disabled);case "Class":return b.className;case "Backcolor":return gx.color.css(b.style.backgroundColor);case "Forecolor":return gx.color.css(b.style.color);case "Width":return gx.dom.dimensions(b).w;case "Height":return gx.dom.dimensions(b).h;case "Caption":return this.getCtrlCaption(b);case "Fontbold":return"bold"==b.style.fontWeight;case "Fontitalic":return"italic"==
b.style.fontStyle;case "Fontunderline":return"underline"==b.style.textDecoration;case "Fontstrikethru":return"line-through"==b.style.textDecoration;case "Fontname":return b.style.fontFamily;case "Filename":return b.value.split(/(\\|\/)/g).pop();case "Fontsize":var c=parseInt(b.style.fontSize);return isNaN(c)?12:c}},displayByType:function(b){switch(b){case "TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(b,
a){try{var c=gx.html.getFieldLabel(b);if(c)gx.fn.setControlValue_fmt(c,a,0,!1);else{switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":var d=b.getAttribute("data-gxformat"),f=gx.O.getValidStructFld(b);null==d&&(d=!gx.lang.emptyObject(f)&&f.format?f.format:0);c=!1;f&&(c=f.ctrltype?f.multiline:!0);gx.fn.setControlValue_fmt(b,a,d,c);return;case "INPUT":"checkbox"!=b.type&&(b.value=a);return}"#document"==b.nodeName&&(b.title=a)}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(b){var a=
gx.html.getFieldLabel(b);if(a)return j(a).text();switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":a=b.getAttribute("data-gxformat");if(null!=a&&"1"==a)return b.innerHTML;for(;null!=b.firstChild&&"#text"!=b.firstChild.nodeName;)b=b.firstChild;return"undefined"!=typeof b.innerText?b.innerText:b.textContent||b.text;case "INPUT":if("checkbox"!=b.type)return b.value;break;default:return""}},propertyValueFalse:function(b){return"string"==typeof b&&(b=b.toLowerCase(),"false"==b||0==gx.num.parseFloat(b))?
!0:0==b},setButtonVisibility:function(b,a){var c=a?"":"none",d=b.parentNode;!gx.lang.emptyObject(d)&&"SPAN"==d.nodeName&&(d.style.display=c,d=d.parentNode,!gx.lang.emptyObject(d)&&"SPAN"==d.nodeName&&(d.style.display=c,d=d.parentNode,!gx.lang.emptyObject(d)&&"SPAN"==d.nodeName&&(d.style.display=c,d=d.parentNode,!gx.lang.emptyObject(d)&&"SPAN"==d.nodeName&&(d.style.display=c))));b.style.display=c},setBlobValue:function(b,a){this.setBlobUrl(gx.dom.el(b)||gx.dom.el("Object_"+b),a)},setBlobFilename:function(b,
a){if(null!=b){var c=gx.O.getValidStructFld(b);c&&gx.fn.setHidden(c.fld+"_Filename",gx.text.trim(a))}},setBlobFiletype:function(b,a){if(null!=b){var c=gx.O.getValidStructFld(b);c&&gx.fn.setHidden(c.fld+"_Filetype",gx.text.trim(a));c=b;"INPUT"==c.nodeName&&"file"==c.type&&(c=gx.dom.el("Object_"+b.id));null!=c&&(a=gx.util.getContentType(a),this.setObjectCtrlType(c,a),gx.fn.setVisible(c,!0))}},resolveResourceUrl:function(b,a){if(""==b)return a?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.ajax.isabsoluteurl(b))if(gx.ajax.isRelativeToHost(b)){if(0!=
b.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+b,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b,!1);return b},setBlobUrl:function(b,a){var c=gx.html.multimediaUpload.getContainer(b);if(c){var d=this.resolveResourceUrl(a,!1);gx.html.multimediaUpload.setPreviewImage(c,d);gx.html.multimediaUpload.setPreviewLink(c,d)}else if(!a.match(/^[a-z]:[\S]*/i)&&null!=b){c=b;d="INPUT"==c.nodeName&&"file"==c.type;if(""===a&&""===a){var f=j(c);f.wrap("<form>").closest("form").get(0).reset();
f.unwrap()}d&&(c=gx.dom.el("Object_"+b.id));null!=c&&(d=gx.util.getContentTypeFromExt(a),c=this.setObjectCtrlType(c,d));null!=c?"IMG"==c.tagName?(a=this.resolveResourceUrl(a,!0),c.src=a):(c.data=a||"about:blank",gx.fn.setVisible(c,!0),this.resizeObject(c),gx.dom.redrawControl(c)):(c=gx.dom.el("Link_"+b.id),null!=c&&(c.style.display=""!=a?"block":"none",c.href=a))}},setGridMultimediaValue:function(b,a,c,d){if(void 0!==a)return this.setMultimediaValue(b+"_"+a,c,d)},setMultimediaValue:function(b,a,c){var d=
gx.dom.el(b);if(d){var f=gx.html.multimediaUpload.getContainer(d),j=this.resolveResourceUrl(a||c||"",!1);if(f){gx.html.multimediaUpload.setPreviewImage(f,j);var l=""==a&&""==c||""!=a;if(!l){var o=gx.dom.el(d.id+"_GXI");o&&(o.value=c)}if((b=gx.dom.el(b))&&""==a)b.value="";this.setMultimediaType(d,l);gx.html.multimediaUpload.setPreviewLink(f,j)}else{if("IMG"==d.tagName||"INPUT"==d.tagName&&"image"==d.type)d.src=j;if((a=d.parentNode)&&"A"==a.tagName&&gx.dom.isMultimediaElement(d))j?a.href=j:a.removeAttribute("href")}}},
setMultimediaType:function(b,a){if(b){var c=gx.html.multimediaUpload.getContainer(b);c&&gx.html.multimediaUpload.setType(c,gx.lang.gxBoolean(a))}},setObjectCtrlType:function(b,a){var c=b;if("IMG"==b.nodeName&&(!a||0==a.indexOf("image/")))return c;if(b.type!=a||"OBJECT"==b.nodeName&&0==a.indexOf("image/"))if(c=0==a.indexOf("image/")?gx.html.nodesFromText('<img id="'+b.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+b.id+'" type="'+a+'">')[0]){try{for(var d in b.attributes)if("id"!=
d&&("type"!=d&&"implementation"!=d)&&b[d])try{c[d]=b[d]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setObjectCtrlType")}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setObjectCtrlType")}if(d=b.parentNode){var l=null,o=d.childNodes.length;for(i=0;i<o;i++)if(d.childNodes[i]==b){i<o-1&&(l=d.childNodes[i+1]);break}gx.dom.removeControlSafe(b);null!=l?d.insertBefore(c,l):d.appendChild(c)}}return c},resizeObject:function(b){var a=gx.lang.emptyObject;!a(b.data)&&"about:blank"!=b.data&&(a(b.width)&&a(b.height)&&a(b.style.width)&&
a(b.style.height))&&(b.style.width="200px",b.style.height="200px")},recoverLostCtrlOnGridRefresh:function(b){if(null==b.form){var a=gx.dom.id(b);void 0!=gx.O.getValidStructId(a)&&"checkbox"==b.type&&(a=b.checked,b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=a)}return b},checkboxClick:function(b,a,c,d){gx.fx.obs.notify("gx.validation");if(gx.evt.fixWebKitOnFocus())a.onfocus();a=this.recoverLostCtrlOnGridRefresh(a);a.value=a.checked?c:d;(b=gx.fn.validStruct(b))&&"function"==typeof b.c2v&&b.c2v();"function"==
typeof b.v2bc&&b.v2bc.call(gx.O)},setCtrlClass:function(b,a){null!=b&&(b.className=a)},setCtrlLink:function(b,a){if(null!=b)if(""==a)this.unsetCtrlLink(b);else{var c=b.firstChild;if(c&&"A"==c.tagName)c.href=a;else{var d=b.parentNode;if("A"==d.tagName)d.href=a;else{var f=document.createElement("A");f.href=a;c&&"#text"==c.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(f,!0),f.innerHTML=c.nodeValue,b.replaceChild(f,c)):(d.replaceChild(f,b),f.appendChild(b));(c=j(b).attr("data-gx-link-target"))&&j(f).attr("target",
c)}}}},unsetCtrlLink:function(b){if(null!=b&&(b=b.parentNode,"A"==b.tagName)){var a=b.firstChild;ParentTag2=b.parentNode;if(null!=ParentTag2){for(;null!=a;)ParentTag2.insertBefore(a,b),a=b.firstChild;gx.dom.removeControlSafe(b)}}},setCtrlLinkTarget:function(b,a){if(null!=b){var c=j(b);c.is("a")||(c=c.children());c.is("a")&&c.attr("target",a);j(b).attr("data-gx-link-target",a)}},isVisible:function(b,a){try{for(var c;b&&("undefined"==typeof a||0<=a);){if((c=gx.dom.getComputedStyle(b))&&("hidden"==c.visibility||
"none"==c.display))return!1;b=b.parentNode;"undefined"!=typeof a&&a--}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(b,a){var c=this.gridObjByLvl(b),d=null;if(c)return c=gx.O.getGridById(c.gridId,a)||c,(d=c.grid.getRowByGxId(a))?d.gxIsMod():!0;c=!1;try{c=1==this.getControlValue("nIsMod_"+b+"_"+a)}catch(f){c=!1}return c},gridObjByLvl:function(b){for(var a=gx.O.Grids,c=a.length,d=0;d<c;d++)if(a[d].gridLvl==b)return a[d];return null},forceEnableControls:function(b){for(var a in gx.disabledControls){a=
this.getControlRef_list(a);for(var c=a.length,d=0;d<c;d++)try{"button"!=a[d].type&&"submit"!=a[d].type&&(a[d].disabled=b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","forceEnableControls")}}},alert:function(b,a){try{var c=gx.util.balloon.getNew(b.id);c.setError(a);c.show();gx.csv.invalidForcedCtrl=b}catch(d){alert(a)}},getGridRowMode:function(b,a){var c=this.currentGridRow(a),d=this.rowIsRemoved(a,c),c=this.getControlValue("nRcdExists_"+b+"_"+c);return"1"==d?"DLT":"0"==c?"INS":"UPD"},rowIsRemoved:function(b,
a){var c=this.getGridObj(b);return null!=c&&(c=c.grid.getRowByGxId(a))?c.gxDeleted():!1},getGridObj:function(b){return gx.O.getGridById(b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","changeCmpContext")}},initOld:function(b){void 0==gx.oldValues[b.id]&&(gx.oldValues[b.id]=b.value)},setFocusOnError:function(b){var a=gx.fn.controlGridId(b),b=gx.csv.ctxControlId(b),c=null,c=0==a?gx.dom.el(b):gx.fn.getControlGridRef(b,a);null!=c&&(gx.O.AnyError=1,gx.csv.anyError=
!0,c.setAttribute("data-gxvalid","0"),gx.csv.stopOnError&&gx.fn.setFocus(c))},usrSetFocus:function(b,a){void 0===a&&(a=!0);b=gx.csv.ctxControlId(b);if(!0==gx.csv.validating)a?gx.fx.obs.addObserver("gx.onaftervalidate",this,gx.fn.usrSetFocus.closure(gx.fn,[b,!1]),{single:!0}):gx.usrFocusControl=b;else{var c=gx.dom.el(b);null!=c&&gx.fn.setFocus(c)}},setFocus:function(b,a){if(b){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():
window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(b.id)&&(b=gx.dom.byId(b.id),!b))return;gx.fn.setFocusSafe(b,function(b){gx.fn.setSelection(b);b.forcedFocus=!0;a&&a()})}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(b,a){if(b){var c=function(a,b){try{d&&b&&gx.fx.obs.addObserver("gx.onafterfocus",this,b.closure(this,[a]),{single:!0}),
a.focus()}catch(c){}!d&&b&&b(a)},d=gx.csv.setFocusOnload;d||!gx.util.browser.isIE()?gx.lang.doCallTimeout(c,this,[b,a],d?500:0):c(b,a)}},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(b){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},setFocusOnload:function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var b=null,b=gx.pO.getUserFocus();if(!gx.lang.emptyObject(b)){if("notset"==b)return;var a=gx.pO.getUserControl(gx.uc.userControlContainerId(b));
if(gx.lang.emptyObject(a))gx.csv.userFocus=gx.fn.getControlRef(b);else{a.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=gx.csv.userFocus;gx.fn.isAccepted(b)||(b=gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?gx.csv.lastActiveControl:gx.fn.firstAcceptedControl(gx.popup.ispopup()));try{b?(a=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=b,gx.csv.setFocusOnload=!0,gx.fn.isAccepted(b)?gx.fn.setFocus(b,a):(gx.popup.setFocus(),a())):gx.popup.setFocus()}catch(c){gx.dbg.logEx(c,
"gxfrmutl.js","setFocusOnload")}}}},setSelection:function(b){if(b&&gx.fn.isVisible(b))try{if(gx.csv.lastControl=b,(gx.dom.isEditControl(b)||"file"==b.type)&&b.select)b.select();else if("TEXTAREA"==b.nodeName||"SELECT"==b.nodeName)b.focus(),b.select&&b.select()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","setSelection")}},isAccepted:function(b,a,c){var a=void 0==a||a,d=!0,c=c||gx.O,f=["FIELDSET"];null!=b&&void 0!=b.type&&!gx.util.inArray(b.nodeName,f)&&"hidden"!=b.type&&gx.fn.isVisible(b)&&!1==b.disabled&&
(null==b.readOnly||!1==b.readOnly)?a&&(d=gx.dom.id(b),d=c.getValidStructFld(d),b=c.getVariable("Gx_mode"),0<gx.csv.lastGrid&&c.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),d=!gx.lang.emptyObject(d)&&d.nac?!1==d.nac.call(c):!0,c.setVariable("Gx_mode",b)):d=!1;return d},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(b){var a=gx.csv.lastControl,c=gx.fn.getControlIndex(a),d=c,f=this.controlGridId(a.id||
a.name),j=!1;b&&gx.dom.hasClass(a,"gx_newrow")&&(d=a.gxControlIdx,j=!0);if(-1==d)return!0;a=null;for(a=gx.fn.searchFocus(++d,!0);;a=gx.fn.searchFocus(++d,!0))if(null==a||d==gx.dom.form().elements.length)d=-1;else{if(b)break;if(gx.evt.isEnterEvtCtrl(a))break;if("INPUT"==a.nodeName&&"submit"!=a.type&&"button"!=a.type&&"image"!=a.type)break}if(!j&&(f&&gx.O.isTransaction())&&this.controlGridId(a.id||a.name)!=f)b=gx.O.getGridById(f),a=gx.dom.el(b.containerName+"_NewRow").parentNode,a.gxControlIdx=c;gx.fn.setFocus(a)},
getControlIndex:function(b){var a=gx.dom.form().elements.length-1;return el=this.controlIndex(b,0,a)},controlIndex:function(b,a,c){if(document.all){var d=gx.dom.form(),f=d.elements[a].sourceIndex,j=d.elements[c].sourceIndex,l=parseInt(a+(c-a)/2)+1,d=d.elements[l].sourceIndex;if(a==c&&b.sourceIndex==f&&b.sourceIndex==j||b.sourceIndex==f)return a;if(b.sourceIndex==j)return c;if(b.sourceIndex==d)return l;if(b.sourceIndex>d&&b.sourceIndex<j)return this.controlIndex(b,l+1,c-1);if(b.sourceIndex>f&&b.sourceIndex<
d)return this.controlIndex(b,a+1,l-1)}else return b.gxIndex},searchFocus:function(b,a){return a?this.searchFocusFwd(b):this.searchFocusBack(b)},searchFocusBack:function(b){for(var a=gx.dom.form();0<=b;b--)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];return null},searchFocusFwd:function(b){for(var a=gx.dom.form(),c=a.elements.length;b<c;b++)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];return null},rowGridId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("data-gxgridid");
return null!=a?a:gx.fn.rowGridId(b.parentNode)},controlRowId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("data-gxrow");return null!=a?a:gx.fn.controlRowId(b.parentNode)},controlGridId:function(b){try{var a,c,d=gx.O.Grids;if(d){c=0;for(len=d.length;c<len;c++)if(d[c].grid.columnsHtmlName[b])return d[c].gridId}a=gx.fn.controlIds();c=0;for(len=a.length;c<len;c++){var f=gx.fn.validStruct(a[c]);if(gx.O.isSameField(f,b))return f.grid}var j=gx.O.getComponentData(b);if(j){var l=gx.fn.gridObjByLvl(j.lvl);
if(l)return l.gridId}}catch(o){}return 0},oldGridId:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&d.gxold==b)return d.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(b,a){var c="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,b)&&(c=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,b)&&(c=gx.O.Gx_mode);return"no_mode"==c?!0:"UPD"==
c||null==gx.csv.validatingGrid?(window[b]=a,!0):!1},isLvlParmOld:function(b,a){try{var c=gx.O.getOldLvl(a);if(0<=c){if(0<b){var d=gx.fn.gridLvl(b);return c<d}return!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&void 0!=d.lvl&&d.grid==b)return d.lvl}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(b){try{var a=gx.fn.controlIds(),c=
a.length;for(i=0;i<c;i++){var d=gx.fn.validStruct(a[i]);if(void 0!=d&&d.lvl==b)return d.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(b){try{var a=gx.fn.controlIds();for(i=0;i<a.length;i++){var c=gx.fn.validStruct(a[i]);if(void 0!=c&&c.fld==b)return a[i]}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(b,a){try{var c=null;a&&(c=[]);var d=gx.fn.controlIds(),f=d.length;for(i=0;i<f;i++){var j=gx.fn.validStruct(d[i]);if(void 0!=j&&
b(j))if(j.id=d[i],a)c.push(j);else return j}}catch(l){gx.dbg.logEx(l,"gxfrmutl.js","getVStruct")}return c},vStructForOld:function(b){return gx.fn.getVStruct(function(a){return a.gxold==b})},vStructForVar:function(b){return gx.fn.getVStruct(function(a){return a.gxvar==b})},vStructForVarWId:function(b,a){var c=gx.fn.getVStruct(function(a){return a.gxvar==b},!0),d=c[0],f=c.length;if(1<f)for(var j=0;j<f&&!(d=c[j],d.id==a);j++);return d},vStructForHC:function(b){return gx.fn.getVStruct(function(a){return a.hc==
b})},firstCtrlAfterGrid:function(b,a){for(var c=gx.fn.lastCtrlId(),d=b;d<c;d++){var f=gx.fn.validStruct(d);if(void 0!=f&&f.grid!=a)return d}return c},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(b){try{return gx.oldKeyValues[b]}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(b,a){try{return gx.oldKeyValues[b+gx.fn.currentGridRow(a)]}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","oldGridKey")}return""},setKey:function(b,a){null!=b&&(gx.oldKeyValues[b]=a)},unsetKey:function(b){null!=
b&&(gx.oldKeyValues[b]=void 0)},setGridKey:function(b,a,c){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=c)},unsetGridKey:function(b,a){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=void 0)},removeGridRow:function(b,a){var c=gx.fn.rowIsRemoved(a,b);try{var d=gx.fn.controlIds(),f=d.length;for(i=0;i<f;i++){var j=gx.fn.validStruct(d[i]);if(void 0!=j&&j.grid==a){var l=gx.dom.el(j.fld+"_"+b);null!=l&&(l.gxdisabled=c,l.disabled=c)}}}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(a,
b)},controlIds:function(){return gx.O.getControlIds()},validStruct:function(b,a){a=a||gx.O;return a.getValidStruct(b)},lastCtrlId:function(b){if(!0===b)for(var b=this.controlIds(),a=b.length-1;0<=a;a--){if(this.validStruct(b[a]).v2v)return b[a]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(b,a){return 0==a&&b==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(b){try{for(var a=gx.fn.vStructsArray(),c=gx.fn.controlIds(),d=c.length,
f=0;f<d;f++){var j=a[c[f]];if(null!=j){var l=gx.fn.getControlGridRef(j.fld,j.grid);if(l&&gx.fn.isAccepted(l)&&(b||"submit"!=l.type&&"image"!=l.type&&"button"!=l.type&&"fieldset"!=l.type))return l}}}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var b=gx.dom.el(gx.csv.cmpCtx+"BTN_DELETE");null!=b&&gx.fn.setCtrlPropertyImpl(b,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(b){!0!=gx.csv.validating&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&
(b&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(b){var a=function(a){try{for(var b=a.length,d=0;d<b;d++)gx.fn.setCtrlPropertyImpl(a[d],"Enabled",0)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","disableCtrl")}},b=gx.fn.getControlRef_list(b);if(null!=b)if("complete"==document.gxReadyState)a(b);else gx.evt.on_ready(this,
a.closure(this,[b]))},refreshGridRowBC:function(b,a){try{var c=gx.O.getGridBC(b);if(c){var d=gx.pO.getGridForColl(c.gxvar);if(gx.csv.validatingGrid&&d&&gx.csv.validatingGrid.gridId==d.gridId)return gx.fn.setGridHidden(b,a),a=a[parseInt(gx.fn.currentGridRow(d.gridId))-1],gx.O.bcToScreen(c,a),!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(b,a){return this.refreshFormBC(b,a)||this.refreshGridRowBC(b,a)},refreshFormBC:function(b,a){try{var c=gx.O.getFormBC(b)||
gx.O.getFormBCForVar(b);if(c)return gx.setVar(b,a),gx.fn.setGridHidden(b,a),gx.O.bcToScreen(c,a),!0}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(b){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[b]},GX_HASH_PREFIX:"gxhash_",getHash:function(b,a,c){return gx.fn.getHidden(b+gx.fn.GX_HASH_PREFIX+a+(c?"_"+c:""))||gx.fn.getHidden(b+gx.fn.GX_HASH_PREFIX+a)},getHidden:function(b){gx.http.viewStateLoaded||gx.http.loadState();
return gx.http.viewState[b]},setHidden:function(b,a){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[b]=a},setGridHidden:function(b,a){var c=b,d=gx.fn.oldGridId(b);0<d&&(c=b+"_"+gx.fn.currentGridRowImpl(d));gx.fn.setHidden(c,a)},deleteHidden:function(b){gx.http.viewState&&delete gx.http.viewState[b]},setJsonHiddens:function(b,a){var a=void 0===a||a,c;for(c in b)a?gx.fn.setGridHidden(c,b[c]):gx.fn.setHidden(c,b[c])},filterHiddens:function(b,a){var c={},d;for(d in a)d&&0==d.search(b)&&
(c[d]=a[d]);return c},autoRefreshingControl:function(b,a){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==a+b},setJsonValues:function(b){if(!b)return[];for(var a=gx.O,c=b.length,d=[],f,j=0;j<c;j++){var l=b[j],o=l.CmpContext,m=gx.lang.booleanValue(l.IsMasterPage);gx.setGxO(o,m);if(!gx.lang.emptyObject(gx.O))for(var k in l)if(!("CmpContext"==k||"IsMasterPage"==k)&&!("object"==typeof l[k]&&gx.fn.refreshBC(k,l[k]))&&"function"!=typeof l[k]){var q=gx.fn.vStructForVar(k)||
gx.O.getValidStructFld(k);q?q.v2v&&!gx.fn.autoRefreshingControl(q.fld,o)&&(f=void 0,0!=q.grid&&(f=gx.fn.controlRowId(gx.dom.el(k))),q.v2v(l[k]),q.v2c(f)):"GX_FocusControl"==k?a.CmpContext==o&&a.IsMasterPage==m&&(gx.usrFocusControl=l[k]):(f=gx.fn.getVarControlMap(k),gx.lang.emptyObject(f)?gx.setVar(k,l[k]):gx.setVar(f,l[k]),gx.fn.setGridHidden(k,l[k]),gx.O.UCBindings[k]&&d.concat(gx.O.UCBindings[k].uc))}}gx.setGxO(a);return d},getPropertyControlRef:function(b,a){var c=gx.fn.getControlRef(b,!0),c=null==
c?gx.dom.el("Object_"+b):c;null==c&&(c=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(b)));null==c&&a&&(c=gx.dom.el(b+"_"+a));return c},setJsonProperties:function(b,a){if(!b)return[];for(var c=gx.O,d=b.length,f=[],j=0;j<d;j++){var l=b[j],o=l.CmpContext,m=gx.lang.booleanValue(l.IsMasterPage),o=gx.setGxO(o,m);if(!gx.lang.emptyObject(gx.O))for(var k in l)if(!("CmpContext"===k||"IsMasterPage"===k||""===k))if(m=l[k],"function"!=typeof m){var q=gx.fn.getPropertyControlRef(k,a),t=o.getGridColumn(k,a);if(null==
q&&gx.uc.isUserControl(k))gx.uc.setProperties(k,m),f.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(k)));else if(!(null==q&&null==t))for(var s in m){var r="object"===typeof m[s];t&&!r&&(t[s.toLowerCase()]=m[s]);if(q)if(q.parentElement||(q=gx.fn.getPropertyControlRef(k,a)),r)for(var v in m[s])gx.fn.setCtrlPropertyImpl(q,v,m[s][v]);else gx.fn.setCtrlPropertyImpl(q,s,m[s])}}}gx.setGxO(c);return f},loadJsonGrids:function(b,a){var c=[];if(b)for(var d=b.length,f,j=0;j<d;j++)try{var l=b[j];if(void 0!=
l.Count){var o=l.CmpContext,m=l.GridName,k=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(k)||k.gxComponentContext!=o&&k.gridName!=m||!gx.lang.emptyObject(k.boundedCollType))if(f=gx.fn.gridObj(o,m,"true"==l.InMasterPage?!0:!1))f.isUsercontrol&&c.push(f.grid),a?f.loadGrid(l,a):f.updatePropsHidden(l)}}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","loadJsonGrids")}},getErrorViewerCtrls:function(){var b=gx.dom.byName("gxErrorViewer");if(0==b.length)for(var b=[],a=gx.dom.byTag("span"),c=a.length,
d=0;d<c;d++)"gxErrorViewer"==a[d].name&&b.push(a[d]);return b},setErrorViewer:function(b){gx.O.AnyError=0;if(b)try{gx.fx.obs.notify("gx.onmessages",[b]);var a=gx.dom.byClass("gx_ev","span"),c=a.length,d;for(d in b){var f,j=b[d];gx.lang.isArray(j)||(f=j.fields,j=j.msgs);var l=[];if(f)for(var o=0,m=f.length;o<m;o++){var k=gx.fn.vStructForVar(f[o].replace(/^gx\.O\./,""));k&&l.push(k.fld)}"MAIN"==d&&(d="");if("undefined"!=typeof j){for(o=0;o<c;o++){var q=a[o];if(q&&q.id==d+"gxErrorViewer"){var t=gx.csv.setFocusOnload?
q.innerHTML:"";break}}var s={},r;for(r in j){var v=j[r];v&&1==v.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(v.text)&&"function"!=typeof v)if(""!=v.att&&gx.fn.isVisible(gx.fn.screen_CtrlRef(v.att))){var u=s[v.att];u||(u=gx.util.balloon.getNew(v.att,void 0,l),s[v.att]=u);1==v.type?u.setError(v.text):u.setMessage(v.text)}else t+='<div class="'+(1==v.type?"gx-error-message":"gx-warning-message")+'">'+gx.html.encode(v.text)+"</div>"}var l=!1,x;for(x in s)if(u=s[x],!1==u.show()&&!l&&(l=!0,gx.fn.setFocusOnError(x)),
gx.csv.oneAtAtime)break;for(o=0;o<c;o++)if((q=a[o])&&q.id==d+"gxErrorViewer"&&q.innerHTML!=t)gx.dom.shouldPurge()&&gx.dom.purge(q,!0),q.innerHTML=t,""!=t&&gx.fx.dom.highlight(q,[255,255,165],2500).play()}}}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(b){var a=f.exec(b);return a?a[1]+a[2]:b},clearCompontHiddens:function(b){for(var a in b)if("function"!=typeof b[a])try{var c=gx.fn.cmpContextFromCtrl(a);gx.O.deleteComponentHiddens(c)}catch(d){except=!0,gx.dbg.logEx(d,
"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(b,a,c,f,j){try{var n=[],l=!1;gx.gen.isDotNet();var o=[],m;for(m in b)if(gx.pO.getWebComponent(m)||o.push(m),"function"!=typeof b[m])try{var k=b[m];if(k){var q=gx.dom.el(m);!q&&a&&(q=gx.dom.el(a[m]));if(!gx.lang.emptyObject(q)){gx.html.setInnerHtml(q,k,!1,j);var t=gx.fn.cmpContextFromCtrl(m),s=d(gx.fn.getHidden(t+"_CMPPGM"));n.push({type:t,name:s,html:k,container:q})}}}catch(r){l=!0,gx.dbg.logEx(r,"gxfrmutl.js","setJsonComponents")}}catch(v){l=
!0,gx.dbg.logEx(v,"gxfrmutl.js","setJsonComponents")}if((0==n.length||l)&&"function"==typeof f)f(o);else{var u=null,x=function(){0<n.length?(u=n.shift(),gx.fn.createComponentAsync(u,c,x)):"function"==typeof f&&f(o)},u=n.shift();gx.fn.createComponentAsync(u,c,x)}},createComponentAsync:function(b,a,c){function d(){"function"==typeof c&&(c(),gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse]))}var f=b.type,j=b.name,l=b.html,o=b.container;try{var m=gx.fn.filterHiddens(RegExp("^"+f),a);gx.cache.codeLoaded(f+
j)?(gx.fn.createComponentObj(j,f,o),gx.fn.setJsonHiddens(m),d()):(gx.cache.addInlineCode(f+j),gx.html.processCode(l,!1,function(a,b,c){gx.fn.createComponentObj(a,b,o);gx.fn.setJsonHiddens(c);d()},[j,f,m],j))}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","createComponentAsync"),d()}},createComponentObj:function(b,a,c){b=gx.createComponent(b,a,c);null!=b&&gx.addComponent(b)},cleanAttachedCtrls:function(){gx.attachedControls=[]},getAttachedCtrl:function(b){for(var a=gx.attachedControls.length,c=0;c<a;c++){var d=
gx.attachedControls[c];if(d.id==b)return d}return null},attachCtrl:function(b,a){null==gx.fn.getAttachedCtrl(b)&&gx.attachedControls.push({id:b,info:a})},doAttachs:function(b){for(var a=gx.fn.attachedControls(),c=a.length,d=gx.O,b=b&&b.length?j.map(b,gx.fn.cmpContextFromCtrl):void 0,f=0;f<c;f++){var n=a[f];if(!b||0<=j.inArray(n.info.wc,b))if(gx.setGxO(n.info.wc,n.info.mp),n.info.isPrompt&&gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(n.info.wc+n.info.id),"Visible",
!1);else for(var l=n.info.controls,o=l.length,m=0;m<o;m++){gx.fn.addAttach(l[m],n);var k=gx.fn.validStruct(l[m]);gx.fn.checkAttachedPropertyVS(k,"Visible",!1);gx.fn.checkAttachedPropertyVS(k,"Enabled",!1)}}gx.setGxO(d)},addAttach:function(b,a){var c=gx.fn.validStruct(b);void 0==c.attachedCtrls&&(c.attachedCtrls=[]);c.attachedCtrls.push(a)},checkAttachedProperty:function(b,a,c){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(b),a,c)},checkAttachedPropertyVS:function(b,a,c){if(void 0!=b&&(b=b.attachedCtrls,
void 0!=b))for(var d=b.length,f=0;f<d;f++)gx.fn.checkAttachedControlProperty(b[f],a,c)},checkAttachedControlProperty:function(b,a,c){for(var d=b.info.id,b=b.info,f=!0,j=b.controls,b=b.wc,l=j.length,o=0;o<l;o++){var m=gx.fn.getCtrlProperty(b+gx.fn.validStruct(j[o]).fld,a),f=c?m==c:f&&m==c;if(c&&f)break}f&&gx.fn.setCtrlPropertyImpl(gx.dom.el(b+d),a,c)},changeControlOpacity:function(b,a,c,d){var f=Math.round(d),j="",j="string"==typeof b?b:b.id;a>c?(gx.fn.setOpacity(a,j),setTimeout(function(){gx.fn.changeControlOpacity(b,
a-10,c,d)},f)):a<c?(gx.fn.setOpacity(a,j),setTimeout(function(){gx.fn.changeControlOpacity(b,a+10,c,d)},f)):gx.fn.setOpacity(c,j)},setOpacity:function(b,a){var c=a;"string"==typeof a&&(c="body"==a?document.body:gx.dom.el(a));if(null!=c){var c=c.style,d="reset"==b?"":b/100;c.opacity=d;c.MozOpacity=d;c.filter="alpha(opacity="+("reset"==b?100:b)+")"}},fadeControl:function(b,a,c){"in"==a?gx.fn.changeControlOpacity(b,0,100,c):gx.fn.changeControlOpacity(b,100,0,c)},fadeIn:function(b,a){gx.fn.fadeControl(b,
"in",a)},statusMsg:function(b){window.status=b},objectOnload:function(b){var a=j(document.body),c="true"===a.attr("data-HasEnter"),d="true"===a.attr("data-Skiponenter");j(document).keydown(function(){gx.evt.onkeypress(null,c,d)});j(document).keypress(function(a){gx.evt.onkeypress(a,c,d)});j(document).keyup(function(a){gx.evt.onkeyup(a)});null!=gx.pO&&(gx.pO.onload(b),gx.setGxO(gx.pO))},objectOnUnload:function(b){if(null!=gx.pO)gx.pO.onunload(b)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},
objectPostback:function(b,a){null!=gx.pO&&(gx.pO.postbackLoad(b,a),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(b){return gx.fn.gridObj(gx.O.CmpContext,b,gx.O.IsMasterPage)},gridObj:function(b,a,c){return(b=gx.getObj(b,c))?b.getGrid(a):null},installComponents:function(b,a){var c=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=c){gx.gen.isDotNet();for(var f in c)if(b||!gx.pO.getWebComponent(f)){var j=d(c[f].toLowerCase()),j=gx.createComponent(j,f);null!=j&&(gx.addComponent(j,
a),setTimeout(function(a){this.addComponentRemoteFiles(a)}.closure(this,[j]),1))}}},addComponentRemoteFiles:function(b){if(b=b.getContainer())gx.html.processCode(b.innerHTML,!0),gx.dom.fitToParent(b)},datePickerFormat:function(b,a,c){var d=gx.dateFormat,f=d.substr(0,1),j=d.substr(1,1),d=d.substr(2,1),f=gx.fn.datePickerDateFormat(f,b),j=gx.fn.datePickerDateFormat(j,b),b=gx.fn.datePickerDateFormat(d,b),d=gx.fn.datePickerTimeFormat(a);return 0<c&&0<a?f+"/"+j+"/"+b+" "+d:0<c?f+"/"+j+"/"+b:d},datePickerDateFormat:function(b,
a){return"Y"==b&&"99/99/9999"==a.substr(0,10)?"%Y":"Y"==b?"%y":"M"==b?"%m":"D"==b?"%d":""},datePickerTimeFormat:function(b){var a=gx.timeFormat,c;12==a?(a="%I",c=" %p"):(a=24==a?"%H":"",c="");if(2==b)b="";else if(5==b)b=":%M";else if(8==b)b=":%M:%S";else return"";return a+b+c},installDatePicker:function(b,a,c,d,f,j){gx.html.onTypeAvailable("Calendar",gx.fn.installDatePickerIfReady,[b,a,c,d,f,j])},installDatePickerIfReady:function(b,a,c,d,f,n){var l=gx.dom.el(b);if(gx.lang.emptyObject(l)||"SELECT"!=
l.nodeName)if(0==a){var a=b+"_dp_trigger",o=gx.dom.el(a),m=gx.dom.getComputedStyle(o),k=gx.dom.getComputedStyle(l);if(o&&"none"!=k.display&&"hidden"!=k.visibility&&("none"==m.display||"hidden"==m.visibility)||!o)a=b;l=j(l).parent().closest(".dp_container")[0];Calendar.setup({inputField:b,parentNode:l,showsTime:c,weekNumbers:d,mondayFirst:f,ifFormat:n,button:a,onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:!0,displayRight:!1})}else gx.lang.emptyObject(l)||(l.style.display="none"),Calendar.setup({inputField:b,
showsTime:c,weekNumbers:d,mondayFirst:f,ifFormat:n,flat:b+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0})},datePickerChanged:function(b,a,c){if(b&&b.dateClicked){c||(c=b.params.inputField);var a=gx.O,d=null,f=gx.fn.controlIds(),j=f.length;for(i=0;i<j;i++){var d=gx.fn.validStruct(f[i]),l=0!=d.grid?"_"+gx.fn.currentGridRow(d.grid):"";if(c.id==a.CmpContext+d.fld+l)break}null!=d&&void 0!=d.dp&&(f=b.dateIsEmpty?gx.date.nulldate_toc(d.len,d.dec):b.date.print(gx.fn.datePickerFormat(d.dp.pic,
d.dp.dec,d.len)),f!=c.value&&(c.setAttribute("data-gxvalid","0"),c.value=f,c.onchange(),b.callCloseHandler(),0<d.grid&&gx.fn.getGridObj(d.grid).setRowModified(gx.fn.currentGridRow(d.grid)),a.refreshDependantGrids(d)))}},toArray:function(b){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var a=[],c=0,d=b.length;c<d;c++)a[c]=b[c];return a}return Array.prototype.slice.call(b)},evalCtxScope:function(b,a){var c=gx.O;gx.setGxO(b);var d=eval(a);gx.setGxO(c);return d}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(j,f){this.map[j]=f};this.remove=function(j){delete this.map[j]};this.get=function(j){return null==j?null:this.map[j]};this.first=function(){return this.get(this.nextKey())};this.next=function(j){return this.get(this.nextKey(j))};this.nextKey=function(j){for(i in this.map){if(!j)return i;j==i&&(j=null)}return null}},Command:function(j,f,d){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){f.apply(j,
d)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(j,f,d,b){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(c){gx.dbg.logEx(c,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof b=="function")try{b.call(j,retVal)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(j,f,d);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var j=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(j)?null:j;null!=this.key&&this.loadSecToken()},loadSecToken:function(){var j=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(j)?null:j},encrypt:function(j,f){try{if(f=null==f?this.key:f,null!=f){var d=this.rijndael,f=d.hexToByteArray(f),b=d.rijndaelEncrypt(j,f);return d.byteArrayToHex(b)}}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","encrypt")}return j},decrypt:function(j,f){try{if(f=null==f?this.key:f,null!=f){var d=this.rijndael,f=d.hexToByteArray(f),b=d.hexToByteArray(j),a=d.rijndaelDecrypt(b,f);return d.byteArrayToString(a)}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","decrypt")}return j},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(j,f){return j<<f|j>>>32-f},AddUnsigned:function(j,f){var d,b,a,c,g;a=j&2147483648;c=f&2147483648;d=j&1073741824;b=f&1073741824;g=(j&1073741823)+(f&1073741823);return d&b?g^2147483648^a^c:d|b?g&1073741824?g^3221225472^a^c:g^1073741824^a^c:g^a^c},F:function(j,f,d){return j&f|~j&d},G:function(j,f,d){return j&d|f&~d},H:function(j,f,d){return j^f^d},I:function(j,f,d){return f^(j|~d)},FF:function(j,f,d,b,a,c,g){j=gx.MD5.AddUnsigned(j,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(f,
d,b),a),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(j,c),f)},GG:function(j,f,d,b,a,c,g){j=gx.MD5.AddUnsigned(j,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(f,d,b),a),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(j,c),f)},HH:function(j,f,d,b,a,c,g){j=gx.MD5.AddUnsigned(j,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(f,d,b),a),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(j,c),f)},II:function(j,f,d,b,a,c,g){j=gx.MD5.AddUnsigned(j,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(f,d,b),a),g));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(j,c),f)},ConvertToWordArray:function(j){var f,d=j.length;f=d+8;for(var b=16*((f-f%64)/64+1),a=Array(b-1),c=0,g=0;g<d;)f=(g-g%4)/4,c=8*(g%4),a[f]|=j.charCodeAt(g)<<c,g++;f=(g-g%4)/4;a[f]|=128<<8*(g%4);a[b-2]=d<<3;a[b-1]=d>>>29;return a},WordToHex:function(j){var f="",d="",b;for(b=0;3>=b;b++)d=j>>>8*b&255,d="0"+d.toString(16),f+=d.substr(d.length-2,2);return f},Utf8Encode:function(j){for(var j=j.replace(/\r\n/g,"\n"),f="",d=0;d<j.length;d++){var b=j.charCodeAt(d);
128>b?f+=String.fromCharCode(b):(127<b&&2048>b?f+=String.fromCharCode(b>>6|192):(f+=String.fromCharCode(b>>12|224),f+=String.fromCharCode(b>>6&63|128)),f+=String.fromCharCode(b&63|128))}return f},getHsh:function(j){var f=[],d,b,a,c,g,p,n,l,j=gx.MD5.Utf8Encode(j),f=gx.MD5.ConvertToWordArray(j);g=1732584193;p=4023233417;n=2562383102;l=271733878;for(j=0;j<f.length;j+=16)d=g,b=p,a=n,c=l,g=gx.MD5.FF(g,p,n,l,f[j+0],7,3614090360),l=gx.MD5.FF(l,g,p,n,f[j+1],12,3905402710),n=gx.MD5.FF(n,l,g,p,f[j+2],17,606105819),
p=gx.MD5.FF(p,n,l,g,f[j+3],22,3250441966),g=gx.MD5.FF(g,p,n,l,f[j+4],7,4118548399),l=gx.MD5.FF(l,g,p,n,f[j+5],12,1200080426),n=gx.MD5.FF(n,l,g,p,f[j+6],17,2821735955),p=gx.MD5.FF(p,n,l,g,f[j+7],22,4249261313),g=gx.MD5.FF(g,p,n,l,f[j+8],7,1770035416),l=gx.MD5.FF(l,g,p,n,f[j+9],12,2336552879),n=gx.MD5.FF(n,l,g,p,f[j+10],17,4294925233),p=gx.MD5.FF(p,n,l,g,f[j+11],22,2304563134),g=gx.MD5.FF(g,p,n,l,f[j+12],7,1804603682),l=gx.MD5.FF(l,g,p,n,f[j+13],12,4254626195),n=gx.MD5.FF(n,l,g,p,f[j+14],17,2792965006),
p=gx.MD5.FF(p,n,l,g,f[j+15],22,1236535329),g=gx.MD5.GG(g,p,n,l,f[j+1],5,4129170786),l=gx.MD5.GG(l,g,p,n,f[j+6],9,3225465664),n=gx.MD5.GG(n,l,g,p,f[j+11],14,643717713),p=gx.MD5.GG(p,n,l,g,f[j+0],20,3921069994),g=gx.MD5.GG(g,p,n,l,f[j+5],5,3593408605),l=gx.MD5.GG(l,g,p,n,f[j+10],9,38016083),n=gx.MD5.GG(n,l,g,p,f[j+15],14,3634488961),p=gx.MD5.GG(p,n,l,g,f[j+4],20,3889429448),g=gx.MD5.GG(g,p,n,l,f[j+9],5,568446438),l=gx.MD5.GG(l,g,p,n,f[j+14],9,3275163606),n=gx.MD5.GG(n,l,g,p,f[j+3],14,4107603335),p=
gx.MD5.GG(p,n,l,g,f[j+8],20,1163531501),g=gx.MD5.GG(g,p,n,l,f[j+13],5,2850285829),l=gx.MD5.GG(l,g,p,n,f[j+2],9,4243563512),n=gx.MD5.GG(n,l,g,p,f[j+7],14,1735328473),p=gx.MD5.GG(p,n,l,g,f[j+12],20,2368359562),g=gx.MD5.HH(g,p,n,l,f[j+5],4,4294588738),l=gx.MD5.HH(l,g,p,n,f[j+8],11,2272392833),n=gx.MD5.HH(n,l,g,p,f[j+11],16,1839030562),p=gx.MD5.HH(p,n,l,g,f[j+14],23,4259657740),g=gx.MD5.HH(g,p,n,l,f[j+1],4,2763975236),l=gx.MD5.HH(l,g,p,n,f[j+4],11,1272893353),n=gx.MD5.HH(n,l,g,p,f[j+7],16,4139469664),
p=gx.MD5.HH(p,n,l,g,f[j+10],23,3200236656),g=gx.MD5.HH(g,p,n,l,f[j+13],4,681279174),l=gx.MD5.HH(l,g,p,n,f[j+0],11,3936430074),n=gx.MD5.HH(n,l,g,p,f[j+3],16,3572445317),p=gx.MD5.HH(p,n,l,g,f[j+6],23,76029189),g=gx.MD5.HH(g,p,n,l,f[j+9],4,3654602809),l=gx.MD5.HH(l,g,p,n,f[j+12],11,3873151461),n=gx.MD5.HH(n,l,g,p,f[j+15],16,530742520),p=gx.MD5.HH(p,n,l,g,f[j+2],23,3299628645),g=gx.MD5.II(g,p,n,l,f[j+0],6,4096336452),l=gx.MD5.II(l,g,p,n,f[j+7],10,1126891415),n=gx.MD5.II(n,l,g,p,f[j+14],15,2878612391),
p=gx.MD5.II(p,n,l,g,f[j+5],21,4237533241),g=gx.MD5.II(g,p,n,l,f[j+12],6,1700485571),l=gx.MD5.II(l,g,p,n,f[j+3],10,2399980690),n=gx.MD5.II(n,l,g,p,f[j+10],15,4293915773),p=gx.MD5.II(p,n,l,g,f[j+1],21,2240044497),g=gx.MD5.II(g,p,n,l,f[j+8],6,1873313359),l=gx.MD5.II(l,g,p,n,f[j+15],10,4264355552),n=gx.MD5.II(n,l,g,p,f[j+6],15,2734768916),p=gx.MD5.II(p,n,l,g,f[j+13],21,1309151649),g=gx.MD5.II(g,p,n,l,f[j+4],6,4149444226),l=gx.MD5.II(l,g,p,n,f[j+11],10,3174756917),n=gx.MD5.II(n,l,g,p,f[j+2],15,718787259),
p=gx.MD5.II(p,n,l,g,f[j+9],21,3951481745),g=gx.MD5.AddUnsigned(g,d),p=gx.MD5.AddUnsigned(p,b),n=gx.MD5.AddUnsigned(n,a),l=gx.MD5.AddUnsigned(l,c);return(gx.MD5.WordToHex(g)+gx.MD5.WordToHex(p)+gx.MD5.WordToHex(n)+gx.MD5.WordToHex(l)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(j){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(j)))},encode:function(j){return this.encodeImpl(this.UTF8BytesFromString(j))},bytesFromUTF8Bytes:function(j){for(var f=[],d=0,b=c1=c2=0,a=j.length;d<a;)b=j[d],128>b?(f.push(b),d++):191<b&&224>b?(c2=j[d+1],f.push((b&31)<<6|c2&63),d+=2):(c2=j[d+1],c3=j[d+2],f.push((b&15)<<12|(c2&63)<<6|c3&63),d+=3);return f},UTF8BytesFromString:function(j){for(var j=j.replace(/\r\n/g,"\n"),f=[],d=j.length,b=
0;b<d;b++){var a=j.charCodeAt(b);128>a?f.push(a):(127<a&&2048>a?f.push(a>>6|192):(f.push(a>>12|224),f.push(a>>6&63|128)),f.push(a&63|128))}return f},bytesToString:function(j){for(var f=gx.util.browser.isChrome()?32765:5E4,d=[];j.length>=f;)d.push(eval("String.fromCharCode("+j.slice(0,f).join(",")+");")),j=j.slice(f);0!=j.length&&d.push(eval("String.fromCharCode("+j.join(",")+");"));return d.join("")},decodeImpl:function(j){for(var f=this.f64,d=[],b=0,j=j.replace(/\n|\r/g,""),j=j.replace(/=/g,""),
a=j.length;b<a;)d[d.length]=f[j.charAt(b)]<<2|f[j.charAt(b+1)]>>4,d[d.length]=(f[j.charAt(b+1)]&15)<<4|f[j.charAt(b+2)]>>2,d[d.length]=(f[j.charAt(b+2)]&3)<<6|f[j.charAt(b+3)],b+=4;2==j.length%4&&(d=d.slice(0,d.length-2));3==j.length%4&&(d=d.slice(0,d.length-1));return d},encodeImpl:function(j){var f=this.b64,d=[],b=0,a=j.length;1==a%3&&(j[j.length]=0,j[j.length]=0);2==a%3&&(j[j.length]=0);for(var c=j.length;b<c;)d[d.length]=f[j[b]>>2],d[d.length]=f[(j[b]&3)<<4|j[b+1]>>4],d[d.length]=f[(j[b+1]&15)<<
2|j[b+2]>>6],d[d.length]=f[j[b+2]&63],b+=3;1==a%3&&(d[d.length-1]=d[d.length-2]="=");2==a%3&&(d[d.length-1]="=");return d.join("")},_init:function(){for(var j=0;64>j;j++){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j);this.b64[j]=f;this.f64[f]=j}}};
gx.webSocket=function(){var j=!1,f=!1,d=0,b=function(a){var b=new WebSocket(a);b.onopen=function(){j=!0;d=0};b.onmessage=function(a){gx.dbg.logDebug("gx.webSocket - New Message: "+a.data);gx.fx.obs.notify("gx.ws.onMessage",[a.data])};b.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");f=j=!1;gx.webSocket.reconnect&&3>d&&(d++,gx.lang.doCallTimeout(gx.webSocket._init,gx.webSocket,[],1E4))};window.onbeforeunload=function(){j&&b.close()}};return{reconnect:!0,_init:function(){if(!f&&this.supported()){var a=
gx.fn.getHidden("GX_WEBSOCKET_PORT"),c=gx.fn.getHidden("GX_WEBSOCKET_ID"),d="https:"===location.protocol?"wss://":"ws://",a=a?location.hostname+":"+a+"/":location.host+"/",j=gx.gen.isDotNet()?"/gxwebsocket.svc?":"/gxwebsocket?";try{b(d+a+gx.basePath+j+c),f=!0}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","Could not initialize WebSocket")}}},supported:function(){return"WebSocket"in window}}}();
gx.util.alert=function(j){var f=!1,d=!1;return{init:function(){if(!f||0==j("#gx-main-error").length)j(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),f=!0;this.hide()},showError:function(b){this.init();var a=j("#gx-main-error");a.html('<div class="alert alert-danger alert-dismissable gx-ajax-error"><button type="button" class="close" data-dismiss="alert" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+b+"</span></div>");a.slideDown();
d=!0},hide:function(){d&&(j("#gx-main-error").empty(),d=!1)}}}(gx.$);
gx.geolocation=function(j){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(f){f.attachedCtrl=j("#"+f.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(f);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(f){var d=attachedCtrls.shift(),b=gx.fn.validStruct(gx.O.getValidStructId(d.attachedCtrl.id)),
f=f.coords.latitude+","+f.coords.longitude;gx.evt.setEventRow(gx.pO,d.attachedCtrl);b.v2v&&(b.v2v(f),b.v2c());b.gxgrid&&b.gxgrid.updateControlValue(b,!0)},handle_errors:function(f){attachedCtrls.shift();switch(f.code){case f.PERMISSION_DENIED:f="user did not share geolocation data";break;case f.POSITION_UNAVAILABLE:f="could not detect current position";break;case f.TIMEOUT:f="retrieving position timed out";break;default:f="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(f);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(j,f){var d=j.slice(0,f);return j=j.slice(f).concat(d)},xtime:function(j){j<<=1;return j&256?j^283:j},mult_GF256:function(j,f){var d,b=0;for(d=1;256>d;d*=2,f=this.xtime(f))j&d&&(b^=f);return b},byteSub:function(j,f){var d;d="encrypt"==f?this.SBox:this.SBoxInverse;for(var b=0;4>b;b++)for(var a=0;a<this.Nb;a++)j[b][a]=d[j[b][a]]},shiftRow:function(j,f){for(var d=
1;4>d;d++)j[d]="encrypt"==f?this.cyclicShiftLeft(j[d],this.shiftOffsets[this.Nb][d]):this.cyclicShiftLeft(j[d],this.Nb-this.shiftOffsets[this.Nb][d])},mixColumn:function(j,f){for(var d=[],b=0;b<this.Nb;b++){for(var a=0;4>a;a++)d[a]="encrypt"==f?this.mult_GF256(j[a][b],2)^this.mult_GF256(j[(a+1)%4][b],3)^j[(a+2)%4][b]^j[(a+3)%4][b]:this.mult_GF256(j[a][b],14)^this.mult_GF256(j[(a+1)%4][b],11)^this.mult_GF256(j[(a+2)%4][b],13)^this.mult_GF256(j[(a+3)%4][b],9);for(a=0;4>a;a++)j[a][b]=d[a]}},addRoundKey:function(j,
f){for(var d=0;d<this.Nb;d++)j[0][d]^=f[d]&255,j[1][d]^=f[d]>>8&255,j[2][d]^=f[d]>>16&255,j[3][d]^=f[d]>>24&255},keyExpansion:function(j){var f=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var d=0;d<this.Nk;d++)f[d]=j[4*d]|j[4*d+1]<<8|j[4*d+2]<<16|j[4*d+3]<<24;for(d=this.Nk;d<this.Nb*(this.Nr+1);d++)j=f[d-1],0==d%this.Nk?j=(this.SBox[j>>8&255]|this.SBox[j>>16&255]<<8|this.SBox[j>>24&255]<<16|this.SBox[j&255]<<24)^this.Rcon[Math.floor(d/
this.Nk)-1]:6<this.Nk&&4==d%this.Nk&&(j=this.SBox[j>>24&255]<<24|this.SBox[j>>16&255]<<16|this.SBox[j>>8&255]<<8|this.SBox[j&255]),f[d]=f[d-this.Nk]^j;return f},Round:function(j,f){this.byteSub(j,"encrypt");this.shiftRow(j,"encrypt");this.mixColumn(j,"encrypt");this.addRoundKey(j,f)},InverseRound:function(j,f){this.addRoundKey(j,f);this.mixColumn(j,"decrypt");this.shiftRow(j,"decrypt");this.byteSub(j,"decrypt")},FinalRound:function(j,f){this.byteSub(j,"encrypt");this.shiftRow(j,"encrypt");this.addRoundKey(j,
f)},InverseFinalRound:function(j,f){this.addRoundKey(j,f);this.shiftRow(j,"decrypt");this.byteSub(j,"decrypt")},encrypt:function(j,f){var d;if(j&&8*j.length==this.blockSizeInBits&&f){j=this.packBytes(j);this.addRoundKey(j,f);for(d=1;d<this.Nr;d++)this.Round(j,f.slice(this.Nb*d,this.Nb*(d+1)));this.FinalRound(j,f.slice(this.Nb*this.Nr));return this.unpackBytes(j)}},decrypt:function(j,f){var d;if(j&&8*j.length==this.blockSizeInBits&&f){j=this.packBytes(j);this.InverseFinalRound(j,f.slice(this.Nb*this.Nr));
for(d=this.Nr-1;0<d;d--)this.InverseRound(j,f.slice(this.Nb*d,this.Nb*(d+1)));this.addRoundKey(j,f);return this.unpackBytes(j)}},byteArrayToString:function(j){for(var f="",d=j.length,b=0;b<d;b++)0!=j[b]&&(f+=String.fromCharCode(j[b]));return f},stringToByteArray:function(j){for(var f=[],d=j.length,b=0;b<d;b++)f[f.length]=j.charCodeAt();return f},byteArrayToHex:function(j){var f="";if(j){for(var d=j.length,b=0;b<d;b++)f+=(16>j[b]?"0":"")+j[b].toString(16);return f}},hexToByteArray:function(j){var f=
[];if(!(j.length%2)){if(0==j.indexOf("0x")||0==j.indexOf("0X"))j=j.substring(2);for(var d=j.length,b=0;b<d;b+=2)f[Math.floor(b/2)]=parseInt(j.slice(b,b+2),16);return f}},packBytes:function(j){var f=[];if(j&&!(j.length%4)){f[0]=[];f[1]=[];f[2]=[];f[3]=[];for(var d=j.length,b=0;b<d;b+=4)f[0][b/4]=j[b],f[1][b/4]=j[b+1],f[2][b/4]=j[b+2],f[3][b/4]=j[b+3];return f}},unpackBytes:function(j){for(var f=[],d=j[0].length,b=0;b<d;b++)f[f.length]=j[0][b],f[f.length]=j[1][b],f[f.length]=j[2][b],f[f.length]=j[3][b];
return f},formatPlaintext:function(j){var f=this.blockSizeInBits/8,d;if("string"==typeof j||j.indexOf){var j=j.split(""),b=j.length;for(d=0;d<b;d++)j[d]=j[d].charCodeAt(0)&255}for(d=f-j.length%f;0<d&&d<f;d--)j[j.length]=0;return j},rijndaelEncrypt:function(j,f){var d,b,a,c=this.blockSizeInBits/8,g;if(j&&f&&8*f.length==this.keySizeInBits){mode="ECB";g=[];j=this.formatPlaintext(j);d=this.keyExpansion(f);for(var p=0;p<j.length/c;p++){a=j.slice(p*c,(p+1)*c);if("CBC"==mode)for(b=0;b<c;b++)a[b]^=g[p*c+
b];g=g.concat(this.encrypt(a,d))}return g}},rijndaelDecrypt:function(j,f,d){var b=this.blockSizeInBits/8,a=[],c,g;if(j&&(f&&"string"!=typeof j)&&8*f.length==this.keySizeInBits){d||(d="ECB");f=this.keyExpansion(f);for(g=j.length/b-1;0<g;g--)if(c=this.decrypt(j.slice(g*b,(g+1)*b),f),"CBC"==d)for(var p=0;p<b;p++)a[(g-1)*b+p]=c[p]^j[(g-1)*b+p];else a=c.concat(a);"ECB"==d&&(a=this.decrypt(j.slice(0,b),f).concat(a));return a}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.ui=function(j){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(d){this.gridContainer=d;this.DesignContainerName=this.ContainerName=gx.dom.id(d);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(d,b,a,c){this.clearFunctions();this.refreshDynProperties();this.properties=
[];for(var f=0;f<this.rows.length;f++){this.properties[f]=[];for(var j=this.rows[f],n=0;n<this.columns.length;n++){var l=this.columns[n],o=j.gxProps[l.index],m=l.gxControl;m.grid=this.ownerGrid;m.row=j;m.gridId=this.gxId;m.gridRow=j.gxId;a?m.value=o[0]:m.setProperties.apply(m,o);this.setRenderProperties(j.gxRenderProps[n],m);!m.enabled&&m.type<=gx.html.controls.types.checkBox&&(""!==m.cssClass&&0!==m.cssClass.indexOf("Readonly"))&&(m.cssClass="Readonly"+m.cssClass);this.properties[f][n]=gx.lang.clone(m);
this.addC2V(l,this.properties[f][n])}}this.firstTime=d;this.autoRefreshing=b?!0:!1;this.loadingCollection=a?!0:!1;this.show&&(this.setC2ShowFunction(function(a){a.show();c()}),this.autoRefreshing&&(this.show(),c()));this.autoRefreshing=!1};this.addC2V=function(d,b){this.addC2VFunction(function(a){if(""!==d.gxAttName){var c=a.ParentObject.getValidStruct(d.gxId);c&&(a.ParentObject[c.gxvar]=b.value);gx.fn.setHidden(b.id,b.value)}})};this.setRenderProperties=function(d,b){if(d)for(var a in d)b[a]=d[a]};
this.selectRow=function(d){if(d=this.rows[d])this.instanciateSelectionVars(d.gxId),this.instanciateSelectedRow(d)};this.getEventRow=function(){return!gx.lang.emptyObject(this.GridRow)?this.GridRow:"0001"};this.executeEvent=function(d,b){if(d<this.columns.length&&b<this.rows.length){var a=this.properties[b][d],c=gx.html.controls.eventJSCode(a.jsScrCode,a.eventName,a.jsDynCode,a.grid,a.row);if(""!==c)gx.lang.emptyObject(a.usrOnclick)||(c="if("+a.usrOnclick+") { "+c+" }"),a=new Function(c),"function"==
typeof a&&a();else if(a.clickEvent){var c=this.parentGxObject,f=a.row.gxId;this.ownerGrid.instanciateRow(f);c[a.clickEvent].call(c,f)}}};this.executeIsValid=function(d,b){if(d<this.columns.length&&b<this.rows.length){var a=this.parentGxObject,c=this.properties[b][d],f=c.vStruct||a.GXValidFnc[c.column.gxId],c=c.row.gxId;f&&f.isvalid&&(this.ownerGrid.instanciateRow(c),a[f.isvalid].call(a))}};this.addEventHandler=function(d,b){this[d]=function(a){var c=this.isServerEvent(d);c&&a&&gx.fx.obs.addObserver("gx.onafterevent",
this,a,{single:!0});this.eventHandler(this.GridId,gx.fn.currentGridRow(this.GridId),b);!c&&a&&a.call(this)}.closure(this)};var f={};this.requestSuggest=function(d,b,a){var c=j.Deferred();if(d<this.columns.length&&b<this.rows.length){var g=this.parentGxObject,b=this.properties[b][d],d=b.vStruct||g.GXValidFnc[b.column.gxId],b=b.row.gxId,p=f[b+"_"+d.id];!p&&(d&&d.gxsgprm)&&(this.ownerGrid.instanciateRow(b),p=new gx.fx.suggestProvider(g,d.gxsgprm[1],null,d.gxsgprm[0]),f[b+"_"+d.id]=p);p?(gx.fx.updateSuggestParms(d.gxsgprm[2]),
p.requestSuggestions([],function(){c.resolve(p.values)},function(){c.reject()},a)):c.reject()}else c.reject();return c.promise()};this.executeValidate=function(d,b){if(d<this.columns.length&&b<this.rows.length){var a=this.parentGxObject,c=this.properties[b][d],f=c.vStruct||a.GXValidFnc[c.column.gxId],c=c.row.gxId;f&&f.fnc&&(this.ownerGrid.instanciateRow(c),f.fnc.call(a))}}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));
!window.$.fn||!window.$.fn.jquery?gx.dbg.write("Warning: $ is not a jQuery object instance"):gx.dbg.write("global $ is jquery"+window.$.fn.jquery);
window.Modernizr=function(j,f,d){function b(a,b){for(var c in a){var f=a[c];if(!~(""+f).indexOf("-")&&p[f]!==d)return b=="pfx"?f:true}return false}function a(a,c,f){var g=a.charAt(0).toUpperCase()+a.slice(1),j=(a+" "+n.join(g+" ")+g).split(" ");if(typeof c==="string"||typeof c==="undefined")return b(j,c);j=(a+" "+l.join(g+" ")+g).split(" ");a:{var a=j,k;for(k in a){g=c[a[k]];if(g!==d){if(f===false){c=a[k];break a}if(typeof g==="function"){c=g.bind(f||c);break a}c=g;break a}}c=false}return c}var c=
{},g=f.documentElement,f=f.createElement("modernizr"),p=f.style,n=["Webkit","Moz","O","ms"],l=["webkit","moz","o","ms"],f={},o=[],m=o.slice,k,q={}.hasOwnProperty,t;t=typeof q!=="undefined"&&typeof q.call!=="undefined"?function(a,b){return q.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=m.call(arguments,1),d=function(){if(this instanceof
d){var f=function(){};f.prototype=b.prototype;var f=new f,g=b.apply(f,c.concat(m.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(m.call(arguments)))};return d};f.flexbox=function(){return a("flexWrap")};f.history=function(){return!(!j.history||!history.pushState)};f.csstransitions=function(){return a("transition")};for(var s in f)if(t(f,s)){k=s.toLowerCase();c[k]=f[s]();o.push((c[k]?"":"no-")+k)}c.addTest=function(a,b){if(typeof a=="object")for(var f in a)t(a,f)&&c.addTest(f,
a[f]);else{a=a.toLowerCase();if(c[a]!==d)return c;b=typeof b=="function"?b():b;if(typeof enableClasses!=="undefined"&&enableClasses)g.className=g.className+(" "+(b?"":"no-")+a);c[a]=b}return c};p.cssText="";f=null;c._version="2.8.3";c._domPrefixes=l;c._cssomPrefixes=n;c.testProp=function(a){return b([a])};c.testAllProps=a;return c}(this,this.document);
gx.spa=function(j){var f=/<head[^>]*>([\s\S]*?)<\/head>/i,d=/(<body[^>]*>[\s\S]*?<\/body>)/i,b=/<title[^>]*>([\s\S]*?)<\/title>/i,a=false,c=false,g=true,p={},n,l;"state"in window.history&&(g=false);return{timeout:5E3,setTimeout:function(a){this.timeout=a},isSameApp:function(a,b){var c=a.port===b.port,c=(c=c||a.port===""&&a.protocol==="http:"&&b.port==="80")||a.port===""&&a.protocol==="https:"&&b.port==="443";return a.protocol===b.protocol&&a.hostname===b.hostname&&c},handleClick:function(a){var b=
this.getTarget(a),c,d;if(b&&b.tagName.toUpperCase()==="A"&&!(b.getAttribute("href")===null||b.getAttribute("href")===void 0))if(!b.target||!(b.target=="_blank"||b.target=="_parent"&&window.parent!=window||b.target=="_top"&&window.top!=window||b.target.substr(0,1)!="_"&&window.name!=b.target))if(!(a.which>1||a.metaKey||a.ctrlKey)){d=this.parseUrl(b.href);if(this.isSameApp(location,d)){var f=d.pathname.charAt(0)=="/"?d.pathname:"/"+d.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===
f.substring(0,f.lastIndexOf("/"))&&d.href.replace(/#.*/,"")!==location.href.replace(/#.*/,"")&&b.getAttribute("href")!==""&&b.href.indexOf("javascript:")!==0)if(this.ignoreClick)this.ignoreClick=false;else{d=j(b);for(c in p)if(p.hasOwnProperty(c)&&d.is(c))return;this.navigate({url:b.href,push:true,scrollTo:true,direction:"forward"});a.preventDefault()}}}},redirect:function(a,b){delete gx.referrer;var b=b===void 0||b,c=this.parseUrl(a),d=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;if(this.isSameApp(location,
c))if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==d.substring(0,d.lastIndexOf("/")))window.location=a;else{gx.referrer=location.href;this.navigate({url:a,push:b,scrollTo:true,direction:"forward"})}else window.location=a},setLocation:function(b){if(gx.util.browser.isFirefox())setTimeout(function(){a=false;window.location.href=b},100);else{a=false;window.location=b}},canNavigate:function(){return!a&&!c},isNavigating:function(){return!this.canNavigate()},navigate:function(b){var c,
d,f=b.url;if(this.canNavigate()){a=true;this.notify("onbeforenavigate",[f]);if((d=this.request)&&d.readyState<4){d.onreadystatechange=gx.emptyFn;gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+d.readyState);d.abort()}this.request=d=gx.http.doCall({method:"GET",url:f,handler:function(g,j,l){var g=l.getResponseHeader("X-SPA-REDIRECT-URL"),n=l.getResponseHeader("X-GXOBJECT");c&&clearTimeout(c);if(l.status==530)this.setLocation(f);else if(g){a=false;setTimeout(gx.spa.redirect.closure(gx.spa,
[g]),100)}else{if(b.push&&d.readyState>0&&n){this.updateState();this.state=this.createState(b);window.history.pushState(null,"",f)}this.processResponse.call(this,j,l,b)}},beforeSend:function(a){this.notify("onbeforesend",[this.createEvent(a,f),"X-SPA-REQUEST","X-SPA-MP"]);c=setTimeout(this.timeoutHandler.closure(this,[a,f]),this.timeout);a.setRequestHeader("X-SPA-REQUEST","1")},error:function(a){a=this.createEvent(a,f);a.cancel=true;this.notify("onerror",[a]);a.cancel&&this.setLocation(f)},ajaxHeader:false,
avoidCache:false,handleAllStatusCodes:true,obj:this});this.notify("onnavigatestart",[f])}else this.setLocation(f)},processResponse:function(a,b,d){try{var f=d.url,g=this.parseUrl(f).hash,j=d.direction,l=b.getResponseHeader("X-GXOBJECT"),n=b.getResponseHeader("X-SPA-RETURN"),p=this.createEvent(b,f),x=gx.pO.MasterPage,y=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",B=b.getResponseHeader("X-SPA-MP")||"",A=!(y===""||y.toLowerCase()!=B.toLowerCase()),z=this.getContentPlaceholder();if(n!=null)gx.fn.closeWindowServerScript(n,
true);else if(l){this.notify("onbeforeprocessresponse",[p,a,l,y,B,A]);var w=this.extractContents(b,!A),C=A?z.firstChild:document.body,D=w.body;if(w.body){this.state=this.createState(d);d.push&&window.history.replaceState(this.state,"",f);if(w.title)document.title=w.title;this.notify("onbeforecontentreplace",[b,f,w]);gx.cache.removeRemoteFile(gx.getThemeElement().href);gx.dom.replaceWithFx(C,D,{domRemove:false,domAdd:A,enteringClass:j=="forward"?"entering":"leaving",leavingClass:j=="forward"?"leaving":
"entering",enterDurationClass:j=="forward"?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:j=="forward"?"leave-fx-duration":"enter-fx-duration",transitionTimeout:800,transitionEndCallback:function(){D=this.replaceContentCallback(b,f,g,a,z,w,C,D,d,l,x,y,B,A);A||gx.html.processCode(w.head.innerHTML+w.body.innerHTML,false,this.processCodeCallback.closure(this,[b,f,g,a,z,w,C,D,d,l,x,y,B,A]),null,null,false);c=false;this.notify("ontransitionend",[p,x,y,B,A]);this.recoverScrollPosition(d);return D}.closure(this),
beforeTransitionStart:function(j){c=true;if(A){gx.html.processCode(a,false,function(){j&&j();this.processCodeCallback(b,f,g,a,z,w,C,D,d,l,x,y,B,A)}.closure(this),null,null,false);return true}}.closure(this)})}else this.setLocation(f)}else this.setLocation(f)}catch(G){gx.dbg.logEx(G,"gxspa.js","processResponse");this.setLocation(f)}},replaceContentCallback:function(a,b,c,d,f,g,l,n,p,x,y,B,A,z){if(z){if(l.parentNode){this.dettachContent(l);l.parentNode.removeChild(l)}}else{if(gx.util.browser.isWebkit()||
gx.util.browser.isFirefox()){this.dettachContent(document.body);j(document.body).remove();var w=document.createElement("body"),a=j(n).prop("attributes");j.each(a,function(){j(w).attr(this.name,this.value)});document.documentElement.appendChild(w);w.innerHTML=n.innerHTML;n=w}else{document.body=n;n=document.body}document.head=g.head}return n},processCodeCallback:function(b,c,d,f,g,j,l,n,p,x,y,B,A,z){b=this.createEvent(b,c);try{this.notify("oncontentreplace",[b,f,j,x,y,B,A,z])}catch(w){gx.dbg.logEx(w,
"gxspa.js","processCodeCallback");this.setLocation(c)}f=true;if(p.scrollTo){window.scrollTo(0,0);f=false}p.push&&window._gaq&&_gaq.push(["_trackPageview"]);p.push&&window.ga&&window.ga("send","pageview",location.pathname);if(d!==""){j=this.parseUrl(c);j.hash=d;window.history.replaceState(this.state,"",j.href);if(d=gx.dom.el(j.hash)){d.scrollIntoView(true);f=false}}this.notify("onnavigate",[c]);a=false;f&&this.recoverScrollPosition(p)},timeoutHandler:function(a,b){var c=this.createEvent(a,b);c.cancel=
true;this.notify("ontimeout",[c]);if(c.cancel){a.abort();gx.dbg.logMsg("Request cancelled - timeout expired: "+a.readyState);this.setLocation(b)}},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(a,c){var g=document.createElement("div"),l={},n,s,r;if(c){g=document.createElement("iframe");g.src="about:blank";g.style.display="none";document.body.appendChild(g);var p=a.responseText.match(f);p.length>1&&(n=p[1]);p=a.responseText.match(d);p.length>
0&&(s=p[0]);p=a.responseText.match(b);if(p.length>1)l.title=p[1];g.contentDocument&&g.contentDocument.body==null&&g.contentDocument.write("<body></body>");g.contentDocument.body.outerHTML=s;r=g.contentDocument.head;r.innerHTML=n;j("head script").each(function(a,b){j(r).find("script").each(function(a,c){b.src==c.src&&r.removeChild(c)})});l.body=g.contentDocument.body;l.head=r}else{gx.html.setInnerHtml(g,a.responseText,false,false,false);n=gx.dom.byClass("gx-content-placeholder","div",g);if(n.length===
0)return l;l.body=n[0].firstChild;n=gx.dom.byTag("title",g);if(n.length>0)l.title=n[0].innerText||n[0].textContent}return l},handlePopState:function(a){var a=a.state,b=this.getContentPlaceholder();if(a&&a.source=="gx-spa"&&!(g&&initialURL==a.url)){this.navigate({id:a.id,url:a.url,push:false,scrollPosition:a.scrollPosition,direction:this.state.id<a.id?"forward":"back"});b&&void 0}},parseUrl:function(a){var b=document.createElement("a");b.href=a;return b},createEvent:function(a,b){return{req:a,url:b,
cancel:false}},addIgnoredSelector:function(a){p[a]=true},removeIgnoredSelector:function(a){delete p[a]},recoverScrollPosition:function(a){var b=a.scrollPosition;this.canNavigate()&&(!a.scrollTo&&b)&&window.scrollTo(b.x,b.y)},dettachContent:function(a){var b=gx.dom.getActiveElement();b&&j.contains(a,b)&&gx.dom.purgeElement(b)},updateState:function(){var a=this.state;a.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(a,"",a.url)},createState:function(a){a=a||{};return{id:a.id||
(new Date).getTime(),source:"gx-spa",url:a.url}},getTarget:function(a){return a.target&&a.target.tagName=="A"?a.target:gx.dom.findParentByTagName(a.target,"A")},applyConfig:function(a){if(a&&a.listeners)for(var b in a.listeners){var c=a.listeners[b];typeof c=="function"&&this.addObserver(b,a.listeners.scope||this,c)}},setBodyClass:function(){var a="Form",b=document.body;b.className&&(a=b.className.split(" ")[0]);gx.dom.hasClass(b,a+"-fx")||gx.dom.addClass(b,a+"-fx")},isSupported:function(){return gx.pO.fullAjax&&
Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(a){if(this.isSupported()&&!this.started){this.applyConfig(a);n=this.handleClick.closure(this);l=this.handlePopState.closure(this);document.addEventListener("click",n,false);window.addEventListener("popstate",l,false);this.state=this.createState({url:location.href});window.history.replaceState(this.state,document.title);this.setBodyClass();this.started=true}},stop:function(){if(this.started){document.removeEventListener("click",
n,false);window.removeEventListener("popstate",l,false);this.started=false}}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);
(function(j){typeof define==="function"&&define.amd?define(["jquery"],j):j(jQuery)})(function(j){(function(){function f(a,b,c){return[parseFloat(a[0])*(q.test(a[0])?b/100:1),parseFloat(a[1])*(q.test(a[1])?c/100:1)]}function d(a,b){return parseInt(j.css(a,b),10)||0}function b(a){var b=a[0];return b.nodeType===9?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:j.isWindow(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,
offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}j.ui=j.ui||{};var a,c,g=Math.max,p=Math.abs,n=Math.round,l=/left|center|right/,o=/top|center|bottom/,m=/[\+\-]\d+(\.[\d]+)?%?/,k=/^\w+/,q=/%$/,t=j.fn.position;j.position={scrollbarWidth:function(){if(a!==void 0)return a;var b,c,d=j("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");c=d.children()[0];j("body").append(d);
b=c.offsetWidth;d.css("overflow","scroll");c=c.offsetWidth;if(b===c)c=d[0].clientWidth;d.remove();return a=b-c},getScrollInfo:function(a){var b=a.isWindow||a.isDocument?"":a.element.css("overflow-x"),c=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),b=b==="scroll"||b==="auto"&&a.width<a.element[0].scrollWidth;return{width:c==="scroll"||c==="auto"&&a.height<a.element[0].scrollHeight?j.position.scrollbarWidth():0,height:b?j.position.scrollbarWidth():0}},getWithinInfo:function(a){var a=j(a||
window),b=j.isWindow(a[0]),c=!!a[0]&&a[0].nodeType===9;return{element:a,isWindow:b,isDocument:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b||c?a.width():a.outerWidth(),height:b||c?a.height():a.outerHeight()}}};j.fn.position=function(a){if(!a||!a.of)return t.apply(this,arguments);var a=j.extend({},a),r,q,u,x,y,B,A=j(a.of),z=j.position.getWithinInfo(a.within),w=j.position.getScrollInfo(z),C=(a.collision||"flip").split(" "),D={};B=b(A);if(A[0].preventDefault)a.at=
"left top";q=B.width;u=B.height;x=B.offset;y=j.extend({},x);j.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,d;b.length===1&&(b=l.test(b[0])?b.concat(["center"]):o.test(b[0])?["center"].concat(b):["center","center"]);b[0]=l.test(b[0])?b[0]:"center";b[1]=o.test(b[1])?b[1]:"center";c=m.exec(b[0]);d=m.exec(b[1]);D[this]=[c?c[0]:0,d?d[0]:0];a[this]=[k.exec(b[0])[0],k.exec(b[1])[0]]});C.length===1&&(C[1]=C[0]);if(a.at[0]==="right")y.left=y.left+q;else if(a.at[0]==="center")y.left=y.left+
q/2;if(a.at[1]==="bottom")y.top=y.top+u;else if(a.at[1]==="center")y.top=y.top+u/2;r=f(D.at,q,u);y.left=y.left+r[0];y.top=y.top+r[1];return this.each(function(){var b,k,l=j(this),m=l.outerWidth(),o=l.outerHeight(),t=d(this,"marginLeft"),B=d(this,"marginTop"),E=m+t+d(this,"marginRight")+w.width,Q=o+B+d(this,"marginBottom")+w.height,I=j.extend({},y),M=f(D.my,l.outerWidth(),l.outerHeight());if(a.my[0]==="right")I.left=I.left-m;else if(a.my[0]==="center")I.left=I.left-m/2;if(a.my[1]==="bottom")I.top=
I.top-o;else if(a.my[1]==="center")I.top=I.top-o/2;I.left=I.left+M[0];I.top=I.top+M[1];if(!c){I.left=n(I.left);I.top=n(I.top)}b={marginLeft:t,marginTop:B};j.each(["left","top"],function(c,d){if(j.ui.position[C[c]])j.ui.position[C[c]][d](I,{targetWidth:q,targetHeight:u,elemWidth:m,elemHeight:o,collisionPosition:b,collisionWidth:E,collisionHeight:Q,offset:[r[0]+M[0],r[1]+M[1]],my:a.my,at:a.at,within:z,elem:l})});a.using&&(k=function(b){var c=x.left-I.left,d=c+q-m,f=x.top-I.top,j=f+u-o,k={target:{element:A,
left:x.left,top:x.top,width:q,height:u},element:{element:l,left:I.left,top:I.top,width:m,height:o},horizontal:d<0?"left":c>0?"right":"center",vertical:j<0?"top":f>0?"bottom":"middle"};if(q<m&&p(c+d)<q)k.horizontal="center";if(u<o&&p(f+j)<u)k.vertical="middle";k.important=g(p(c),p(d))>g(p(f),p(j))?"horizontal":"vertical";a.using.call(this,b,k)});l.offset(j.extend(I,{using:k}))})};j.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,j=a.left-b.collisionPosition.marginLeft,
c=d-j,k=j+b.collisionWidth-f-d;if(b.collisionWidth>f)if(c>0&&k<=0){d=a.left+c+b.collisionWidth-f-d;a.left=a.left+(c-d)}else a.left=k>0&&c<=0?d:c>k?d+f-b.collisionWidth:d;else a.left=c>0?a.left+c:k>0?a.left-k:g(a.left-j,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,j=a.top-b.collisionPosition.marginTop,c=d-j,k=j+b.collisionHeight-f-d;if(b.collisionHeight>f)if(c>0&&k<=0){d=a.top+c+b.collisionHeight-f-d;a.top=a.top+(c-d)}else a.top=k>0&&c<=0?d:c>k?
d+f-b.collisionHeight:d;else a.top=c>0?a.top+c:k>0?a.top-k:g(a.top-j,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,j=a.left-b.collisionPosition.marginLeft,c=j-g,k=j+b.collisionWidth-f-g,j=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,l=b.at[0]==="left"?b.targetWidth:b.at[0]==="right"?-b.targetWidth:0,m=-2*b.offset[0];if(c<0){d=a.left+j+l+m+b.collisionWidth-f-d;if(d<0||d<p(c))a.left=a.left+(j+l+m)}else if(k>
0){d=a.left-b.collisionPosition.marginLeft+j+l+m-g;if(d>0||p(d)<k)a.left=a.left+(j+l+m)}},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,j=a.top-b.collisionPosition.marginTop,c=j-g,k=j+b.collisionHeight-f-g,j=b.my[1]==="top"?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,l=b.at[1]==="top"?b.targetHeight:b.at[1]==="bottom"?-b.targetHeight:0,m=-2*b.offset[1];if(c<0){d=a.top+j+l+m+b.collisionHeight-f-d;if(d<0||d<p(c))a.top=a.top+(j+l+m)}else if(k>
0){d=a.top-b.collisionPosition.marginTop+j+l+m-g;if(d>0||p(d)<k)a.top=a.top+(j+l+m)}}},flipfit:{left:function(){j.ui.position.flip.left.apply(this,arguments);j.ui.position.fit.left.apply(this,arguments)},top:function(){j.ui.position.flip.top.apply(this,arguments);j.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b,d,f,g=document.getElementsByTagName("body")[0];d=document.createElement("div");a=document.createElement(g?"div":"body");b={visibility:"hidden",width:0,height:0,border:0,margin:0,
background:"none"};g&&j.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in b)a.style[f]=b[f];a.appendChild(d);b=g||document.documentElement;b.insertBefore(a,b.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=j(d).offset().left;c=d>10&&d<11;a.innerHTML="";b.removeChild(a)})()})()});
